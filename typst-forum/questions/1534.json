{
  "topic_metadata": {
    "id": 1534,
    "title": "How can I set the alignment of table cells for certain rows and columns through a function?",
    "slug": "how-can-i-set-the-alignment-of-table-cells-for-certain-rows-and-columns-through-a-function",
    "posts_count": 5,
    "created_at": "2024-11-04T14:50:49.649Z",
    "last_posted_at": "2024-11-04T15:15:20.850Z",
    "views": 515,
    "like_count": 2,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "tables"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 338
  },
  "posts": [
    {
      "id": 5119,
      "post_number": 1,
      "username": "maxigaz",
      "name": "maxigaz",
      "created_at": "2024-11-04T14:50:49.798Z",
      "updated_at": "2024-11-04T14:50:49.798Z",
      "cooked": "<p>I’m trying to centre all cells in a table except the ones in the header (first row) and the last column.</p>\n<p>When I try the following code, the <code>typst</code> CLI compiler prints out for the second line, <code>error: expected alignment or auto, found none</code>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let ktable(..cells) = {\n  set table(align: (x, y) =&gt; {\n    if x in (0, 1, 2) and y &gt; 0 {\n      // Align vertically and horizontally\n      center + horizon\n    }\n  })\n  show table.cell: c =&gt; {\n    if c.y &gt; 0 and c.x == 0 {\n      return text(22pt, c)\n    }\n    c\n  }\n  table(\n    stroke: (x: none, y: color.rgb(\"#DEDEDE\")),\n\n    columns: (50pt, 50pt, auto, auto),\n    inset: 8pt,\n\n    table.hline(stroke: black),\n\n    table.cell(align: center)[*Char.*],\n    table.cell(align: center)[*Keyword*],\n    table.cell(align: center)[*Index*],\n    table.cell(align: center)[*Story*],\n    table.hline(stroke: black),\n\n    ..cells,\n\n    table.hline(stroke: black),\n  )\n}\n\n#ktable(\n  [吾], [I], [11],\n  [#lorem(10)],\n\n  [明], [bright], [20],\n  [#lorem(10)],\n\n  [唱], [chant], [21],\n  [#lorem(10)],\n)\n</code></pre>",
      "raw": "I'm trying to centre all cells in a table except the ones in the header (first row) and the last column.\n\nWhen I try the following code, the `typst` CLI compiler prints out for the second line, `error: expected alignment or auto, found none`.\n\n```typ\n#let ktable(..cells) = {\n  set table(align: (x, y) => {\n    if x in (0, 1, 2) and y > 0 {\n      // Align vertically and horizontally\n      center + horizon\n    }\n  })\n  show table.cell: c => {\n    if c.y > 0 and c.x == 0 {\n      return text(22pt, c)\n    }\n    c\n  }\n  table(\n    stroke: (x: none, y: color.rgb(\"#DEDEDE\")),\n\n    columns: (50pt, 50pt, auto, auto),\n    inset: 8pt,\n\n    table.hline(stroke: black),\n\n    table.cell(align: center)[*Char.*],\n    table.cell(align: center)[*Keyword*],\n    table.cell(align: center)[*Index*],\n    table.cell(align: center)[*Story*],\n    table.hline(stroke: black),\n\n    ..cells,\n\n    table.hline(stroke: black),\n  )\n}\n\n#ktable(\n  [吾], [I], [11],\n  [#lorem(10)],\n\n  [明], [bright], [20],\n  [#lorem(10)],\n\n  [唱], [chant], [21],\n  [#lorem(10)],\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 2687.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 738
    },
    {
      "id": 5120,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-04T15:04:14.681Z",
      "updated_at": "2024-11-04T15:04:14.681Z",
      "cooked": "<p>In <code>align</code>, you are only returning a value when your conditions are met. You need to return a default value.</p>",
      "raw": "In `align`, you are only returning a value when your conditions are met. You need to return a default value.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 20.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5123,
      "post_number": 3,
      "username": "maxigaz",
      "name": "maxigaz",
      "created_at": "2024-11-04T15:09:06.033Z",
      "updated_at": "2024-11-04T15:09:06.033Z",
      "cooked": "<p>Do you mean I need to add something to declare the value as default?</p>",
      "raw": "Do you mean I need to add something to declare the value as default?",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 35.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 738
    },
    {
      "id": 5124,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-04T15:12:33.105Z",
      "updated_at": "2024-11-04T15:12:47.508Z",
      "cooked": "<p>To complement this answer, whenever you write an <code>if</code> without an <code>else</code>, there’s an implicit <code>else { none }</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#repr(if 5 != 5 { \"something\" })  // none\n\n// this is because the above is equivalent to\n#repr(if 5 != 5 { \"something\" } else { none })  // none\n</code></pre>\n<p>So, the problem arises in this part of your code:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set table(align: (x, y) =&gt; {\n    if x in (0, 1, 2) and y &gt; 0 {\n      // Align vertically and horizontally\n      center + horizon\n    } // else { none } is implicit\n  })\n</code></pre>\n<p>When the condition doesn’t match, you’re setting an alignment of <code>none</code>, which isn’t valid!</p>\n<p>Instead, add an explicit <code>else { auto }</code> (<code>auto</code> is the default and means that alignment should be inherited from outside the table):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set table(align: (x, y) =&gt; {\n    if x in (0, 1, 2) and y &gt; 0 {\n      // Align vertically and horizontally\n      center + horizon\n    } else {\n      // Use alignment from outside\n      // (Alternatively: can use 'start + top' as default)\n      auto\n    }\n  })\n</code></pre>",
      "raw": "To complement this answer, whenever you write an `if` without an `else`, there's an implicit `else { none }`:\n\n```typ\n#repr(if 5 != 5 { \"something\" })  // none\n\n// this is because the above is equivalent to\n#repr(if 5 != 5 { \"something\" } else { none })  // none\n```\n\nSo, the problem arises in this part of your code:\n\n```typ\n#set table(align: (x, y) => {\n    if x in (0, 1, 2) and y > 0 {\n      // Align vertically and horizontally\n      center + horizon\n    } // else { none } is implicit\n  })\n```\n\nWhen the condition doesn't match, you're setting an alignment of `none`, which isn't valid!\n\nInstead, add an explicit `else { auto }` (`auto` is the default and means that alignment should be inherited from outside the table):\n\n```typ\n#set table(align: (x, y) => {\n    if x in (0, 1, 2) and y > 0 {\n      // Align vertically and horizontally\n      center + horizon\n    } else {\n      // Use alignment from outside\n      // (Alternatively: can use 'start + top' as default)\n      auto\n    }\n  })\n```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 31,
      "score": 106.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 5125,
      "post_number": 5,
      "username": "maxigaz",
      "name": "maxigaz",
      "created_at": "2024-11-04T15:15:20.850Z",
      "updated_at": "2024-11-04T15:15:20.850Z",
      "cooked": "<p>Thank you for the detailed explanation!</p>",
      "raw": "Thank you for the detailed explanation!",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 10.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 738
    }
  ],
  "scraped_at": "2025-06-10T09:55:32.432454"
}