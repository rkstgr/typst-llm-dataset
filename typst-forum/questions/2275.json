{
  "topic_metadata": {
    "id": 2275,
    "title": "How can I make label references work across multiple files with Neovim + tinymist?",
    "slug": "how-can-i-make-label-references-work-across-multiple-files-with-neovim-tinymist",
    "posts_count": 5,
    "created_at": "2025-01-02T10:56:29.508Z",
    "last_posted_at": "2025-01-08T08:37:23.819Z",
    "views": 394,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "maxigaz",
    "tags": [
      "referencing",
      "neovim",
      "tinymist"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 475
  },
  "posts": [
    {
      "id": 7144,
      "post_number": 1,
      "username": "maxigaz",
      "name": "maxigaz",
      "created_at": "2025-01-02T10:56:29.667Z",
      "updated_at": "2025-02-05T14:57:20.266Z",
      "cooked": "<p>I have a Typst document split into multiple files. For example:</p>\n<pre><code class=\"lang-auto\">chapter.typ\nmain.typ\n</code></pre>\n<p>In <code>chapter.typ</code>, I have a link that points to a label defined in <code>main.typ</code>. Here’s the contents of both:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// chapter.typ\n#link(&lt;label1&gt;)[Click me]\n#pagebreak()\n</code></pre>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// main.typ\n#include(\"chapter.typ\")\n#lorem(30)\n&lt;label1&gt;Now you're here.\n</code></pre>\n<p>The problem is that tinymist marks the link with the diagnostic error ‘label <code>&lt;label1&gt;</code> does not exist in the document’ in Neovim.</p>\n<p>Is it possible to tell tinymist to be aware of both files when handling links with labels and supress the error?</p>",
      "raw": "I have a Typst document split into multiple files. For example:\n\n```\nchapter.typ\nmain.typ\n```\n\nIn `chapter.typ`, I have a link that points to a label defined in `main.typ`. Here's the contents of both:\n\n```typ\n// chapter.typ\n#link(<label1>)[Click me]\n#pagebreak()\n```\n\n```typ\n// main.typ\n#include(\"chapter.typ\")\n#lorem(30)\n<label1>Now you're here.\n```\n\nThe problem is that tinymist marks the link with the diagnostic error 'label `<label1>` does not exist in the document' in Neovim.\n\nIs it possible to tell tinymist to be aware of both files when handling links with labels and supress the error?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 48,
      "score": 1554.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 738
    },
    {
      "id": 7145,
      "post_number": 2,
      "username": "maxigaz",
      "name": "maxigaz",
      "created_at": "2025-01-02T11:12:50.962Z",
      "updated_at": "2025-01-02T16:47:18.601Z",
      "cooked": "<p>I’ve found a solution <a href=\"https://github.com/Myriad-Dreamin/tinymist/blob/main/editors/neovim/README.md#working-with-multiple-file-projects\" rel=\"noopener nofollow ugc\">here</a>:</p>\n<pre><code class=\"lang-auto\">:lua vim.lsp.buf.execute_command({ command = 'tinymist.pinMain', arguments = { vim.api.nvim_buf_get_name(0) } })\n</code></pre>\n<p>This does make the error go away, although ‘unpinning’ the main file with <code>:lua vim.lsp.buf.execute_command({ command = 'tinymist.pinMain', arguments = { nil } })</code> just prints out this error:</p>\n<pre><code class=\"lang-auto\">-32602: expect Option&lt;PathBuf&gt; at args[0]\n</code></pre>\n<p>It may not be ideal, but it’s better than nothing.</p>\n<hr>\n<p>Update: I’ve just tried again, and I can’t reliably make it work using the command I pasted earlier, not even on the same minimal examples.</p>\n<p>After some trial and error, I managed to make the error go away by restarting the language server from Neovim. (Even auto completion of the label worked.) However, when I quit Neovim and opened the files again, the error is back.</p>",
      "raw": "I've found a solution [here](https://github.com/Myriad-Dreamin/tinymist/blob/main/editors/neovim/README.md#working-with-multiple-file-projects):\n\n```\n:lua vim.lsp.buf.execute_command({ command = 'tinymist.pinMain', arguments = { vim.api.nvim_buf_get_name(0) } })\n```\n\nThis does make the error go away, although 'unpinning' the main file with `:lua vim.lsp.buf.execute_command({ command = 'tinymist.pinMain', arguments = { nil } })` just prints out this error:\n\n```\n-32602: expect Option<PathBuf> at args[0]\n```\n\nIt may not be ideal, but it's better than nothing.\n\n------\n\nUpdate: I've just tried again, and I can't reliably make it work using the command I pasted earlier, not even on the same minimal examples.\n\nAfter some trial and error, I managed to make the error go away by restarting the language server from Neovim. (Even auto completion of the label worked.) However, when I quit Neovim and opened the files again, the error is back.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 46,
      "score": 23.8,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 738
    },
    {
      "id": 7241,
      "post_number": 3,
      "username": "maxigaz",
      "name": "maxigaz",
      "created_at": "2025-01-06T11:15:09.296Z",
      "updated_at": "2025-01-06T11:15:09.296Z",
      "cooked": "<p>I have no idea what happened, but pinning the buffer works again (using Tinymist 0.12.16 and Neovim v0.10.3 on Arch Linux).</p>\n<p>I can’t edit my reply anymore, so I’m just going to mark it as the solution the way it is.</p>",
      "raw": "I have no idea what happened, but pinning the buffer works again (using Tinymist 0.12.16 and Neovim v0.10.3 on Arch Linux).\n\nI can't edit my reply anymore, so I'm just going to mark it as the solution the way it is.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 31.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 738
    },
    {
      "id": 7281,
      "post_number": 4,
      "username": "tilhi",
      "name": "",
      "created_at": "2025-01-07T21:18:56.857Z",
      "updated_at": "2025-01-07T21:18:56.857Z",
      "cooked": "<p>Hi, I’m experiencing the same issue as Maxigaz, but I’m using VSCode, so the solution provided doesn’t work for me. Does anyone have any suggestions for resolving this in VSCode?</p>\n<p>Alternatively, a more generalized solution that works across different editors would be even better.</p>\n<p>I’m also struggling to understand how the “each file is its own module” philosophy applies to cross-referencing between modules and using bibliography references when writing a multi-file document. Could someone clarify this?</p>",
      "raw": "Hi, I'm experiencing the same issue as Maxigaz, but I’m using VSCode, so the solution provided doesn’t work for me. Does anyone have any suggestions for resolving this in VSCode?\n\nAlternatively, a more generalized solution that works across different editors would be even better.\n\nI’m also struggling to understand how the \"each file is its own module\" philosophy applies to cross-referencing between modules and using bibliography references when writing a multi-file document. Could someone clarify this?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 56.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1022
    },
    {
      "id": 7289,
      "post_number": 5,
      "username": "maxigaz",
      "name": "maxigaz",
      "created_at": "2025-01-08T08:37:23.819Z",
      "updated_at": "2025-01-08T08:37:23.819Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"tilhi\" data-post=\"4\" data-topic=\"2275\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/tilhi/48/2826_2.png\" class=\"avatar\"> tilhi:</div>\n<blockquote>\n<p>Hi, I’m experiencing the same issue as Maxigaz, but I’m using VSCode, so the solution provided doesn’t work for me. Does anyone have any suggestions for resolving this in VSCode?</p>\n</blockquote>\n</aside>\n<p>I don’t use VSCode, but I did come across <a href=\"https://github.com/Myriad-Dreamin/tinymist/issues/321#issuecomment-2485941136\" rel=\"noopener nofollow ugc\">this suggestion</a> while doing research.</p>\n<p>And just like Neovim, VSCode also has its own notes for tinymist <a href=\"https://github.com/Myriad-Dreamin/tinymist/blob/main/editors/vscode/README.md#working-with-multiple-file-projects\" rel=\"noopener nofollow ugc\">here</a>.</p>",
      "raw": "[quote=\"tilhi, post:4, topic:2275\"]\nHi, I’m experiencing the same issue as Maxigaz, but I’m using VSCode, so the solution provided doesn’t work for me. Does anyone have any suggestions for resolving this in VSCode?\n[/quote]\n\nI don't use VSCode, but I did come across [this suggestion](https://github.com/Myriad-Dreamin/tinymist/issues/321#issuecomment-2485941136) while doing research.\n\nAnd just like Neovim, VSCode also has its own notes for tinymist [here](https://github.com/Myriad-Dreamin/tinymist/blob/main/editors/vscode/README.md#working-with-multiple-file-projects).",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 33,
      "score": 51.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 738
    }
  ],
  "scraped_at": "2025-06-10T09:53:14.354213"
}