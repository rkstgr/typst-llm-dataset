{
  "topic_metadata": {
    "id": 3047,
    "title": "How can I remove the numbering from some outline entries?",
    "slug": "how-can-i-remove-the-numbering-from-some-outline-entries",
    "posts_count": 10,
    "created_at": "2025-02-28T15:15:11.971Z",
    "last_posted_at": "2025-03-06T13:02:47.832Z",
    "views": 440,
    "like_count": 8,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 10,
    "accepted_answer_username": "ma77hiaz",
    "tags": [
      "outline",
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 831
  },
  "posts": [
    {
      "id": 9195,
      "post_number": 1,
      "username": "ma77hiaz",
      "name": "Matthias Hersche",
      "created_at": "2025-02-28T15:15:12.165Z",
      "updated_at": "2025-03-09T14:30:16.154Z",
      "cooked": "<p>I am writing a documentation and I have specific requirements regarding the numbering.</p>\n<p>In the beginning, I have headings, which must not have a number, therefore I created a tag <code>&lt;unnumbered&gt;</code> and this code:</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">  show heading.where(label: &lt;unnumbered&gt;): it =&gt; {\n    // Disable numbering for this heading\n    set heading(numbering: none)\n    block(\n      inset: (left: 0pt),\n      it.body,\n    )\n    // Decrease the heading counter after this unnumbered heading to prevent increment\n    counter(heading).update(n =&gt; n - 1)\n  }\n</code></pre>\n<p>I appended the label <code>&lt;unnumbered&gt;</code> to the heading “Abstract”, “Management Summary”, “Problem Statement” and “Part I - Technical Report”.</p>\n<p>Now my outline looks like this:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/f/f2fb1a0e763082ddc30660456701f43c0a1149df.png\" data-download-href=\"https://forum.typst.app/uploads/default/f2fb1a0e763082ddc30660456701f43c0a1149df\" title=\"Screenshot 2025-02-28 at 3.59.24 PM\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/f/f2fb1a0e763082ddc30660456701f43c0a1149df_2_690x283.png\" alt=\"Screenshot 2025-02-28 at 3.59.24 PM\" data-base62-sha1=\"yFvwUVnDpUqlKINCSuNSOoFjT6n\" width=\"690\" height=\"283\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/f/f2fb1a0e763082ddc30660456701f43c0a1149df_2_690x283.png, https://forum.typst.app/uploads/default/original/2X/f/f2fb1a0e763082ddc30660456701f43c0a1149df.png 1.5x, https://forum.typst.app/uploads/default/original/2X/f/f2fb1a0e763082ddc30660456701f43c0a1149df.png 2x\" data-dominant-color=\"F1F1F1\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-02-28 at 3.59.24 PM</span><span class=\"informations\">898×369 45 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>This is the way I want it, generally. The numbering starts on the chapter “Introduction”</p>\n<p>But:<br>\nI want to hide the numbers of all of the outline entries that have the label <code>&lt;unnumbered&gt;</code> because they also don’t show a number in the document.<br>\nHow do I do that?</p>\n<p>I thought I could do it with something like this, but it didn’t work:<br>\n<code>#show outline.entry.where(label: &lt;unnumbered&gt;): // some code to remove numbers in outline</code></p>",
      "raw": "I am writing a documentation and I have specific requirements regarding the numbering.\n\nIn the beginning, I have headings, which must not have a number, therefore I created a tag `<unnumbered>` and this code:\n\n```typc\n  show heading.where(label: <unnumbered>): it => {\n    // Disable numbering for this heading\n    set heading(numbering: none)\n    block(\n      inset: (left: 0pt),\n      it.body,\n    )\n    // Decrease the heading counter after this unnumbered heading to prevent increment\n    counter(heading).update(n => n - 1)\n  }\n```\nI appended the label `<unnumbered>` to the heading \"Abstract\", \"Management Summary\", \"Problem Statement\" and \"Part I - Technical Report\".\n\nNow my outline looks like this:\n![Screenshot 2025-02-28 at 3.59.24 PM|690x283](upload://yFvwUVnDpUqlKINCSuNSOoFjT6n.png)\n\nThis is the way I want it, generally. The numbering starts on the chapter \"Introduction\"\n\nBut:\nI want to hide the numbers of all of the outline entries that have the label `<unnumbered>` because they also don't show a number in the document.\nHow do I do that?\n\nI thought I could do it with something like this, but it didn't work:\n`#show outline.entry.where(label: <unnumbered>): // some code to remove numbers in outline`",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 49,
      "score": 1964.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1282
    },
    {
      "id": 9196,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-28T15:37:19.144Z",
      "updated_at": "2025-02-28T15:37:19.144Z",
      "cooked": "<p>you could do something like this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show outline.entry: it =&gt; {\n  let no-nums = query(label(\"unnumbered\"))\n  if it.element in no-nums {\n    // style this as you wish\n    return [#it.body() #box(width: 1fr, repeat(gap: 0.15em)[.]) #it.page() \\ ]\n  }\n  it\n}\n</code></pre>",
      "raw": "you could do something like this:\n\n```typst\n#show outline.entry: it => {\n  let no-nums = query(label(\"unnumbered\"))\n  if it.element in no-nums {\n    // style this as you wish\n    return [#it.body() #box(width: 1fr, repeat(gap: 0.15em)[.]) #it.page() \\ ]\n  }\n  it\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 43.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9197,
      "post_number": 3,
      "username": "ma77hiaz",
      "name": "Matthias Hersche",
      "created_at": "2025-02-28T15:45:52.243Z",
      "updated_at": "2025-03-09T14:30:25.803Z",
      "cooked": "<p>Wow, this was quick! Thank you so much, it worked <img src=\"https://forum.typst.app/images/emoji/apple/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Just because I’m curious: Do you know why an approach like this doesn’t work:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry.where(label: &lt;unnumbered&gt;):\n</code></pre>\n<p>It seems like it’s not even able to select the outline entries with that label…</p>",
      "raw": "Wow, this was quick! Thank you so much, it worked :smiley: \n\nJust because I'm curious: Do you know why an approach like this doesn't work:\n```typ\n#show outline.entry.where(label: <unnumbered>):\n```\n\nIt seems like it's not even able to select the outline entries with that label...",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 42,
      "score": 18.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1282
    },
    {
      "id": 9200,
      "post_number": 4,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-28T16:21:11.664Z",
      "updated_at": "2025-02-28T16:21:11.664Z",
      "cooked": "<p>No problem! The reason why <code>#show outline.entry.where(label: &lt;unnumbered&gt;): {...}</code> doesn’t work is because <code>where</code> <a href=\"https://typst.app/docs/reference/foundations/function/#definitions-where\">filters for elements belonging to this function whose fields have the values of the given arguments</a>. As a <code>label</code> is it’s own type (i.e., you can’t do <code>#heading(\"my heading\", label: &lt;unnumbered&gt;)</code>), the show rule would not apply to any elements</p>",
      "raw": "No problem! The reason why `#show outline.entry.where(label: <unnumbered>): {...}` doesn't work is because `where` [filters for elements belonging to this function whose fields have the values of the given arguments](https://typst.app/docs/reference/foundations/function/#definitions-where). As a `label` is it's own type (i.e., you can't do `#heading(\"my heading\", label: <unnumbered>)`), the show rule would not apply to any elements",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 28.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9201,
      "post_number": 5,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-28T16:34:49.751Z",
      "updated_at": "2025-02-28T16:43:51.844Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/ma77hiaz\">@ma77hiaz</a>, welcome to our forum! I have edited the title of your question to follow our <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">guidelines</a>.</p>\n<p>I guess the headings themselves should have no numbering, I mean not only in the outline but also in the main text? For this you can make the headings by writing</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#heading(numbering:none, level: 1)[My Heading]\n</code></pre>\n<p>or if you prefer to use the markup syntax (<code>=</code>) for making the heading: you can do it in a <code>#[...]</code> scope with different settings than other headings:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#[\n  #set heading(numbering: none)\n  = My Heading\n]\n</code></pre>",
      "raw": "Hi @ma77hiaz, welcome to our forum! I have edited the title of your question to follow our [guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11).\n\nI guess the headings themselves should have no numbering, I mean not only in the outline but also in the main text? For this you can make the headings by writing\n\n```typ\n#heading(numbering:none, level: 1)[My Heading]\n```\n\nor if you prefer to use the markup syntax (`=`) for making the heading: you can do it in a `#[...]` scope with different settings than other headings:\n\n```typ\n#[\n  #set heading(numbering: none)\n  = My Heading\n]\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 39,
      "score": 67.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9203,
      "post_number": 6,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-28T16:43:30.492Z",
      "updated_at": "2025-02-28T16:45:58.572Z",
      "cooked": "<p>I’d rather say the problem is that the label is a field of the <code>heading</code> element, not the <code>outline.entry</code> element. For example to automatically remove the numbering from headings that have the label <code>&lt;unnumbered&gt;</code> (and that received a numbering from another set rule) you can do</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(label: &lt;unnumbered&gt;): set heading(numbering: none)\n</code></pre>\n<p>and in your solution, you can simplify the code a bit by accessing this label field:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: it =&gt; {\n  if it.element.at(\"label\", default: none) == &lt;unnumbered&gt; {\n    // style this as you wish\n    return [#it.body() #box(width: 1fr, repeat(gap: 0.15em)[.]) #it.page() \\ ]\n  }\n  it\n}\n</code></pre>\n<p>Something that indeed doesn’t work is to try setting the <code>numbering</code> in a show-it rule:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(label: &lt;unnumbered&gt;): it =&gt; {\n  set heading(numbering: none)\n  it\n}\n</code></pre>\n<p>Here’s it’s too late to change it like that since the <code>it</code> element is already materialized.</p>",
      "raw": "I'd rather say the problem is that the label is a field of the `heading` element, not the `outline.entry` element. For example to automatically remove the numbering from headings that have the label `<unnumbered>` (and that received a numbering from another set rule) you can do\n\n```typ\n#show heading.where(label: <unnumbered>): set heading(numbering: none)\n```\n\nand in your solution, you can simplify the code a bit by accessing this label field:\n\n```typ\n#show outline.entry: it => {\n  if it.element.at(\"label\", default: none) == <unnumbered> {\n    // style this as you wish\n    return [#it.body() #box(width: 1fr, repeat(gap: 0.15em)[.]) #it.page() \\ ]\n  }\n  it\n}\n```\n\nSomething that indeed doesn't work is to try setting the `numbering` in a show-it rule:\n\n```typ\n#show heading.where(label: <unnumbered>): it => {\n  set heading(numbering: none)\n  it\n}\n```\n\nHere's it's too late to change it like that since the `it` element is already materialized.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 37,
      "score": 47.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9204,
      "post_number": 7,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-28T16:49:42.632Z",
      "updated_at": "2025-02-28T16:51:35.266Z",
      "cooked": "<p>And to add to <a class=\"mention\" href=\"/u/sijo\">@sijo</a>’s answer you can also just set a numbering after all the unnumbered parts of the document.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#outline()\n\n= Unnumbered Heading\n\n#set heading(numbering: \"1.1\")\n\n= Numbered Heading\n</code></pre>\n<p>IMO the solution with labels seem a bit overengineered/unnecessarily complicated.</p>",
      "raw": "And to add to @sijo's answer you can also just set a numbering after all the unnumbered parts of the document.\n\n```typ\n#outline()\n\n= Unnumbered Heading\n\n#set heading(numbering: \"1.1\")\n\n= Numbered Heading\n```\nIMO the solution with labels seem a bit overengineered/unnecessarily complicated.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 32,
      "score": 41.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9431,
      "post_number": 8,
      "username": "ma77hiaz",
      "name": "Matthias Hersche",
      "created_at": "2025-03-06T08:01:12.945Z",
      "updated_at": "2025-03-06T08:01:12.945Z",
      "cooked": "<p>Thank you guys for all the explanation and suggestions, really appreciate it!</p>\n<p><a class=\"mention\" href=\"/u/sijo\">@sijo</a> , that’s an elegant solution, thanks!</p>\n<p><a class=\"mention\" href=\"/u/flokl\">@flokl</a> , I actually do need to have it the complicated way, because throughout the document I do have outline entries that need to be unnumbered. It’s basically “Sections” of the document which can’t have a number.</p>",
      "raw": "Thank you guys for all the explanation and suggestions, really appreciate it!\n\n@sijo , that's an elegant solution, thanks!\n\n@flokl , I actually do need to have it the complicated way, because throughout the document I do have outline entries that need to be unnumbered. It's basically \"Sections\" of the document which can't have a number.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 10.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1282
    },
    {
      "id": 9432,
      "post_number": 9,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2025-03-06T08:25:53.253Z",
      "updated_at": "2025-03-06T08:25:53.253Z",
      "cooked": "<p>As a final addendum to this pretty spot on analysis: It would be better to wrap the entry’s contents in a block rather than using a linebreak. That’s how the outline itself does it and it (a) keeps block spacing rules working, (b) means the entry is correctly identified as not a paragraph.</p>\n<p>Also <code>it.inner()</code> can be used to get ready-made contents with the body, filler, and page.</p>\n<p>So the total thing would be <code>block(it.inner())</code>.</p>",
      "raw": "As a final addendum to this pretty spot on analysis: It would be better to wrap the entry's contents in a block rather than using a linebreak. That's how the outline itself does it and it (a) keeps block spacing rules working, (b) means the entry is correctly identified as not a paragraph.\n\nAlso `it.inner()` can be used to get ready-made contents with the body, filler, and page.\n\nSo the total thing would be `block(it.inner())`.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 28,
      "score": 20.6,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 9440,
      "post_number": 10,
      "username": "ma77hiaz",
      "name": "Matthias Hersche",
      "created_at": "2025-03-06T13:02:47.832Z",
      "updated_at": "2025-03-09T14:30:38.416Z",
      "cooked": "<p>Wow, I’m blown away by the activity and the quality of the answers in this forum!</p>\n<p>So to summarize everything, the correct solution will look like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: it =&gt; {\n  if it.element.at(\"label\", default: none) == &lt;unnumbered&gt; {\n    return block(it.inner())\n  }\n  it\n}\n</code></pre>",
      "raw": "Wow, I'm blown away by the activity and the quality of the answers in this forum!\n\nSo to summarize everything, the correct solution will look like this:\n```typ\n#show outline.entry: it => {\n  if it.element.at(\"label\", default: none) == <unnumbered> {\n    return block(it.inner())\n  }\n  it\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 27,
      "score": 90.4,
      "accepted_answer": true,
      "trust_level": 0,
      "user_id": 1282
    }
  ],
  "scraped_at": "2025-06-10T09:50:58.248926"
}