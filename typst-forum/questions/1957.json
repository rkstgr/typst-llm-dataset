{
  "topic_metadata": {
    "id": 1957,
    "title": "How to Automatically change Quote type based on Quote length?",
    "slug": "how-to-automatically-change-quote-type-based-on-quote-length",
    "posts_count": 7,
    "created_at": "2024-12-02T17:58:48.898Z",
    "last_posted_at": "2024-12-02T21:12:29.725Z",
    "views": 88,
    "like_count": 1,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 452
  },
  "posts": [
    {
      "id": 6254,
      "post_number": 1,
      "username": "Waldo",
      "name": "Waldo",
      "created_at": "2024-12-02T17:58:49.033Z",
      "updated_at": "2024-12-02T18:40:16.416Z",
      "cooked": "<p>In LaTeX, you can change the quote type (inline/block) based on the quote length (e.g. as defined by APA):</p>\n<p>\\usepackage[thresholdtype=words]{csquotes}<br>\n\\SetBlockThreshold{40}</p>\n<p>Is there a way to do that in Typst?</p>",
      "raw": "In LaTeX, you can change the quote type (inline/block) based on the quote length (e.g. as defined by APA):\n\n\\usepackage[thresholdtype=words]{csquotes}\n\\SetBlockThreshold{40}\n\nIs there a way to do that in Typst?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 101.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 880
    },
    {
      "id": 6256,
      "post_number": 2,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-12-02T18:39:49.555Z",
      "updated_at": "2024-12-02T18:39:49.555Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/waldo\">@Waldo</a>, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">How to post in the Questions category</a></p>\n<p>Make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>(By the way, the title was also a bit unclear to me so you may want to change it further.)</p>",
      "raw": "Hey @Waldo, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: [How to post in the Questions category](https://forum.typst.app/t/how-to-post-in-the-questions-category/11)\n\nMake sure your title is a question you’d ask to a friend about Typst. :wink:\n\n(By the way, the title was also a bit unclear to me so you may want to change it further.)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 11.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 6257,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-12-02T18:42:44.202Z",
      "updated_at": "2024-12-02T18:42:44.202Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Waldo\" data-post=\"1\" data-topic=\"1957\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/w/C2387F/48.png\" class=\"avatar\"> Waldo:</div>\n<blockquote>\n<p>In LaTeX, you can change the quote type (inline/block) based on the quote length (e.g. as defined by APA):</p>\n<p>\\usepackage[thresholdtype=words]{csquotes}<br>\n\\SetBlockThreshold{40}</p>\n</blockquote>\n</aside>\n<p>Can you elaborate on this / give an example? You can always use <code>#quote(block: true / false)[... stuff ...]</code> as needed, if you’re referring to block quotes.</p>",
      "raw": "[quote=\"Waldo, post:1, topic:1957\"]\nIn LaTeX, you can change the quote type (inline/block) based on the quote length (e.g. as defined by APA):\n\n\\usepackage[thresholdtype=words]{csquotes}\n\\SetBlockThreshold{40}\n[/quote]\n\nCan you elaborate on this / give an example? You can always use `#quote(block: true / false)[... stuff ...]` as needed, if you're referring to block quotes.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 34,
      "score": 11.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 6260,
      "post_number": 4,
      "username": "Waldo",
      "name": "Waldo",
      "created_at": "2024-12-02T18:56:55.465Z",
      "updated_at": "2024-12-02T18:56:55.465Z",
      "cooked": "<p>APA demands that if a Quote is longer than 40 Words, it’s displayed as a block. If it’s shorter than 40 Words, it should be inline.</p>\n<p>e.g.<br>\nHe said “my cat is cute” [source].<br>\nvs.<br>\nHe said<br>\n— Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. [source]</p>\n<p>I don’t want to manually count the words but automatically do inline/block based on wordcount.</p>",
      "raw": "APA demands that if a Quote is longer than 40 Words, it's displayed as a block. If it's shorter than 40 Words, it should be inline.\n\ne.g.\nHe said \"my cat is cute\" [source].\nvs.\nHe said\n--- Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. [source]\n\nI don't want to manually count the words but automatically do inline/block based on wordcount.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 11.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 880
    },
    {
      "id": 6261,
      "post_number": 5,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-12-02T19:09:44.303Z",
      "updated_at": "2024-12-02T21:11:54.480Z",
      "cooked": "<p>You can try this solution through the <code>wordometer</code> package. It probably won’t be perfect, but should work for most common cases:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/wordometer:0.1.4\": word-count, total-words\n\n#let dyn-quote(body, block-threshold: 40, attribution: none, ..args) = word-count(total =&gt; {\n  quote(body, block: total.words &gt; block-threshold, attribution: attribution, ..args)\n\n  // optional: remove this to remove inline attribution\n  if attribution != none and total.words &lt;= block-threshold {\n    if type(attribution) == label {\n      [#[ #ref(attribution)] &lt;inline-attrib&gt;]\n    } else {\n      [#[ (#attribution)] &lt;inline-attrib&gt;]\n    }\n  }\n}, exclude: &lt;inline-attrib&gt;)\n\n// Usage\n// Could also be 'apa-quote' with a threshold of 40\n#let small-quote = dyn-quote.with(block-threshold: 3)\n\nThey said #small-quote(attribution: [John Johnson])[Hello world!]\n\nThey also said #small-quote(attribution: [John Johnson], lorem(10))\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/5ced93a096673b4ab6c96632102c887470e815d2.png\" data-download-href=\"https://forum.typst.app/uploads/default/5ced93a096673b4ab6c96632102c887470e815d2\" title=\"output: long quotes in blocks\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/5ced93a096673b4ab6c96632102c887470e815d2_2_690x259.png\" alt=\"output: long quotes in blocks\" data-base62-sha1=\"dg4VQfubFaRte95jSs6xdbP1pke\" width=\"690\" height=\"259\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/5ced93a096673b4ab6c96632102c887470e815d2_2_690x259.png, https://forum.typst.app/uploads/default/optimized/2X/5/5ced93a096673b4ab6c96632102c887470e815d2_2_1035x388.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/5/5ced93a096673b4ab6c96632102c887470e815d2_2_1380x518.png 2x\" data-dominant-color=\"F7F7F7\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">output: long quotes in blocks</span><span class=\"informations\">1500×564 76.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "You can try this solution through the `wordometer` package. It probably won't be perfect, but should work for most common cases:\n\n```typ\n#import \"@preview/wordometer:0.1.4\": word-count, total-words\n\n#let dyn-quote(body, block-threshold: 40, attribution: none, ..args) = word-count(total => {\n  quote(body, block: total.words > block-threshold, attribution: attribution, ..args)\n\n  // optional: remove this to remove inline attribution\n  if attribution != none and total.words <= block-threshold {\n    if type(attribution) == label {\n      [#[ #ref(attribution)] <inline-attrib>]\n    } else {\n      [#[ (#attribution)] <inline-attrib>]\n    }\n  }\n}, exclude: <inline-attrib>)\n\n// Usage\n// Could also be 'apa-quote' with a threshold of 40\n#let small-quote = dyn-quote.with(block-threshold: 3)\n\nThey said #small-quote(attribution: [John Johnson])[Hello world!]\n\nThey also said #small-quote(attribution: [John Johnson], lorem(10))\n```\n![output: long quotes in blocks|690x259](upload://dg4VQfubFaRte95jSs6xdbP1pke.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 56.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 6263,
      "post_number": 6,
      "username": "Jollywatt",
      "name": "Joseph Wilson",
      "created_at": "2024-12-02T21:06:57.559Z",
      "updated_at": "2024-12-02T21:06:57.559Z",
      "cooked": "<p>Nice solution. In fact, the document show rule</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show: word-count\n</code></pre>\n<p>is unnecessary. It’s only needed to enable global word counts with the <code>total-words</code> state variable.</p>",
      "raw": "Nice solution. In fact, the document show rule \n```typ\n#show: word-count\n```\nis unnecessary. It's only needed to enable global word counts with the `total-words` state variable.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 11.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 713
    },
    {
      "id": 6265,
      "post_number": 7,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-12-02T21:12:29.725Z",
      "updated_at": "2024-12-02T21:12:29.725Z",
      "cooked": "<p>Ah, thank you! I’ve removed it from my answer.</p>",
      "raw": "Ah, thank you! I've removed it from my answer.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 6.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:54:10.121115"
}