{
  "topic_metadata": {
    "id": 3050,
    "title": "How can I set \"Keep with next\" for headings?",
    "slug": "how-can-i-set-keep-with-next-for-headings",
    "posts_count": 4,
    "created_at": "2025-02-28T17:02:10.236Z",
    "last_posted_at": "2025-02-28T20:57:28.168Z",
    "views": 130,
    "like_count": 6,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 454
  },
  "posts": [
    {
      "id": 9205,
      "post_number": 1,
      "username": "Mark_Hilton",
      "name": "Mark Hilton",
      "created_at": "2025-02-28T17:02:10.317Z",
      "updated_at": "2025-02-28T17:02:10.317Z",
      "cooked": "<p>Very new to Typst, but getting to grips with it. I do have a number of questions, but I’ll start with this.</p>\n<p>I have managed to set up my page the way I want and have 4 levels of headings. However, in a trial project (recipe book!) headings can get separated from the following paragraph by a page break.</p>\n<p>(As I’m new to the forum I can’t post a screenshot!)</p>\n<p>In word processor terms, I’d set all headings with “Keep with next” to avoid this. I have gone through all the documentation here on Typst, but can’t see an equivalent.</p>\n<p>Can someone please advise how it can be done, other than laboriously going through putting a page break before any heading where it happens?</p>\n<p>Thanks</p>",
      "raw": "Very new to Typst, but getting to grips with it. I do have a number of questions, but I'll start with this.\n\nI have managed to set up my page the way I want and have 4 levels of headings. However, in a trial project (recipe book!) headings can get separated from the following paragraph by a page break.\n\n(As I'm new to the forum I can't post a screenshot!)\n\nIn word processor terms, I'd set all headings with \"Keep with next\" to avoid this. I have gone through all the documentation here on Typst, but can't see an equivalent.\n\nCan someone please advise how it can be done, other than laboriously going through putting a page break before any heading where it happens?\n\nThanks",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 282.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1276
    },
    {
      "id": 9206,
      "post_number": 2,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-02-28T17:05:53.863Z",
      "updated_at": "2025-02-28T17:05:53.863Z",
      "cooked": "<p>Welcome to the forum <a class=\"mention\" href=\"/u/mark_hilton\">@Mark_Hilton</a>!</p>\n<p>What you request is the default behavior for headings. If you’re observing this behavior, it’s possible you used a faulty heading show rule which replaced the heading with its body (for example), perhaps in an attempt to customize the spacing from the heading number or some other reason. Make sure to wrap the heading show rule’s output in <code>block(sticky: true)[...]</code> to retain the orphan prevention behavior.</p>\n<p>If that doesn’t solve it, you could also be facing a bug, but let us know if that fixes it.</p>",
      "raw": "Welcome to the forum @Mark_Hilton!\n\nWhat you request is the default behavior for headings. If you're observing this behavior, it's possible you used a faulty heading show rule which replaced the heading with its body (for example), perhaps in an attempt to customize the spacing from the heading number or some other reason. Make sure to wrap the heading show rule's output in `block(sticky: true)[...]` to retain the orphan prevention behavior.\n\nIf that doesn't solve it, you could also be facing a bug, but let us know if that fixes it.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 36,
      "score": 42.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 9209,
      "post_number": 3,
      "username": "Mark_Hilton",
      "name": "Mark Hilton",
      "created_at": "2025-02-28T17:34:28.410Z",
      "updated_at": "2025-02-28T17:34:28.410Z",
      "cooked": "<p>Thank you so much. I’m not sure where the <code>block(sticky: true)</code> goes in the show rules for headings. You are right that I was customising the font sizes and it took me a long time to get it to work at all. What I had was:</p>\n<pre><code class=\"lang-auto\">#show heading.where(\n  level: 3\n): it =&gt;[\n  #set align(left)\n  #set text(16pt, weight: \"semibold\")\n  #(it.body)]\n</code></pre>\n<p>Changing it to:</p>\n<pre><code class=\"lang-auto\">#show heading.where(\n  level: 3\n): it =&gt;[\n  #set align(left)\n  #set text(16pt, weight: \"semibold\")\n  #block(it.body)]\n</code></pre>\n<p>seems to work to apply “Keep with next”, but I presume I have the <code>[</code> in the wrong place to add the <code>(sticky: true)</code>, even though I copied it from the “Advanced Styling” section of the tutorial.</p>",
      "raw": "Thank you so much. I'm not sure where the `block(sticky: true)` goes in the show rules for headings. You are right that I was customising the font sizes and it took me a long time to get it to work at all. What I had was:\n\n```\n#show heading.where(\n  level: 3\n): it =>[\n  #set align(left)\n  #set text(16pt, weight: \"semibold\")\n  #(it.body)]\n```\n\nChanging it to:\n\n```\n#show heading.where(\n  level: 3\n): it =>[\n  #set align(left)\n  #set text(16pt, weight: \"semibold\")\n  #block(it.body)]\n```\n\nseems to work to apply \"Keep with next\", but I presume I have the `[` in the wrong place to add the `(sticky: true)`, even though I copied it from the \"Advanced Styling\" section of the tutorial.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 37,
      "score": 32.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 1276
    },
    {
      "id": 9227,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-02-28T20:57:28.168Z",
      "updated_at": "2025-02-28T20:57:52.410Z",
      "cooked": "<p>It’s true that simply adding a block will do it since headings have a set rule to set any blocks within them as sticky. But for future reference, you can just write <code>#block(sticky: true, it.body)</code> instead of just <code>#block(it.body)</code>, i.e. sticky is just a named parameter, whereas the body is a positional parameter.</p>\n<p>However, if all you want is to customize font sizes, I’d recommend writing the following instead of that show rule:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 3): set text(16pt, weight: \"semibold\")\n</code></pre>\n<p>(Addendum: You can write ```typ ``` to highlight your code as Typst syntax.)</p>\n<p>Glad you could solve it!</p>",
      "raw": "It's true that simply adding a block will do it since headings have a set rule to set any blocks within them as sticky. But for future reference, you can just write `#block(sticky: true, it.body)` instead of just `#block(it.body)`, i.e. sticky is just a named parameter, whereas the body is a positional parameter.\n\nHowever, if all you want is to customize font sizes, I'd recommend writing the following instead of that show rule:\n\n```typ\n#show heading.where(level: 3): set text(16pt, weight: \"semibold\")\n```\n\n(Addendum: You can write \\`\\`\\`typ \\`\\`\\` to highlight your code as Typst syntax.)\n\nGlad you could solve it!",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 33,
      "score": 91.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:50:57.512681"
}