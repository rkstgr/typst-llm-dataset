{
  "topic_metadata": {
    "id": 869,
    "title": "How can I use a Base64 encoded image string?",
    "slug": "how-can-i-use-a-base64-encoded-image-string",
    "posts_count": 8,
    "created_at": "2024-10-02T12:09:47.670Z",
    "last_posted_at": "2025-03-23T18:41:36.956Z",
    "views": 454,
    "like_count": 3,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 8,
    "accepted_answer_username": "Andrew",
    "tags": [
      "graphics"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 611
  },
  "posts": [
    {
      "id": 3203,
      "post_number": 1,
      "username": "ShaiQ",
      "name": "ShaiQ",
      "created_at": "2024-10-02T12:09:47.832Z",
      "updated_at": "2024-10-02T19:21:06.981Z",
      "cooked": "<p>I would like to embed an image that I have as a <strong>Base64</strong> encoded string directly into my Typst document. Normally, I can embed an image using the following syntax, but it only allows specific format only not string.</p>\n<pre><code class=\"lang-auto\">image(\"path/to/image.png\", width: 100%)\n</code></pre>",
      "raw": "I would like to embed an image that I have as a **Base64** encoded string directly into my Typst document. Normally, I can embed an image using the following syntax, but it only allows specific format only not string.\n\n```\nimage(\"path/to/image.png\", width: 100%)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 61,
      "score": 1832.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 468
    },
    {
      "id": 3205,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T12:14:01.375Z",
      "updated_at": "2024-10-02T12:14:01.375Z",
      "cooked": "<p>Can you clarify: you have a Base64 encoded image (of a format that is <em>currently supported</em> by Typst), and you want to insert it in a Typst document as a regular image, correct?</p>",
      "raw": "Can you clarify: you have a Base64 encoded image (of a format that is *currently supported* by Typst), and you want to insert it in a Typst document as a regular image, correct?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 60,
      "score": 107.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3206,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T12:26:53.157Z",
      "updated_at": "2024-10-02T17:10:08.581Z",
      "cooked": "<p>In case <a href=\"https://forum.typst.app/t/how-can-i-use-a-base64-encoded-image-string/869/2\">this is correct</a>, by using <a href=\"https://typst.app/universe/package/based\">based</a> package (love the name) you can easily achieve this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/based:0.1.0\": base64\n#set page(width: auto, height: auto, margin: 0pt)\n\n// `base64 -w 0 smile.png` (10x10):\n#let base64-encoded-image = \"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAC4jAAAuIwF4pT92AAAASUlEQVQYGa3OWwoAIAgEQNf739k0EjVCfxKCHtMqiEh0jcWjOKBAkQjPe7MFdun/IbRdDNb05nvolzWzEx0DdozK96W1PzjNHxcgphkBs9CoHwAAAABJRU5ErkJggg==\"\n#let raw-image = base64.decode(base64-encoded-image)\n\n#image.decode(raw-image, format: \"png\")\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/0ff442973006e419494d4964c825127524fd3ee6.png\" alt=\"image\" data-base62-sha1=\"2h8ubPBk7CG3NENEEYpTfOyTopg\" width=\"79\" height=\"65\"></p>\n<p><a href=\"https://typst.app/docs/reference/visualize/image/#definitions-decode\"><code>image.decode</code></a></p>",
      "raw": "In case [this is correct](https://forum.typst.app/t/how-can-i-use-a-base64-encoded-image-string/869/2), by using [based](https://typst.app/universe/package/based) package (love the name) you can easily achieve this:\n\n```typ\n#import \"@preview/based:0.1.0\": base64\n#set page(width: auto, height: auto, margin: 0pt)\n\n// `base64 -w 0 smile.png` (10x10):\n#let base64-encoded-image = \"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAC4jAAAuIwF4pT92AAAASUlEQVQYGa3OWwoAIAgEQNf739k0EjVCfxKCHtMqiEh0jcWjOKBAkQjPe7MFdun/IbRdDNb05nvolzWzEx0DdozK96W1PzjNHxcgphkBs9CoHwAAAABJRU5ErkJggg==\"\n#let raw-image = base64.decode(base64-encoded-image)\n\n#image.decode(raw-image, format: \"png\")\n```\n\n![image|79x65](upload://2h8ubPBk7CG3NENEEYpTfOyTopg.png)\n\n[`image.decode`](https://typst.app/docs/reference/visualize/image/#definitions-decode)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 60,
      "score": 67.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3235,
      "post_number": 4,
      "username": "ShaiQ",
      "name": "ShaiQ",
      "created_at": "2024-10-02T16:02:28.942Z",
      "updated_at": "2024-10-02T16:02:48.668Z",
      "cooked": "<p>Yes, indeed. I have a Base64 encoded image that I want to include in a Typst document as a standard image.<br>\nThis code snippet successfully solves the issue<br>\nThanks!</p>",
      "raw": "Yes, indeed. I have a Base64 encoded image that I want to include in a Typst document as a standard image. \nThis code snippet successfully solves the issue\nThanks!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 56,
      "score": 41.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 468
    },
    {
      "id": 9747,
      "post_number": 5,
      "username": "Said",
      "name": "Said",
      "created_at": "2025-03-13T09:10:59.791Z",
      "updated_at": "2025-03-19T16:49:40.863Z",
      "cooked": "<p>You shouldn’t use based if you have a document with a lot of pictures. I am testing with a document with 35 pictures in base64 format. Using based it takes 60 seconds to generate the pdf and just using</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">image.decode(\"&lt;svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"&gt;&lt;image xlink:href=\\\"data:image/jpg;base64,\" + foto.Foto + \"\\\" /&gt;&lt;/svg&gt;\")\n</code></pre>\n<p>it takes less than 1 second. I provided the base64 string through the variable <code>foto.Foto</code> because it’s part of a for each loop.</p>",
      "raw": "You shouldn't use based if you have a document with a lot of pictures. I am testing with a document with 35 pictures in base64 format. Using based it takes 60 seconds to generate the pdf and just using \n```typc\nimage.decode(\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"><image xlink:href=\\\"data:image/jpg;base64,\" + foto.Foto + \"\\\" /></svg>\")\n```\nit takes less than 1 second. I provided the base64 string through the variable `foto.Foto` because it's part of a for each loop.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 39,
      "score": 42.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1346
    },
    {
      "id": 10132,
      "post_number": 6,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-03-23T16:42:34.362Z",
      "updated_at": "2025-03-23T16:42:34.362Z",
      "cooked": "<p>Did you use version 0.2.0 of based when it took 60 seconds? I know that 0.1.0 was incredibly slow, but I switched to a wasm plugin for 0.2.0, which improved performance by a lot.</p>",
      "raw": "Did you use version 0.2.0 of based when it took 60 seconds? I know that 0.1.0 was incredibly slow, but I switched to a wasm plugin for 0.2.0, which improved performance by a lot.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 26.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 10134,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-23T18:35:03.828Z",
      "updated_at": "2025-03-23T18:35:03.828Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Said\" data-post=\"5\" data-topic=\"869\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/s/220F66/48.png\" class=\"avatar\"> Said:</div>\n<blockquote>\n<p>You shouldn’t use based if you have a document with a lot of pictures.</p>\n</blockquote>\n</aside>\n<p>You shouldn’t embed (big/many) images into a Typst document by encoding it in a different format. That is clearly not how it is meant to be used, and obviously any data manipulation such as decoding Base64 to bytes will take some CPU cycles to finish. The SVG hack sounds interesting, though it might have some downsides, but I’m not an SVG nerd.</p>\n<aside class=\"quote no-group\" data-username=\"Eric\" data-post=\"6\" data-topic=\"869\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/eric/48/87_2.png\" class=\"avatar\"> Eric:</div>\n<blockquote>\n<p>I switched to a wasm plugin for 0.2.0, which improved performance by a lot.</p>\n</blockquote>\n</aside>\n<p>Hold on, I thought that WASM code should be always slower than the native Typst code. What’s the catch?</p>",
      "raw": "[quote=\"Said, post:5, topic:869\"]\nYou shouldn’t use based if you have a document with a lot of pictures.\n[/quote]\n\nYou shouldn't embed (big/many) images into a Typst document by encoding it in a different format. That is clearly not how it is meant to be used, and obviously any data manipulation such as decoding Base64 to bytes will take some CPU cycles to finish. The SVG hack sounds interesting, though it might have some downsides, but I'm not an SVG nerd.\n\n[quote=\"Eric, post:6, topic:869\"]\nI switched to a wasm plugin for 0.2.0, which improved performance by a lot.\n[/quote]\n\nHold on, I thought that WASM code should be always slower than the native Typst code. What's the catch?",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 2,
      "like_count": 0,
      "reads": 30,
      "score": 16.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10135,
      "post_number": 8,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-03-23T18:41:36.956Z",
      "updated_at": "2025-03-30T12:38:01.632Z",
      "cooked": "<p>Wow, I can no longer edit my own message… Anyway, I wanted to make an update.</p>\n<p>First is, of course, update the <code>based</code> package version, but the second point is that now <a href=\"https://typst.app/docs/reference/visualize/image/#definitions-decode\"><code>image.decode</code></a> is deprecated, and you should pass <code>bytes</code> directly, i.e.:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#image(base64.decode(base64-encoded-image))\n</code></pre>\n<p>I’ve also noticed that you don’t have to specify the format anymore, I assume it will auto-detect any format correctly, just like it does when you provide a path to the image.</p>\n<details><summary>Complete solution</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/based:0.2.0\": base64\n#set page(width: auto, height: auto, margin: 0pt)\n\n// `base64 -w 0 smile.png` (10x10):\n#let base64-encoded-image = \"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAC4jAAAuIwF4pT92AAAASUlEQVQYGa3OWwoAIAgEQNf739k0EjVCfxKCHtMqiEh0jcWjOKBAkQjPe7MFdun/IbRdDNb05nvolzWzEx0DdozK96W1PzjNHxcgphkBs9CoHwAAAABJRU5ErkJggg==\"\n#let raw-image = base64.decode(base64-encoded-image)\n\n#image(raw-image)\n</code></pre>\n</details>",
      "raw": "Wow, I can no longer edit my own message... Anyway, I wanted to make an update.\n\nFirst is, of course, update the `based` package version, but the second point is that now [`image.decode`](https://typst.app/docs/reference/visualize/image/#definitions-decode) is deprecated, and you should pass `bytes` directly, i.e.:\n\n```typ\n#image(base64.decode(base64-encoded-image))\n```\n\nI've also noticed that you don't have to specify the format anymore, I assume it will auto-detect any format correctly, just like it does when you provide a path to the image.\n\n<details><summary>Complete solution</summary>\n\n```typ\n#import \"@preview/based:0.2.0\": base64\n#set page(width: auto, height: auto, margin: 0pt)\n\n// `base64 -w 0 smile.png` (10x10):\n#let base64-encoded-image = \"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAC4jAAAuIwF4pT92AAAASUlEQVQYGa3OWwoAIAgEQNf739k0EjVCfxKCHtMqiEh0jcWjOKBAkQjPe7MFdun/IbRdDNb05nvolzWzEx0DdozK96W1PzjNHxcgphkBs9CoHwAAAABJRU5ErkJggg==\"\n#let raw-image = base64.decode(base64-encoded-image)\n\n#image(raw-image)\n```\n\n</details>",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 20.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:34.253694"
}