{
  "topic_metadata": {
    "id": 1501,
    "title": "How to cite with a page number in GB/T 7714—2015 style?",
    "slug": "how-to-cite-with-a-page-number-in-gb-t-7714-2015-style",
    "posts_count": 4,
    "created_at": "2024-11-02T15:24:55.208Z",
    "last_posted_at": "2024-11-02T18:41:24.280Z",
    "views": 415,
    "like_count": 3,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Y.D.X",
    "tags": [
      "citation",
      "bibtex",
      "hayagriva"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 828
  },
  "posts": [
    {
      "id": 5044,
      "post_number": 1,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2024-11-02T15:24:55.352Z",
      "updated_at": "2024-11-02T15:28:25.663Z",
      "cooked": "<p>I want to cite with the page number <code>326–329</code>, but it is not shown in <code>gb-7714-2015-numeric</code> style.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">// #set page(height: auto, width: auto, margin: 10pt)\n// #set text(font: \"Noto Serif CJK SC\", lang: \"zh\", region: \"CN\")\n\n极大的打击@example[326–329]。\n\n#bibliography(\"ref.bib\", style: \"gb-7714-2015-numeric\")\n</code></pre>\n<details>\n<summary>\nref.bib</summary>\n<pre data-code-wrap=\"bib\"><code class=\"lang-bib\">@article{example,\n  title = {Title},\n  author = {Author},\n  date = {2024-11-02},\n}\n</code></pre>\n</details>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/f/f496fba44b0c2a7e2378c88ef10df6a984217011.png\" alt=\"Output\" data-base62-sha1=\"yTJYU35zGvdbX3HbKhZrWqaZbih\" width=\"328\" height=\"158\"></p>\n<ul>\n<li>Output of typst v0.12: <code>[1]</code>.</li>\n<li>Desired:  <code>[1]326–329</code>.</li>\n</ul>\n<p>How to show the page number?<br>\nIf I should modify the CSL, then where can I download the original version? I find nothing in the repos of hayagriva or typst.</p>\n<p>Thanks in advance.</p>\n<details>\n<summary>\nExamples in GB/T 7714—2015 (Chinese)</summary>\n<p><a href=\"https://lib.tsinghua.edu.cn/wj/GBT7714-2015.pdf\" rel=\"noopener nofollow ugc\">GB/T 7714—2015 Information and documentation—Rules for bibliographic references and citations to information resources</a> (Chinese)</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/6/6b1061be7b95d4d89ac3e3e70ff2c14d9da0b80d.png\" data-download-href=\"https://forum.typst.app/uploads/default/6b1061be7b95d4d89ac3e3e70ff2c14d9da0b80d\" title=\"§10.1.3\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/6/6b1061be7b95d4d89ac3e3e70ff2c14d9da0b80d_2_690x386.png\" alt=\"§10.1.3\" data-base62-sha1=\"fh8bBDoWIwKCG7jYuW1iKE81pI9\" width=\"690\" height=\"386\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/6/6b1061be7b95d4d89ac3e3e70ff2c14d9da0b80d_2_690x386.png, https://forum.typst.app/uploads/default/optimized/2X/6/6b1061be7b95d4d89ac3e3e70ff2c14d9da0b80d_2_1035x579.png 1.5x, https://forum.typst.app/uploads/default/original/2X/6/6b1061be7b95d4d89ac3e3e70ff2c14d9da0b80d.png 2x\" data-dominant-color=\"EEEEEB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">§10.1.3</span><span class=\"informations\">1324×741 354 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>",
      "raw": "I want to cite with the page number `326–329`, but it is not shown in `gb-7714-2015-numeric` style.\n\n```typst\n// #set page(height: auto, width: auto, margin: 10pt)\n// #set text(font: \"Noto Serif CJK SC\", lang: \"zh\", region: \"CN\")\n\n极大的打击@example[326–329]。\n\n#bibliography(\"ref.bib\", style: \"gb-7714-2015-numeric\")\n```\n\n[details=\"ref.bib\"]\n```bib\n@article{example,\n  title = {Title},\n  author = {Author},\n  date = {2024-11-02},\n}\n```\n[/details]\n\n![Output|328x158](upload://yTJYU35zGvdbX3HbKhZrWqaZbih.png)\n\n- Output of typst v0.12: `[1]`.\n- Desired:  `[1]326–329`.\n\nHow to show the page number?\nIf I should modify the CSL, then where can I download the original version? I find nothing in the repos of hayagriva or typst.\n\nThanks in advance.\n\n[details=\"Examples in GB/T 7714—2015 (Chinese)\"]\n[GB/T 7714—2015 Information and documentation—Rules for bibliographic references and citations to information resources](https://lib.tsinghua.edu.cn/wj/GBT7714-2015.pdf) (Chinese)\n\n![§10.1.3|690x386](upload://fh8bBDoWIwKCG7jYuW1iKE81pI9.png)\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 2053.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 292
    },
    {
      "id": 5050,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2024-11-02T17:08:02.366Z",
      "updated_at": "2024-11-02T17:08:41.877Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/y.d.x\">@Y.D.X</a> ,</p>\n<p>as you already suspected you have to modify the CSL file. Typst uses the files from the <a href=\"https://github.com/citation-style-language/styles\" rel=\"noopener nofollow ugc\">official CSL repository</a>, in your case that would then be <a href=\"https://github.com/citation-style-language/styles/blob/master/china-national-standard-gb-t-7714-2015-numeric.csl\" rel=\"noopener nofollow ugc\">china-national-standard-gb-t-7714-2015-numeric.csl</a>.</p>\n<p>At the bottom of the file you have to replace the following:</p>\n<details>\n<summary>\nReplace</summary>\n<p>Replace this:</p>\n<pre><code class=\"lang-auto\">&lt;citation collapse=\"citation-number\" after-collapse-delimiter=\",\"&gt;\n    &lt;sort&gt;\n      &lt;key variable=\"citation-number\"/&gt;\n    &lt;/sort&gt;\n    &lt;layout vertical-align=\"sup\" delimiter=\",\" prefix=\"[\" suffix=\"]\"&gt;\n      &lt;text variable=\"citation-number\"/&gt;\n    &lt;/layout&gt;\n  &lt;/citation&gt;\n</code></pre>\n<p>with:</p>\n<pre><code class=\"lang-auto\"> &lt;citation collapse=\"citation-number\" after-collapse-delimiter=\",\"&gt;\n    &lt;sort&gt;\n      &lt;key variable=\"citation-number\"/&gt;\n    &lt;/sort&gt;\n    &lt;layout vertical-align=\"sup\" delimiter=\",\"&gt;\n      &lt;text variable=\"citation-number\" prefix=\"[\" suffix=\"]\"/&gt;\n      &lt;text variable=\"locator\"/&gt;\n    &lt;/layout&gt;\n  &lt;/citation&gt;\n</code></pre>\n</details>\n<p>P.S. thanks for including this working minimal example, made it a lot easier</p>",
      "raw": "Hi @Y.D.X ,\n\nas you already suspected you have to modify the CSL file. Typst uses the files from the [official CSL repository](https://github.com/citation-style-language/styles), in your case that would then be [china-national-standard-gb-t-7714-2015-numeric.csl](https://github.com/citation-style-language/styles/blob/master/china-national-standard-gb-t-7714-2015-numeric.csl).\n\nAt the bottom of the file you have to replace the following:\n\n[details=\"Replace\"]\nReplace this:\n```\n<citation collapse=\"citation-number\" after-collapse-delimiter=\",\">\n    <sort>\n      <key variable=\"citation-number\"/>\n    </sort>\n    <layout vertical-align=\"sup\" delimiter=\",\" prefix=\"[\" suffix=\"]\">\n      <text variable=\"citation-number\"/>\n    </layout>\n  </citation>\n```\nwith:\n```\n <citation collapse=\"citation-number\" after-collapse-delimiter=\",\">\n    <sort>\n      <key variable=\"citation-number\"/>\n    </sort>\n    <layout vertical-align=\"sup\" delimiter=\",\">\n      <text variable=\"citation-number\" prefix=\"[\" suffix=\"]\"/>\n      <text variable=\"locator\"/>\n    </layout>\n  </citation>\n```\n[/details]\n\n\nP.S. thanks for including this working minimal example, made it a lot easier",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 40,
      "score": 33.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 5051,
      "post_number": 3,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-11-02T17:09:12.757Z",
      "updated_at": "2024-11-02T17:09:12.757Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/flokl\">@flokl</a> was a bit faster in typing, but I’m going to reply now nonetheless <img src=\"https://forum.typst.app/images/emoji/apple/smile.png?v=12\" title=\":smile:\" class=\"emoji\" alt=\":smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<hr>\n<p>You would indeed need to modify the CSL file, the original version can be found on the <a href=\"https://github.com/citation-style-language/styles/blob/master/china-national-standard-gb-t-7714-2015-numeric.csl\" rel=\"noopener nofollow ugc\">CSL GitHub repository</a>. However, you need to decide how you want it to look for multiple consecutive citations, as currently they are grouped within a single pair of brackets. This may look weird when used together with page numbers and is probably the reason why they aren’t included by default.</p>\n<p>Anyway, if you still want to continue, open the downloaded CSL file and look for the <code>&lt;citation&gt;</code> part, which will currently look like this:</p>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">&lt;citation collapse=\"citation-number\" after-collapse-delimiter=\",\"&gt;\n  &lt;sort&gt;\n    &lt;key variable=\"citation-number\"/&gt;\n  &lt;/sort&gt;\n  &lt;layout vertical-align=\"sup\" delimiter=\",\" prefix=\"[\" suffix=\"]\"&gt;\n    &lt;text variable=\"citation-number\"/&gt;\n  &lt;/layout&gt;\n&lt;/citation&gt;\n</code></pre>\n<p>The layout only contains the citation number, but nothing about the pages. You can put the page numbers in by replacing the text in the layout with the group</p>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">&lt;group delimiter=\",\"&gt;\n  &lt;text variable=\"citation-number\"/&gt;\n  &lt;text variable=\"locator\"/&gt;\n&lt;/group&gt;\n</code></pre>\n<p>This may look weird now, as only the numbers are using the typographic superscripts, so you probably want to disable them entirely with</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set super(typographic: false)\n</code></pre>\n<p>To now disable the citation grouping, go back into the CSL file and move the prefix and suffix properties from the citation layout into the group, so that you end up with</p>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">&lt;layout vertical-align=\"sup\" delimiter=\",\"&gt;\n  &lt;group delimiter=\",\" prefix=\"[\" suffix=\"]\"&gt;\n    &lt;text variable=\"citation-number\"/&gt;\n    &lt;text variable=\"locator\"/&gt;\n  &lt;/group&gt;\n&lt;/layout&gt;\n</code></pre>\n<p>You can now play around with the delimiters (maybe add spaces, or use semicolons instead of commas) until it looks good to you.</p>",
      "raw": "@flokl was a bit faster in typing, but I'm going to reply now nonetheless :smile: \n\n---\n\nYou would indeed need to modify the CSL file, the original version can be found on the [CSL GitHub repository](https://github.com/citation-style-language/styles/blob/master/china-national-standard-gb-t-7714-2015-numeric.csl). However, you need to decide how you want it to look for multiple consecutive citations, as currently they are grouped within a single pair of brackets. This may look weird when used together with page numbers and is probably the reason why they aren't included by default.\n\nAnyway, if you still want to continue, open the downloaded CSL file and look for the `<citation>` part, which will currently look like this:\n```xml\n<citation collapse=\"citation-number\" after-collapse-delimiter=\",\">\n  <sort>\n    <key variable=\"citation-number\"/>\n  </sort>\n  <layout vertical-align=\"sup\" delimiter=\",\" prefix=\"[\" suffix=\"]\">\n    <text variable=\"citation-number\"/>\n  </layout>\n</citation>\n```\nThe layout only contains the citation number, but nothing about the pages. You can put the page numbers in by replacing the text in the layout with the group\n```xml\n<group delimiter=\",\">\n  <text variable=\"citation-number\"/>\n  <text variable=\"locator\"/>\n</group>\n```\nThis may look weird now, as only the numbers are using the typographic superscripts, so you probably want to disable them entirely with\n```typ\n#set super(typographic: false)\n```\n\nTo now disable the citation grouping, go back into the CSL file and move the prefix and suffix properties from the citation layout into the group, so that you end up with\n```xml\n<layout vertical-align=\"sup\" delimiter=\",\">\n  <group delimiter=\",\" prefix=\"[\" suffix=\"]\">\n    <text variable=\"citation-number\"/>\n    <text variable=\"locator\"/>\n  </group>\n</layout>\n```\nYou can now play around with the delimiters (maybe add spaces, or use semicolons instead of commas) until it looks good to you.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 38,
      "score": 47.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 5053,
      "post_number": 4,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2024-11-02T18:41:24.280Z",
      "updated_at": "2024-11-02T19:07:13.656Z",
      "cooked": "<p>Thanks, both of your replies are helpful! I <s>marked flokl’s as the solution</s>, because Eric’s code generates <code>[1,326–329</code>], which is not exactly desired. (IEEE ≠ GB)</p>\n<p>Additionally, Eric mentioned two important points.</p>\n<ol>\n<li>\n<p><code>#set super(typographic: false)</code> to match the font variants of the citation number and the locator (i.e. page number).</p>\n</li>\n<li>\n<p>Citing consecutively is problematic. I guess the standard prefers <code>A[1]326, BC[2-3]</code> for <code>A@a[326], BC@b@c</code>. I don’t think it’s possible in CSL…</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/4/4bfa4c1ae0dd67f41c32b2ea35dcfc14065f8a06.png\" alt=\"A[1]326, BC[2-3]\" data-base62-sha1=\"aQ84k5USaBzALkt1AWjZCWxx64K\" width=\"243\" height=\"58\"></p>\n</li>\n</ol>\n<p>Therefore, a single CSL might never solve all problems. I end up with the following.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show cite.where(style: auto): it =&gt; {\n  if it.supplement != none {\n    let (key, ..args) = it.fields()\n    cite(it.key, ..args, style: \"a-dedicated-minimal.csl\")\n  } else {\n    it\n  }\n}\n</code></pre>\n<pre data-code-wrap=\"xml\"><code class=\"lang-xml\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;style xmlns=\"http://purl.org/net/xbiblio/csl\" version=\"1.0\" class=\"in-text\"&gt;\n  &lt;info&gt;\n    &lt;title&gt;A dedicated minimal style&lt;/title&gt;\n    &lt;id&gt;https://forum.typst.app/t/how-to-cite-with-a-page-number-in-gb-t-7714-2015-style/1501/4&lt;/id&gt;\n  &lt;/info&gt;\n  &lt;citation collapse=\"citation-number\" after-collapse-delimiter=\",\"&gt;\n    &lt;sort&gt;\n      &lt;key variable=\"citation-number\" /&gt;\n    &lt;/sort&gt;\n    &lt;layout vertical-align=\"sup\" delimiter=\",\"&gt;\n      &lt;text variable=\"citation-number\" prefix=\"[\" suffix=\"]\" /&gt;\n      &lt;text variable=\"locator\" /&gt;\n    &lt;/layout&gt;\n  &lt;/citation&gt;\n&lt;/style&gt;\n</code></pre>",
      "raw": "Thanks, both of your replies are helpful! I ~~marked flokl's as the solution~~, because Eric's code generates `[1,326–329`], which is not exactly desired. (IEEE ≠ GB)\n\nAdditionally, Eric mentioned two important points.\n\n1. `#set super(typographic: false)` to match the font variants of the citation number and the locator (i.e. page number).\n\n2. Citing consecutively is problematic. I guess the standard prefers `A[1]326, BC[2-3]` for `A@a[326], BC@b@c`. I don't think it's possible in CSL…\n\n   ![A[1]326, BC[2-3]|487x116, 50%](upload://aQ84k5USaBzALkt1AWjZCWxx64K.png)\n\n\nTherefore, a single CSL might never solve all problems. I end up with the following.\n\n```typst\n#show cite.where(style: auto): it => {\n  if it.supplement != none {\n    let (key, ..args) = it.fields()\n    cite(it.key, ..args, style: \"a-dedicated-minimal.csl\")\n  } else {\n    it\n  }\n}\n```\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<style xmlns=\"http://purl.org/net/xbiblio/csl\" version=\"1.0\" class=\"in-text\">\n  <info>\n    <title>A dedicated minimal style</title>\n    <id>https://forum.typst.app/t/how-to-cite-with-a-page-number-in-gb-t-7714-2015-style/1501/4</id>\n  </info>\n  <citation collapse=\"citation-number\" after-collapse-delimiter=\",\">\n    <sort>\n      <key variable=\"citation-number\" />\n    </sort>\n    <layout vertical-align=\"sup\" delimiter=\",\">\n      <text variable=\"citation-number\" prefix=\"[\" suffix=\"]\" />\n      <text variable=\"locator\" />\n    </layout>\n  </citation>\n</style>\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 31.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 292
    }
  ],
  "scraped_at": "2025-06-10T09:55:37.562321"
}