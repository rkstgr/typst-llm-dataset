{
  "topic_metadata": {
    "id": 4022,
    "title": "How to use custom symbols as marks on fletcher arrows?",
    "slug": "how-to-use-custom-symbols-as-marks-on-fletcher-arrows",
    "posts_count": 7,
    "created_at": "2025-05-11T04:13:10.702Z",
    "last_posted_at": "2025-05-11T13:36:45.439Z",
    "views": 54,
    "like_count": 8,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Jollywatt",
    "tags": [
      "cetz",
      "figures",
      "fletcher"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 532
  },
  "posts": [
    {
      "id": 12243,
      "post_number": 1,
      "username": "MJ.0",
      "name": "MJ",
      "created_at": "2025-05-11T04:13:10.812Z",
      "updated_at": "2025-05-11T04:13:10.812Z",
      "cooked": "<p>The goal is to draw simple diagrams to visualize different kinds of intervals on the number line, is it possible to define simple custom marks for fletcher arrows like shown below?:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#diagram($ a edge(\"[-]\") &amp; b $) // or ]-[ , [-[ , (-) and so on\n</code></pre>\n<p>I tried <code>marks: (\"[\",\"]\")</code> with no success!<br>\nIs this achievable through fletcher or even another method?</p>",
      "raw": "The goal is to draw simple diagrams to visualize different kinds of intervals on the number line, is it possible to define simple custom marks for fletcher arrows like shown below?:\n\n```typ\n#diagram($ a edge(\"[-]\") & b $) // or ]-[ , [-[ , (-) and so on\n```\n\nI tried `marks: (\"[\",\"]\")` with no success!\nIs this achievable through fletcher or even another method?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 19,
      "score": 98.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1455
    },
    {
      "id": 12252,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-11T12:43:52.116Z",
      "updated_at": "2025-05-11T12:44:20.025Z",
      "cooked": "<p>It’s all documented in <a href=\"https://github.com/Jollywatt/typst-fletcher/blob/master/docs/manual.pdf?raw=true\">the manual</a>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/fletcher:0.5.7\" as fletcher: *\n#fletcher.MARKS.update(m =&gt; {\n  let new-marks = (\n    \"]\": (\n      size: 5,\n      dir: ltr,\n      draw: mark =&gt; draw.line(\n        (-mark.size, mark.size),\n        (0, mark.size),\n        (0, -mark.size),\n        (-mark.size, -mark.size),\n        fill: none,\n      ),\n    ),\n    \"[\": (inherit: \"]\"),\n    \")\": (\n      size: 5,\n      dir: ltr,\n      draw: mark =&gt; draw.arc(\n        (0, 0),\n        start: -90deg,\n        stop: 90deg,\n        radius: mark.size,\n        fill: none,\n        anchor: \"origin\",\n      ),\n    ),\n    \"(\": (inherit: \")\"),\n  )\n  m + new-marks\n})\n\n#diagram({\n  node((0, 0))[$a$]\n  edge(\"[-]\")\n  node((1, 0))[$b$]\n\n  node((0, 1))[$a$]\n  edge(\"(-)\")\n  node((1, 1))[$b$]\n})\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/2/2758c171da5208ec000aca851712d28882682580.png\" alt=\"image\" data-base62-sha1=\"5C4Mk9AWmw9nomUXp4vjY4uAeY0\" width=\"136\" height=\"143\"></p>",
      "raw": "It's all documented in [the manual](https://github.com/Jollywatt/typst-fletcher/blob/master/docs/manual.pdf?raw=true).\n\n```typ\n#import \"@preview/fletcher:0.5.7\" as fletcher: *\n#fletcher.MARKS.update(m => {\n  let new-marks = (\n    \"]\": (\n      size: 5,\n      dir: ltr,\n      draw: mark => draw.line(\n        (-mark.size, mark.size),\n        (0, mark.size),\n        (0, -mark.size),\n        (-mark.size, -mark.size),\n        fill: none,\n      ),\n    ),\n    \"[\": (inherit: \"]\"),\n    \")\": (\n      size: 5,\n      dir: ltr,\n      draw: mark => draw.arc(\n        (0, 0),\n        start: -90deg,\n        stop: 90deg,\n        radius: mark.size,\n        fill: none,\n        anchor: \"origin\",\n      ),\n    ),\n    \"(\": (inherit: \")\"),\n  )\n  m + new-marks\n})\n\n#diagram({\n  node((0, 0))[$a$]\n  edge(\"[-]\")\n  node((1, 0))[$b$]\n\n  node((0, 1))[$a$]\n  edge(\"(-)\")\n  node((1, 1))[$b$]\n})\n```\n\n![image|182x191, 75%](upload://5C4Mk9AWmw9nomUXp4vjY4uAeY0.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 17,
      "score": 38.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12255,
      "post_number": 3,
      "username": "Jollywatt",
      "name": "Joseph Wilson",
      "created_at": "2025-05-11T13:09:57.133Z",
      "updated_at": "2025-05-11T13:17:06.545Z",
      "cooked": "<p>This is great. Here’s a slight tweak ensuring the correct use of the <code>rev</code> mark property, and using the <code>tip/tail-origin/end</code> properties to make the alignments look right:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/fletcher:0.5.7\" as fletcher: diagram, node, edge\n#fletcher.MARKS.update(m =&gt; {\n  import fletcher.cetz.draw\n  m + (\n    \"]\": (\n      rev: false,\n      size: 6,\n      depth: 3,\n      draw: mark =&gt; draw.line(\n        (-mark.depth, mark.size),\n        (0, mark.size),\n        (0, -mark.size),\n        (-mark.depth, -mark.size),\n        fill: none,\n      ),\n      tail-origin: mark =&gt; -mark.depth,\n    ),\n    \"[\": (inherit: \"]\", rev: true),\n    \")\": (\n      rev: false,\n      size: 8,\n      angle: 50deg,\n      draw: mark =&gt; draw.arc(\n        (0, 0),\n        start: -mark.angle,\n        stop: mark.angle,\n        radius: mark.size,\n        fill: none,\n        anchor: \"origin\",\n      ),\n      tail-end: mark =&gt; mark.size,\n      tip-end: mark =&gt; mark.size,\n      tip-origin: mark =&gt; mark.size,\n      tail-origin: mark =&gt; mark.size*calc.cos(mark.angle),\n    ),\n    \"(\": (inherit: \")\", rev: true),\n  )\n})\n\n#diagram(spacing: (20mm, 5mm), $\n  a edge(\"[-]\") &amp; b edge(\"(-)\") &amp; c \\\n  a edge(\"]-[\") &amp; b edge(\")-(\") &amp; c \\\n$)\n\n#table(\n  columns: 2,\n  fletcher.mark-debug(\"(\"),\n  fletcher.mark-demo(\"(\"),\n  fletcher.mark-debug(\"[\"),\n  fletcher.mark-demo(\"[\"),\n)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/7/76d10f420f3a9d8e5027086a8549244ae824014f.png\" data-download-href=\"https://forum.typst.app/uploads/default/76d10f420f3a9d8e5027086a8549244ae824014f\" title=\"Screenshot 2025-05-11 at 14.16.56\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/7/76d10f420f3a9d8e5027086a8549244ae824014f_2_399x500.png\" alt=\"Screenshot 2025-05-11 at 14.16.56\" data-base62-sha1=\"gX6ftD9lBP1Wf8IIOYIqSrRI34X\" width=\"399\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/7/76d10f420f3a9d8e5027086a8549244ae824014f_2_399x500.png, https://forum.typst.app/uploads/default/optimized/2X/7/76d10f420f3a9d8e5027086a8549244ae824014f_2_598x750.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/7/76d10f420f3a9d8e5027086a8549244ae824014f_2_798x1000.png 2x\" data-dominant-color=\"EDEDEC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-05-11 at 14.16.56</span><span class=\"informations\">1158×1448 86.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "This is great. Here's a slight tweak ensuring the correct use of the `rev` mark property, and using the `tip/tail-origin/end` properties to make the alignments look right:\n```typ\n#import \"@preview/fletcher:0.5.7\" as fletcher: diagram, node, edge\n#fletcher.MARKS.update(m => {\n  import fletcher.cetz.draw\n  m + (\n    \"]\": (\n      rev: false,\n      size: 6,\n      depth: 3,\n      draw: mark => draw.line(\n        (-mark.depth, mark.size),\n        (0, mark.size),\n        (0, -mark.size),\n        (-mark.depth, -mark.size),\n        fill: none,\n      ),\n      tail-origin: mark => -mark.depth,\n    ),\n    \"[\": (inherit: \"]\", rev: true),\n    \")\": (\n      rev: false,\n      size: 8,\n      angle: 50deg,\n      draw: mark => draw.arc(\n        (0, 0),\n        start: -mark.angle,\n        stop: mark.angle,\n        radius: mark.size,\n        fill: none,\n        anchor: \"origin\",\n      ),\n      tail-end: mark => mark.size,\n      tip-end: mark => mark.size,\n      tip-origin: mark => mark.size,\n      tail-origin: mark => mark.size*calc.cos(mark.angle),\n    ),\n    \"(\": (inherit: \")\", rev: true),\n  )\n})\n\n#diagram(spacing: (20mm, 5mm), $\n  a edge(\"[-]\") & b edge(\"(-)\") & c \\\n  a edge(\"]-[\") & b edge(\")-(\") & c \\\n$)\n\n#table(\n  columns: 2,\n  fletcher.mark-debug(\"(\"),\n  fletcher.mark-demo(\"(\"),\n  fletcher.mark-debug(\"[\"),\n  fletcher.mark-demo(\"[\"),\n)\n```\n\n![Screenshot 2025-05-11 at 14.16.56|399x500](upload://gX6ftD9lBP1Wf8IIOYIqSrRI34X.png)",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 16,
      "score": 53.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 713
    },
    {
      "id": 12257,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-11T13:11:55.053Z",
      "updated_at": "2025-05-11T13:14:54.013Z",
      "cooked": "<p>Yeah, I wanted to ask why it auto-reverses anyway? I wanted to pass something similar, but since it does it automatically anyway, I just straight up inherited those so that it doesn’t panic.</p>\n<p>Is <code>rev</code> built-in property that is somehow being auto-enabled for one shorthand and not enabled for the other? Like auto-mirror or something.</p>",
      "raw": "Yeah, I wanted to ask why it auto-reverses anyway? I wanted to pass something similar, but since it does it automatically anyway, I just straight up inherited those so that it doesn't panic.\n\nIs `rev` built-in property that is somehow being auto-enabled for one shorthand and not enabled for the other? Like auto-mirror or something.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 3.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12259,
      "post_number": 5,
      "username": "MJ.0",
      "name": "MJ",
      "created_at": "2025-05-11T13:18:37.867Z",
      "updated_at": "2025-05-11T13:20:02.675Z",
      "cooked": "<p>Thank you both for the detailed answers. I tried to mark them both as answers XD.</p>\n<p>I was generally aware of the method both of you used to use custom mark, but found it a bit more nuanced that I could chew at first glance, so I came checking if there was a simpler way to do it before having to tackle the proper way. your example helped me understand the process.</p>\n<p>and maybe even these marks could make it in the standard fletcher marks collection sometime in the future as they seem common enough!</p>",
      "raw": "Thank you both for the detailed answers. I tried to mark them both as answers XD.\n\nI was generally aware of the method both of you used to use custom mark, but found it a bit more nuanced that I could chew at first glance, so I came checking if there was a simpler way to do it before having to tackle the proper way. your example helped me understand the process.\n\nand maybe even these marks could make it in the standard fletcher marks collection sometime in the future as they seem common enough!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 16,
      "score": 33.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1455
    },
    {
      "id": 12260,
      "post_number": 6,
      "username": "Jollywatt",
      "name": "Joseph Wilson",
      "created_at": "2025-05-11T13:22:13.900Z",
      "updated_at": "2025-05-11T13:22:13.900Z",
      "cooked": "<p>Agreed! Feel free to add a feature request or PR at <a href=\"https://github.com/Jollywatt/typst-fletcher/issues\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">GitHub · Where software is built</a> — it would get added pretty quickly.</p>",
      "raw": "Agreed! Feel free to add a feature request or PR at https://github.com/Jollywatt/typst-fletcher/issues — it would get added pretty quickly.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 16,
      "score": 28.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 713
    },
    {
      "id": 12263,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-11T13:36:45.439Z",
      "updated_at": "2025-05-11T13:36:45.439Z",
      "cooked": "<aside class=\"onebox githubpullrequest\" data-onebox-src=\"https://github.com/Jollywatt/typst-fletcher/pull/103\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/Jollywatt/typst-fletcher/pull/103\" target=\"_blank\" rel=\"noopener\">github.com/Jollywatt/typst-fletcher</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\" data-github-private-repo=\"false\">\n\n\n\n    <div class=\"github-icon-container\" title=\"Pull Request\">\n      <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 12 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z\"></path></svg>\n    </div>\n\n  <div class=\"github-info-container\">\n\n\n\n      <h4>\n        <a href=\"https://github.com/Jollywatt/typst-fletcher/pull/103\" target=\"_blank\" rel=\"noopener\">feat: add `bracket` and `parenthesis` marks</a>\n      </h4>\n\n    <div class=\"branches\">\n      <code>Jollywatt:master</code> ← <code>Andrew15-5:bracket-parenthesis-marks</code>\n    </div>\n\n      <div class=\"github-info\">\n        <div class=\"date\">\n          opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2025-05-11\" data-time=\"13:36:33\" data-timezone=\"UTC\">01:36PM - 11 May 25 UTC</span>\n        </div>\n\n        <div class=\"user\">\n          <a href=\"https://github.com/Andrew15-5\" target=\"_blank\" rel=\"noopener\">\n            <img alt=\"Andrew15-5\" src=\"https://forum.typst.app/uploads/default/original/1X/8c66fc8b1c207ba90488266df18b206a61b1fc49.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"707C3A\">\n            Andrew15-5\n          </a>\n        </div>\n\n        <div class=\"lines\" title=\"1 commits changed 1 files with 37 additions and 0 deletions\">\n          <a href=\"https://github.com/Jollywatt/typst-fletcher/pull/103/files\" target=\"_blank\" rel=\"noopener\">\n            <span class=\"added\">+37</span>\n            <span class=\"removed\">-0</span>\n          </a>\n        </div>\n      </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">See https://forum.typst.app/t/4022/6.</p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "https://github.com/Jollywatt/typst-fletcher/pull/103",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 16,
      "score": 18.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:48:03.846507"
}