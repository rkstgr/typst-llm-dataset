{
  "topic_metadata": {
    "id": 3742,
    "title": "How to use highlights in codly without changing line spacing?",
    "slug": "how-to-use-highlights-in-codly-without-changing-line-spacing",
    "posts_count": 9,
    "created_at": "2025-04-21T11:20:25.705Z",
    "last_posted_at": "2025-04-21T16:53:10.259Z",
    "views": 68,
    "like_count": 5,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "bluss",
    "tags": [
      "codly"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 637
  },
  "posts": [
    {
      "id": 11384,
      "post_number": 1,
      "username": "ranjitjhala",
      "name": "Ranjit Jhala",
      "created_at": "2025-04-21T11:20:25.807Z",
      "updated_at": "2025-04-22T06:24:24.981Z",
      "cooked": "<p>Hi,</p>\n<p>Thanks for your excellent work on <code>typst</code> and <code>polylux</code> and <code>codly</code>- I’m enjoying using it thoroughly! I had a question: could you tell me how I can get the highlights to work on <code>codly</code><br>\nwithout modifying the line spacing? Meaning, the line with the highlights seems “wider”, i.e. has more padding around it than the other lines, which I’d prefer not to have.</p>\n<p>For example, the code</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#codly(\n  highlights: ((line: 2, start: 15, end: 19, fill: red), )\n)\n```rust\nfn test(x) {\n  let apple = x + 1;\n  let cat = [apple, buck];\n  let buck = a + 1;\n  return c\n}\n```\n</code></pre>\n<p>Generates the PDF</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/a/a08e52e9e8f665a8b801af7c3c69944bef90ff17.png\" data-download-href=\"https://forum.typst.app/uploads/default/a08e52e9e8f665a8b801af7c3c69944bef90ff17\" title=\"Screenshot 2025-04-21 at 4.50.06 PM\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/a/a08e52e9e8f665a8b801af7c3c69944bef90ff17_2_690x255.png\" alt=\"Screenshot 2025-04-21 at 4.50.06 PM\" data-base62-sha1=\"mUlk0LZWN3FjRhsXYlmQWHnAGkD\" width=\"690\" height=\"255\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/a/a08e52e9e8f665a8b801af7c3c69944bef90ff17_2_690x255.png, https://forum.typst.app/uploads/default/optimized/2X/a/a08e52e9e8f665a8b801af7c3c69944bef90ff17_2_1035x382.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/a/a08e52e9e8f665a8b801af7c3c69944bef90ff17_2_1380x510.png 2x\" data-dominant-color=\"FCFAFA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-04-21 at 4.50.06 PM</span><span class=\"informations\">1486×550 38.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Or is there some way to highlight parts of code blocks directly (without using <code>codly</code>) that achieves this effect (much like the “escape-characters” in latex’s listings?)</p>\n<p>Thanks!</p>\n<ul>\n<li>Ranjit.</li>\n</ul>",
      "raw": "Hi,\n\nThanks for your excellent work on `typst` and `polylux` and `codly`- I'm enjoying using it thoroughly! I had a question: could you tell me how I can get the highlights to work on `codly` \nwithout modifying the line spacing? Meaning, the line with the highlights seems \"wider\", i.e. has more padding around it than the other lines, which I'd prefer not to have.\n\nFor example, the code\n\n````typ\n#codly(\n  highlights: ((line: 2, start: 15, end: 19, fill: red), )\n)\n```rust\nfn test(x) {\n  let apple = x + 1;\n  let cat = [apple, buck];\n  let buck = a + 1;\n  return c\n}\n```\n````\n\nGenerates the PDF\n\n![Screenshot 2025-04-21 at 4.50.06 PM|690x255](upload://mUlk0LZWN3FjRhsXYlmQWHnAGkD.png)\n\nOr is there some way to highlight parts of code blocks directly (without using `codly`) that achieves this effect (much like the \"escape-characters\" in latex's listings?)\n\nThanks!\n\n- Ranjit.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 179.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1487
    },
    {
      "id": 11385,
      "post_number": 2,
      "username": "bluss",
      "name": "Ulrik",
      "created_at": "2025-04-21T11:31:18.289Z",
      "updated_at": "2025-04-21T11:31:18.289Z",
      "cooked": "<p>I think they have an example for this in <a href=\"https://raw.githubusercontent.com/Dherse/codly/main/docs.pdf\" rel=\"noopener nofollow ugc\">the manual</a> section 2.47.1 on pg 35</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/d/de694f4b55cf2be5753e4ac4b7c77439fa98f99e.png\" alt=\"bild\" data-base62-sha1=\"vJxCEPflcvuOv6m56wj5zduG6m2\" width=\"606\" height=\"40\"></p>",
      "raw": "I think they have an example for this in [the manual](https://raw.githubusercontent.com/Dherse/codly/main/docs.pdf) section 2.47.1 on pg 35\n\n![bild|606x40](upload://vJxCEPflcvuOv6m56wj5zduG6m2.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 8.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 1272
    },
    {
      "id": 11386,
      "post_number": 3,
      "username": "ranjitjhala",
      "name": "Ranjit Jhala",
      "created_at": "2025-04-21T11:44:10.486Z",
      "updated_at": "2025-04-21T11:44:10.486Z",
      "cooked": "<p>Hi – yes, I should have mentioned in my original post that I tried to use the <code>highlight-inset</code> as advised in the manual, but it seemed to make no difference at all in my document? As in changing the <code>x</code> and <code>y</code> to arbitrary different values seemed to make no change whatsoever?</p>",
      "raw": "Hi -- yes, I should have mentioned in my original post that I tried to use the `highlight-inset` as advised in the manual, but it seemed to make no difference at all in my document? As in changing the `x` and `y` to arbitrary different values seemed to make no change whatsoever?",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 8.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1487
    },
    {
      "id": 11388,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-04-21T11:55:45.655Z",
      "updated_at": "2025-04-21T12:05:04.012Z",
      "cooked": "<p>Hi. Looks like a bug, you should open an issue about it, if it wasn’t addressed anywhere.</p>\n<p>Also, please follow the formatting rules for posts:</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"reknih\" data-post=\"1\" data-topic=\"11\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11/1\">How to post in the Questions category</a></div>\n<blockquote>\n<p>If your question pertains to a bit of Typst markup you have problems with, put it in the question body! You can syntax-highlight Typst code by wrapping it in ` ```typ … ````. It will then look like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set font(size: 12pt)\n\nHello from *Typst* at $ pi.var + 1 $ o'clock!\n</code></pre>\n<p>If you need to highlight a code or math mode snippet instead, the language tags <code>typc</code> and <code>typm</code> do that, respectively.</p>\n</blockquote>\n</aside>\n<p>You’ve also forgot to close the triple backticks.</p>\n<pre data-code-wrap=\"md\"><code class=\"lang-md\">````typ\n```rust\n```\n````\n</code></pre>",
      "raw": "Hi. Looks like a bug, you should open an issue about it, if it wasn't addressed anywhere.\n\nAlso, please follow the formatting rules for posts:\n\n[quote=\"reknih, post:1, topic:11\"]\nIf your question pertains to a bit of Typst markup you have problems with, put it in the question body! You can syntax-highlight Typst code by wrapping it in ` ```typ ... ````. It will then look like this:\n\n```typ\n#set font(size: 12pt)\n\nHello from *Typst* at $ pi.var + 1 $ o'clock!\n```\n\nIf you need to highlight a code or math mode snippet instead, the language tags `typc` and `typm` do that, respectively.\n[/quote]\n\nYou've also forgot to close the triple backticks.\n\n`````md\n````typ\n```rust\n```\n````\n`````",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 19,
      "score": 18.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 11389,
      "post_number": 5,
      "username": "bluss",
      "name": "Ulrik",
      "created_at": "2025-04-21T11:55:57.533Z",
      "updated_at": "2025-04-21T11:55:57.533Z",
      "cooked": "<p>I think it’s fixed, but not released <a href=\"https://github.com/Dherse/codly/pull/79\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Fix highlight inset not taking effect by KoviRobi · Pull Request #79 · Dherse/codly · GitHub</a></p>",
      "raw": "I think it's fixed, but not released https://github.com/Dherse/codly/pull/79",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 8.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 1272
    },
    {
      "id": 11390,
      "post_number": 6,
      "username": "bluss",
      "name": "Ulrik",
      "created_at": "2025-04-21T12:01:13.469Z",
      "updated_at": "2025-04-21T12:22:56.831Z",
      "cooked": "<p>For now it’s possible to roll back to codly 1.2.0 and it kinda seems to work there.</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/8/8de5605506670af4b1ff68413d68d03e33dfdbcc.png\" alt=\"bild\" data-base62-sha1=\"kfgL6BNdSpzaUJPBzWIZfCyDSr2\" width=\"374\" height=\"162\"></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show: codly-init.with()\n#codly(\n highlight-inset: 0em, highlight-outset: 0.3em,\n highlights: ((line: 2, start: 0, fill: red), )\n )\n```kotlin\nprivate val n = 0\nprivate val n = 0\nprivate val n = 0\n```\n</code></pre>\n<hr>\n<p>Sidenote I keep forgetting that one can use quadruple backticks to have raw blocks inside code blocks on the forum, like this:</p>\n<pre data-code-wrap=\"markdown\"><code class=\"lang-markdown\">This is my post on discourse. Example code:\n\n````typ\nThis is a typst document.\n#codly()\n```java\nprivate val n = 0\n```\n````\n</code></pre>",
      "raw": "For now it's possible to roll back to codly 1.2.0 and it kinda seems to work there.\n\n![bild|374x162](upload://kfgL6BNdSpzaUJPBzWIZfCyDSr2.png)\n\n````typ\n#show: codly-init.with()\n#codly(\n highlight-inset: 0em, highlight-outset: 0.3em,\n highlights: ((line: 2, start: 0, fill: red), )\n )\n```kotlin\nprivate val n = 0\nprivate val n = 0\nprivate val n = 0\n```\n````\n\n----\n\nSidenote I keep forgetting that one can use quadruple backticks to have raw blocks inside code blocks on the forum, like this:\n\n`````markdown\nThis is my post on discourse. Example code:\n\n````typ\nThis is a typst document.\n#codly()\n```java\nprivate val n = 0\n```\n````\n`````",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 14,
      "score": 37.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 1272
    },
    {
      "id": 11391,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-04-21T12:06:28.390Z",
      "updated_at": "2025-04-21T12:06:28.390Z",
      "cooked": "<p>The future/local solution would be:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/codly:1.3.0\": *\n#show: codly-init\n\n#codly(\n  highlight-inset: (x: 0.32em, y: 0pt),\n  highlight-outset: (x: 0pt, y: 0.32em),\n  highlights: ((line: 2, start: 15, end: 19, fill: red),),\n)\n\n```rust\nfn test(x) {\n  let apple = x + 1;\n  let cat = [apple, buck];\n  let buck = a + 1;\n  return c\n}\n```\n</code></pre>",
      "raw": "The future/local solution would be:\n\n````typ\n#import \"@preview/codly:1.3.0\": *\n#show: codly-init\n\n#codly(\n  highlight-inset: (x: 0.32em, y: 0pt),\n  highlight-outset: (x: 0pt, y: 0.32em),\n  highlights: ((line: 2, start: 15, end: 19, fill: red),),\n)\n\n```rust\nfn test(x) {\n  let apple = x + 1;\n  let cat = [apple, buck];\n  let buck = a + 1;\n  return c\n}\n```\n````",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 13,
      "score": 17.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 11392,
      "post_number": 8,
      "username": "ranjitjhala",
      "name": "Ranjit Jhala",
      "created_at": "2025-04-21T13:53:16.108Z",
      "updated_at": "2025-04-21T16:56:30.884Z",
      "cooked": "<p>Hi Andrew,</p>\n<p>[EDIT: my apologies, I missed the “future” part of the message, please ignore below!]</p>\n<p>With exactly that code I still get the below?</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/b/b548a1f8b28bd50f45a6d207c744c77a6d91a2b3.png\" data-download-href=\"https://forum.typst.app/uploads/default/b548a1f8b28bd50f45a6d207c744c77a6d91a2b3\" title=\"Screenshot 2025-04-21 at 7.21.02 PM\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/b/b548a1f8b28bd50f45a6d207c744c77a6d91a2b3_2_690x167.png\" alt=\"Screenshot 2025-04-21 at 7.21.02 PM\" data-base62-sha1=\"pRI2id5XMq4h5NV6lhsLcXNlwI3\" width=\"690\" height=\"167\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/b/b548a1f8b28bd50f45a6d207c744c77a6d91a2b3_2_690x167.png, https://forum.typst.app/uploads/default/optimized/2X/b/b548a1f8b28bd50f45a6d207c744c77a6d91a2b3_2_1035x250.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/b/b548a1f8b28bd50f45a6d207c744c77a6d91a2b3_2_1380x334.png 2x\" data-dominant-color=\"F6F5F5\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-04-21 at 7.21.02 PM</span><span class=\"informations\">1480×360 27.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>(And changing the parameters for the <code>highlight-inset</code> seems to make no difference of any kind?)</p>\n<p>Could it have to do with some version problem?</p>\n<ul>\n<li>Ranjit.</li>\n</ul>",
      "raw": "Hi Andrew, \n\n[EDIT: my apologies, I missed the \"future\" part of the message, please ignore below!] \n\nWith exactly that code I still get the below?\n\n![Screenshot 2025-04-21 at 7.21.02 PM|690x167](upload://pRI2id5XMq4h5NV6lhsLcXNlwI3.png)\n\n(And changing the parameters for the `highlight-inset` seems to make no difference of any kind?)\n\nCould it have to do with some version problem?\n\n- Ranjit.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 13,
      "score": 2.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1487
    },
    {
      "id": 11402,
      "post_number": 9,
      "username": "ranjitjhala",
      "name": "Ranjit Jhala",
      "created_at": "2025-04-21T16:53:10.259Z",
      "updated_at": "2025-04-21T16:53:10.259Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"bluss\" data-post=\"6\" data-topic=\"3742\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/b/441A5E/48.png\" class=\"avatar\"> bluss:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">#show: codly-init.with()\n#codly(\n highlight-inset: 0em, highlight-outset: 0.3em,\n highlights: ((line: 2, start: 0, fill: red), )\n )\n```kotlin\nprivate val n = 0\nprivate val n = 0\nprivate val n = 0\n</code></pre>\n<pre><code class=\"lang-auto\"></code></pre>\n</blockquote>\n</aside>\n<p>Thanks very much, this solution using <code>1.2.0</code> that like a charm!!!</p>",
      "raw": "[quote=\"bluss, post:6, topic:3742\"]\n```\n#show: codly-init.with()\n#codly(\n highlight-inset: 0em, highlight-outset: 0.3em,\n highlights: ((line: 2, start: 0, fill: red), )\n )\n```kotlin\nprivate val n = 0\nprivate val n = 0\nprivate val n = 0\n```\n```\n[/quote]\n\nThanks very much, this solution using `1.2.0` that like a charm!!!",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 13,
      "score": 17.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1487
    }
  ],
  "scraped_at": "2025-06-10T09:48:53.986559"
}