{
  "topic_metadata": {
    "id": 3472,
    "title": "How to make `\"1 / 1\"` numbering ignore the back matter?",
    "slug": "how-to-make-1-1-numbering-ignore-the-back-matter",
    "posts_count": 5,
    "created_at": "2025-04-01T05:53:53.485Z",
    "last_posted_at": "2025-04-01T10:35:06.686Z",
    "views": 52,
    "like_count": 6,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Y.D.X",
    "tags": [
      "numbering",
      "counter"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 417
  },
  "posts": [
    {
      "id": 10480,
      "post_number": 1,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2025-04-01T05:53:53.815Z",
      "updated_at": "2025-04-01T06:12:47.167Z",
      "cooked": "<p><a href=\"https://typst.app/docs/reference/introspection/counter/#definitions-display-both\">The <code>\"1 / 1\"</code> numbering pattern</a> displays the current and total number of pages, where the <em>total</em> number means the final top-level count.</p>\n<p>I want to use <code>\"1 / 1\"</code> for main matter, and <code>\"A\"</code> for back matter. Therefore, the final count would be the number of pages of the <em>back</em> matter. How to change it to that of the <em>main</em> matter?</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(height: auto, width: 10em)\n\n#set page(numbering: \"1 / 1\")\n\nMain matter // 1 / 3 ğŸ‘ˆ How to change to 1 / 2?\n#pagebreak()\nMain matter // 2 / 3 ğŸ‘ˆ How to change to 2 / 2?\n#pagebreak()\n\n// I need \"A\", but letâ€™s use \"A / 1\" for debugging.\n#set page(numbering: \"A / 1\")\n#counter(page).update(1)\n\nBack matter // A / 3\n#pagebreak()\nBack matter // B / 3\n#pagebreak()\nBack matter // C / 3\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/9/9243a8914608b1d9a64288690b81bc416e4d1fe8.png\" data-download-href=\"https://forum.typst.app/uploads/default/9243a8914608b1d9a64288690b81bc416e4d1fe8\" title=\"screenshot in the web app\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/9/9243a8914608b1d9a64288690b81bc416e4d1fe8_2_690x430.png\" alt=\"screenshot in the web app\" data-base62-sha1=\"kRUFqSihX431o0MgWfwMBtGpIbm\" width=\"690\" height=\"430\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/9/9243a8914608b1d9a64288690b81bc416e4d1fe8_2_690x430.png, https://forum.typst.app/uploads/default/optimized/2X/9/9243a8914608b1d9a64288690b81bc416e4d1fe8_2_1035x645.png 1.5x, https://forum.typst.app/uploads/default/original/2X/9/9243a8914608b1d9a64288690b81bc416e4d1fe8.png 2x\" data-dominant-color=\"EEEFF1\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">screenshot in the web app</span><span class=\"informations\">1100Ã—686 121 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Besides, should this behaviour be considered as a bug?</p>\n<h2><a name=\"p-10480-update-1\" class=\"anchor\" href=\"#p-10480-update-1\"></a>Update</h2>\n<p>I find <a href=\"https://typst.app/universe/package/anti-matter/\" class=\"inline-onebox\">anti-matter â€“ Typst Universe</a> from the following answer, but its latest release was in December 2023. <s>Is it still relevant today?</s> It canâ€™t compile with typst v0.13 because â€œonly element functions can be used as selectorsâ€.</p>\n<aside class=\"quote quote-modified\" data-post=\"2\" data-topic=\"2496\">\n  <div class=\"title\">\n    <div class=\"quote-controls\"></div>\n    <img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/q/662200/48.png\" class=\"avatar\">\n    <a href=\"https://forum.typst.app/t/how-can-i-continue-frontmatter-numbering-in-backmatter/2496/2\">How can I continue frontmatter numbering in backmatter?</a> <a class=\"badge-category__wrapper \" href=\"/c/questions/5\"><span data-category-id=\"5\" style=\"--category-badge-color: #F7C000; --category-badge-text-color: #fdfdfd;\" data-drop-close=\"true\" class=\"badge-category \" title=\"Your questions about using Typst and the web app go in this category.\"><span class=\"badge-category__name\">Questions</span></span></a>\n  </div>\n  <blockquote>\n    You can look at the package <a href=\"https://typst.app/universe/package/anti-matter/\" class=\"inline-onebox\">anti-matter â€“ Typst Universe</a>. \nIf you donâ€™t want to use a package, then a simple PoC would be \n#let frontmatter(body) = {\n    set page(numbering: \"i\")\n    body\n}\n#let mainmatter(body) = {\n    set page(numbering: \"1\")\n    context counter(\"antimatter\").update(counter(page).get())\n    body\n}\n#let backmatter(body) = {\n    set page(numbering: \"i\")\n    context counter(page).update(counter(\"antimatter\").get())\n    body    \n}\n\n#show: frontmatter\n#lorem(100)\n#pagebreak()\n#loreâ€¦\n  </blockquote>\n</aside>\n",
      "raw": "[The `\"1 / 1\"` numbering pattern](https://typst.app/docs/reference/introspection/counter/#definitions-display-both) displays the current and total number of pages, where the _total_ number means the final top-level count.\n\nI want to use `\"1 / 1\"` for main matter, and `\"A\"` for back matter. Therefore, the final count would be the number of pages of the *back* matter. How to change it to that of the *main* matter?\n\n```typst\n#set page(height: auto, width: 10em)\n\n#set page(numbering: \"1 / 1\")\n\nMain matter // 1 / 3 ğŸ‘ˆ How to change to 1 / 2?\n#pagebreak()\nMain matter // 2 / 3 ğŸ‘ˆ How to change to 2 / 2?\n#pagebreak()\n\n// I need \"A\", but letâ€™s use \"A / 1\" for debugging.\n#set page(numbering: \"A / 1\")\n#counter(page).update(1)\n\nBack matter // A / 3\n#pagebreak()\nBack matter // B / 3\n#pagebreak()\nBack matter // C / 3\n```\n\n![screenshot in the web app|690x430](upload://kRUFqSihX431o0MgWfwMBtGpIbm.png)\n\nBesides, should this behaviour be considered as a bug?\n\n## Update\n\nI find https://typst.app/universe/package/anti-matter/ from the following answer, but its latest release was in December 2023. ~~Is it still relevant today?~~ It can't compile with typst v0.13 because â€œonly element functions can be used as selectorsâ€.\n\nhttps://forum.typst.app/t/how-can-i-continue-frontmatter-numbering-in-backmatter/2496/2?u=y.d.x",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 29,
      "score": 40.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 292
    },
    {
      "id": 10482,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-04-01T07:32:40.876Z",
      "updated_at": "2025-04-01T07:32:40.876Z",
      "cooked": "<p>As you say <code>1 / 1</code> uses the final counter value. If thatâ€™s not what you want, you can build the footer manually:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(height: auto, width: 10em)\n\n#set page(footer: context align(center)[\n #counter(page).get().first() / #counter(page).at(&lt;main-end&gt;).first()\n])\n\nMain matter\n#pagebreak()\nMain matter\n&lt;main-end&gt;\n\n#pagebreak()\n\n// I need \"A\", but letâ€™s use \"A / 1\" for debugging.\n#set page(numbering: \"A / 1\", footer: auto)\n#counter(page).update(1)\n\nBack matter // A / 3\n#pagebreak()\nBack matter // B / 3\n#pagebreak()\nBack matter // C / 3\n</code></pre>",
      "raw": "As you say `1 / 1` uses the final counter value. If that's not what you want, you can build the footer manually:\n\n```typ\n#set page(height: auto, width: 10em)\n\n#set page(footer: context align(center)[\n #counter(page).get().first() / #counter(page).at(<main-end>).first()\n])\n\nMain matter\n#pagebreak()\nMain matter\n<main-end>\n\n#pagebreak()\n\n// I need \"A\", but letâ€™s use \"A / 1\" for debugging.\n#set page(numbering: \"A / 1\", footer: auto)\n#counter(page).update(1)\n\nBack matter // A / 3\n#pagebreak()\nBack matter // B / 3\n#pagebreak()\nBack matter // C / 3\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 25.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 10483,
      "post_number": 3,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2025-04-01T08:02:23.152Z",
      "updated_at": "2025-04-01T10:26:19.031Z",
      "cooked": "<p>Thanks! I didnâ€™t know labels can be used like that.</p>\n<p>I replace your <code>footer</code> with <code>numbering</code>, and end up with the following.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(numbering: (..nums) =&gt; [\n  #nums.pos().first() / #counter(page).at(&lt;main-matter-end&gt;).first()\n])\n\nMain matter\n\n#metadata(\"End of main matter\") &lt;main-matter-end&gt;\n#set page(numbering: \"A\")\n#counter(page).update(1)\n\nBack matter\n</code></pre>",
      "raw": "Thanks! I didn't know labels can be used like that.\n\nI replace your `footer` with `numbering`, and end up with the following.\n\n```typst\n#set page(numbering: (..nums) => [\n  #nums.pos().first() / #counter(page).at(<main-matter-end>).first()\n])\n\nMain matter\n\n#metadata(\"End of main matter\") <main-matter-end>\n#set page(numbering: \"A\")\n#counter(page).update(1)\n\nBack matter\n```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 23,
      "score": 39.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 292
    },
    {
      "id": 10487,
      "post_number": 4,
      "username": "sijo",
      "name": "",
      "created_at": "2025-04-01T09:13:01.083Z",
      "updated_at": "2025-04-01T13:00:05.270Z",
      "cooked": "<p>Ah yes itâ€™s nicer to just change the numbering! You can mark your own version as accepted answer.</p>",
      "raw": "Ah yes it's nicer to just change the numbering! You can mark your own version as accepted answer.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 24.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 10493,
      "post_number": 5,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2025-04-01T10:35:06.686Z",
      "updated_at": "2025-04-01T10:35:06.686Z",
      "cooked": "<p>Itâ€™s nice of you! And Iâ€™ve updated my post with <code>#metadata</code>, because I found the unbound label complains occasionally (e.g., the main matter ends with another label).</p>",
      "raw": "It's nice of you! And I've updated my post with `#metadata`, because I found the unbound label complains occasionally (e.g., the main matter ends with another label).",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 20,
      "score": 19.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 292
    }
  ],
  "scraped_at": "2025-06-10T09:49:50.482429"
}