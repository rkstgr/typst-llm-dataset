{
  "topic_metadata": {
    "id": 1664,
    "title": "How to use bibliography with subfiles",
    "slug": "how-to-use-bibliography-with-subfiles",
    "posts_count": 4,
    "created_at": "2024-11-11T06:09:47.342Z",
    "last_posted_at": "2024-11-14T19:35:23.144Z",
    "views": 185,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "literature",
      "bibtex"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 237
  },
  "posts": [
    {
      "id": 5482,
      "post_number": 1,
      "username": "Mr_study",
      "name": "Mr study",
      "created_at": "2024-11-11T06:09:47.518Z",
      "updated_at": "2025-02-05T15:05:02.667Z",
      "cooked": "<p>I have a question about using bibliographies in subfiles in the latest version 0.12.0.</p>\n<p>The lastest update broke my code with the changes to <a class=\"hashtag-cooked\" href=\"/tag/locate\" data-type=\"tag\" data-slug=\"locate\" data-id=\"64\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>locate</span></a>. How can I cite my bibtex file from the subfile without making producing the references at the end of the subfile?</p>\n<p>Before the latest update I had a main file for my thesis and included a chapter with <code>#include \"chapt_validation.typ\"</code>. Inside chapt_validation.typ I reference papers from my bibtex file with <code>#cite(&lt;paper_name&gt;, form:\"author\")</code> and <code>#locate(loc =&gt; bib_state.at(query(&lt;here_is_valid_chapt&gt;, loc).first().location()))</code> at the end of the subfile, which only produced a reference section in the main file.</p>\n<p>How can I convert this typst code to the new version?</p>",
      "raw": "I have a question about using bibliographies in subfiles in the latest version 0.12.0.\n\nThe lastest update broke my code with the changes to #locate. How can I cite my bibtex file from the subfile without making producing the references at the end of the subfile?\n\nBefore the latest update I had a main file for my thesis and included a chapter with ```#include \"chapt_validation.typ\"```. Inside chapt_validation.typ I reference papers from my bibtex file with ```#cite(<paper_name>, form:\"author\")``` and ```#locate(loc => bib_state.at(query(<here_is_valid_chapt>, loc).first().location()))``` at the end of the subfile, which only produced a reference section in the main file. \n\nHow can I convert this typst code to the new version?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 43,
      "score": 578.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 789
    },
    {
      "id": 5484,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-11-11T09:22:02.784Z",
      "updated_at": "2024-11-11T09:22:02.784Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/mr_study\">@Mr_study</a> and welcome!<br>\nDon’t hesitate to read about how to convert locate to context expressions at <a href=\"https://forum.typst.app/t/how-to-use-context-instead-of-a-callback-function-in-locate-function-calls/965\" class=\"inline-onebox\">How to use context instead of a callback function in locate function calls?</a></p>",
      "raw": "Hello @Mr_study and welcome!\nDon't hesitate to read about how to convert locate to context expressions at https://forum.typst.app/t/how-to-use-context-instead-of-a-callback-function-in-locate-function-calls/965",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 28.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 5619,
      "post_number": 3,
      "username": "Mr_study",
      "name": "Mr study",
      "created_at": "2024-11-14T05:05:09.087Z",
      "updated_at": "2024-11-14T05:05:09.087Z",
      "cooked": "<p>Thanks for the help.<br>\nWith your direction I managed to fix the issue by replacing:<br>\n<code>#locate(loc =&gt; bib_state.at(query(&lt;here_is_intro_chapt&gt;, loc).first().location()))</code><br>\nwith<br>\n<code>#context {bib_state.at(query(&lt;here_is_intro_chapt&gt;).first().location()) }</code></p>",
      "raw": "Thanks for the help.\nWith your direction I managed to fix the issue by replacing:\n```#locate(loc => bib_state.at(query(<here_is_intro_chapt>, loc).first().location()))```\nwith\n```#context {bib_state.at(query(<here_is_intro_chapt>).first().location()) }```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 26.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 789
    },
    {
      "id": 5639,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-11-14T19:35:23.144Z",
      "updated_at": "2024-11-14T19:35:50.961Z",
      "cooked": "<p>Even better, you can replace the query with <code>locate()</code> (it has a new purpose now: find the location of something):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#context bib_state.at(locate(&lt;here_is_intro_chapt&gt;))\n</code></pre>\n<p>(Also, please don’t forget to mark an answer as a solution if you managed to solve your problem, thank you <img src=\"https://forum.typst.app/images/emoji/apple/smiley.png?v=12\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\">)</p>",
      "raw": "Even better, you can replace the query with `locate()` (it has a new purpose now: find the location of something):\n\n```typ\n#context bib_state.at(locate(<here_is_intro_chapt>))\n```\n\n(Also, please don't forget to mark an answer as a solution if you managed to solve your problem, thank you :smiley:)",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 28,
      "score": 60.6,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:55:10.132551"
}