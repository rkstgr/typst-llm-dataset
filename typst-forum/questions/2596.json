{
  "topic_metadata": {
    "id": 2596,
    "title": "How can I remove the initial z shearing transformation in Cetz?",
    "slug": "how-can-i-remove-the-initial-z-shearing-transformation-in-cetz",
    "posts_count": 6,
    "created_at": "2025-01-29T22:02:43.310Z",
    "last_posted_at": "2025-02-25T20:54:21.838Z",
    "views": 140,
    "like_count": 3,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "jwolf",
    "tags": [
      "cetz"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 323
  },
  "posts": [
    {
      "id": 8001,
      "post_number": 1,
      "username": "Raul_Durand",
      "name": "Raul Durand",
      "created_at": "2025-01-29T22:02:43.441Z",
      "updated_at": "2025-01-29T22:03:32.384Z",
      "cooked": "<p>Cetz applies an initial transformation matrix with shearing components</p>\n<pre><code class=\"lang-auto\">    / Current transformation matrix, a rhs coordinate system\n    // where z is sheared by a half x and y.\n    //   +x = right, +y = up, +z = 1/2 (left + down)\n    transform:\n      ((1, 0,-.5, 0),\n       (0,-1,+.5, 0),\n       (0, 0, .0, 0),\n       (0, 0, .0, 1)),\n</code></pre>\n<p>I want to avoid the initial z shearing transformation in Cetz since it creates some distortions in 3D generated images.<br>\nWhat are the commands I need to remove this shearing? or do I need to set a new transformation matrix?<br>\nAlso, is there a way to define an default initial transformation?</p>",
      "raw": "Cetz applies an initial transformation matrix with shearing components \n```\n    / Current transformation matrix, a rhs coordinate system\n    // where z is sheared by a half x and y.\n    //   +x = right, +y = up, +z = 1/2 (left + down)\n    transform:\n      ((1, 0,-.5, 0),\n       (0,-1,+.5, 0),\n       (0, 0, .0, 0),\n       (0, 0, .0, 1)),\n```\nI want to avoid the initial z shearing transformation in Cetz since it creates some distortions in 3D generated images.\nWhat are the commands I need to remove this shearing? or do I need to set a new transformation matrix?\nAlso, is there a way to define an default initial transformation?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 87.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 583
    },
    {
      "id": 8284,
      "post_number": 2,
      "username": "M4R1S",
      "name": "Maris Baier",
      "created_at": "2025-02-06T23:30:42.652Z",
      "updated_at": "2025-02-06T23:30:42.652Z",
      "cooked": "<p>Is this what you are looking for?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#canvas({\n  import draw: *\n  set-style(mark:(end:\"&gt;\"))\n  \n  set-transform(none)\n\n  line((),(x:1))\n  line((0,0),(y:1))\n  line((0,0),(z:1))\n})\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/d/ddaf3304cec027e33f33b4c0851051c1dbce2c08.png\" alt=\"image\" data-base62-sha1=\"vD6SN1yL5xka2AqRP13Cx4a2phS\" width=\"125\" height=\"118\"></p>",
      "raw": "Is this what you are looking for?\n```typ\n#canvas({\n  import draw: *\n  set-style(mark:(end:\">\"))\n  \n  set-transform(none)\n\n  line((),(x:1))\n  line((0,0),(y:1))\n  line((0,0),(z:1))\n})\n```\n\n![image|125x118](upload://vD6SN1yL5xka2AqRP13Cx4a2phS.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 5.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 643
    },
    {
      "id": 8335,
      "post_number": 3,
      "username": "Raul_Durand",
      "name": "Raul Durand",
      "created_at": "2025-02-07T19:52:38.421Z",
      "updated_at": "2025-02-07T19:52:38.421Z",
      "cooked": "<p>Almost. I need the y axis pointing upwards.<br>\nProbably the only way to achieve this is providing the transformation matrix explicitly.</p>",
      "raw": "Almost. I need the y axis pointing upwards.\nProbably the only way to achieve this is providing the transformation matrix explicitly.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 10.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 583
    },
    {
      "id": 8860,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-22T09:09:57.035Z",
      "updated_at": "2025-02-22T09:09:57.035Z",
      "cooked": "<p>I think this one does what you want:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#canvas({\n  import draw: *\n  set-style(mark:(end:\"&gt;\"))\n  \n  scale(z: 0)\n\n  line((),(x:1), stroke: red)\n  line((0,0),(y:1), stroke: green)\n  line((0,0),(z:1), stroke: blue)\n})\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/8/8fa537e4390df720a8a80a4687038e51f59d189f.png\" alt=\"image\" data-base62-sha1=\"kuKfVxLwMVKAyqBBvVYV8TqV1pl\" width=\"172\" height=\"172\"></p>\n<p>Scaling z by 0 will effectively ignore the coordinate, so that all points with the same (x, y) appear at the same position on the canvas.</p>",
      "raw": "I think this one does what you want:\n```typ\n#canvas({\n  import draw: *\n  set-style(mark:(end:\">\"))\n  \n  scale(z: 0)\n\n  line((),(x:1), stroke: red)\n  line((0,0),(y:1), stroke: green)\n  line((0,0),(z:1), stroke: blue)\n})\n```\n![image|345x345, 50%](upload://kuKfVxLwMVKAyqBBvVYV8TqV1pl.png)\n\nScaling z by 0 will effectively ignore the coordinate, so that all points with the same (x, y) appear at the same position on the canvas.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 14.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 9061,
      "post_number": 5,
      "username": "Raul_Durand",
      "name": "Raul Durand",
      "created_at": "2025-02-25T20:18:38.958Z",
      "updated_at": "2025-02-25T20:18:38.958Z",
      "cooked": "<p>Not really. In that case, I will lose the z dimension after a rotation. Thanks, though.</p>",
      "raw": "Not really. In that case, I will lose the z dimension after a rotation. Thanks, though.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 3.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 583
    },
    {
      "id": 9064,
      "post_number": 6,
      "username": "jwolf",
      "name": "Johannes Wolf",
      "created_at": "2025-02-25T20:54:21.838Z",
      "updated_at": "2025-02-25T21:17:20.344Z",
      "cooked": "<p>You can either use:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.2\"\n\n#cetz.canvas({\n  import cetz.draw: *\n\n  set-transform(none)\n  scale(y: -1)\n\n  line((0,1), (0,0), (1,0), mark: (start: \"&gt;\", end: \"&gt;\"))\n})\n</code></pre>\n<p>Or:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.2\"\n\n#cetz.canvas({\n  import cetz.draw: *\n\n  set-transform(\n    ((1,0,0,0),\n     (0,-1,0,0),\n     (0,0,1,0),\n     (0,0,0,1)))\n\n  line((0,1), (0,0), (1,0), mark: (start: \"&gt;\", end: \"&gt;\"))\n})\n</code></pre>\n<p>To remove the shearing.</p>",
      "raw": "You can either use:\n```typ\n#import \"@preview/cetz:0.3.2\"\n\n#cetz.canvas({\n  import cetz.draw: *\n\n  set-transform(none)\n  scale(y: -1)\n\n  line((0,1), (0,0), (1,0), mark: (start: \">\", end: \">\"))\n})\n```\n\nOr:\n```typ\n#import \"@preview/cetz:0.3.2\"\n\n#cetz.canvas({\n  import cetz.draw: *\n\n  set-transform(\n    ((1,0,0,0),\n     (0,-1,0,0),\n     (0,0,1,0),\n     (0,0,0,1)))\n\n  line((0,1), (0,0), (1,0), mark: (start: \">\", end: \">\"))\n})\n```\nTo remove the shearing.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 19,
      "score": 53.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 72
    }
  ],
  "scraped_at": "2025-06-10T09:52:21.240317"
}