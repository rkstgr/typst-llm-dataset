{
  "topic_metadata": {
    "id": 1678,
    "title": "How to format datetime to show for example \"5th of January 2020\"?",
    "slug": "how-to-format-datetime-to-show-for-example-5th-of-january-2020",
    "posts_count": 8,
    "created_at": "2024-11-11T19:44:17.252Z",
    "last_posted_at": "2024-11-11T21:21:41.101Z",
    "views": 286,
    "like_count": 6,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "LordBaryhobal",
    "tags": [],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 500
  },
  "posts": [
    {
      "id": 5505,
      "post_number": 1,
      "username": "AhmedSalih",
      "name": "",
      "created_at": "2024-11-11T19:44:17.484Z",
      "updated_at": "2024-11-11T19:44:40.814Z",
      "cooked": "<p>Hello!</p>\n<p>I have read through the documentation of <code>datetime</code> in <code>typst</code> here (<a href=\"https://typst.app/docs/reference/foundations/datetime/\" class=\"inline-onebox\">Datetime Type – Typst Documentation</a>) and gotten to this:</p>\n<pre><code class=\"lang-auto\">datetime.today().display(\"[day] of [month repr:long] [year]\")\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/c/c9b01d60fbbf3631a3eb907e5fec0254afab8bc1.png\" alt=\"image\" data-base62-sha1=\"sMdikEzdWsciECrae5H2RgvArWV\" width=\"192\" height=\"39\"></p>\n<p>But how can I get it to do correctly, the 2nd, 3rd, 10th, 15th of a month etc. so it comes out as <code>5th of January 2020</code> for example?</p>\n<p>Kind regards</p>",
      "raw": "Hello!\n\nI have read through the documentation of `datetime` in `typst` here (https://typst.app/docs/reference/foundations/datetime/) and gotten to this:\n\n```\ndatetime.today().display(\"[day] of [month repr:long] [year]\")\n```\n![image|192x39](upload://sMdikEzdWsciECrae5H2RgvArWV.png)\n\nBut how can I get it to do correctly, the 2nd, 3rd, 10th, 15th of a month etc. so it comes out as `5th of January 2020` for example?\n\nKind regards",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 1241.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 786
    },
    {
      "id": 5509,
      "post_number": 2,
      "username": "LordBaryhobal",
      "name": "Baryhobal",
      "created_at": "2024-11-11T20:14:30.164Z",
      "updated_at": "2024-11-11T21:15:32.926Z",
      "cooked": "<p>You will have to manually find the appropriate suffix<br>\nSomething like this should work for your needs</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let my-date(..args) = {\n  let date = if args.pos().len() == 0 {\n    datetime.today()\n  } else {\n    args.pos().first()\n  }\n  let day = date.day()\n  let suffix = if day in (11, 12, 13) { \"th\" } else {\n    (\"st\", \"nd\", \"rd\").at(calc.rem(day - 1, 10), default: \"th\")\n  }\n  date.display(\"[day padding:none]\" + suffix + \" of [month repr:long] [year]\")\n}\nToday: #my-date()\\\nCustom date: #my-date(datetime(year: 2020, month: 1, day: 5))\n</code></pre>\n<p>EDIT: implemented Eric’s fix</p>",
      "raw": "You will have to manually find the appropriate suffix\nSomething like this should work for your needs\n```typ\n#let my-date(..args) = {\n  let date = if args.pos().len() == 0 {\n    datetime.today()\n  } else {\n    args.pos().first()\n  }\n  let day = date.day()\n  let suffix = if day in (11, 12, 13) { \"th\" } else {\n    (\"st\", \"nd\", \"rd\").at(calc.rem(day - 1, 10), default: \"th\")\n  }\n  date.display(\"[day padding:none]\" + suffix + \" of [month repr:long] [year]\")\n}\nToday: #my-date()\\\nCustom date: #my-date(datetime(year: 2020, month: 1, day: 5))\n```\n\nEDIT: implemented Eric's fix",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 29,
      "score": 35.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 585
    },
    {
      "id": 5513,
      "post_number": 3,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-11-11T20:32:23.412Z",
      "updated_at": "2024-11-11T21:09:22.456Z",
      "cooked": "<p>Watch out when determining the suffix, you currently have an off-by-one error at the start of the month, and wrong suffixes for 21, 22, 23 and 31 ;)</p>\n<p>Something like this should do it</p>\n<pre data-code-wrap=\"typc\"><code class=\"lang-typc\">let suffix = if day in (11, 12, 13) { \"th\" } else {\n  (\"st\", \"nd\", \"rd\").at(calc.rem(day - 1, 10), default: \"th\")\n}\n</code></pre>",
      "raw": "Watch out when determining the suffix, you currently have an off-by-one error at the start of the month, and wrong suffixes for 21, 22, 23 and 31 ;)\n\nSomething like this should do it\n```typc\nlet suffix = if day in (11, 12, 13) { \"th\" } else {\n  (\"st\", \"nd\", \"rd\").at(calc.rem(day - 1, 10), default: \"th\")\n}\n```",
      "reply_to_post_number": 2,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 35.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 5514,
      "post_number": 4,
      "username": "LordBaryhobal",
      "name": "Baryhobal",
      "created_at": "2024-11-11T20:34:19.630Z",
      "updated_at": "2024-11-11T20:34:19.630Z",
      "cooked": "<p><img src=\"https://forum.typst.app/images/emoji/apple/man_facepalming.png?v=12\" title=\":man_facepalming:\" class=\"emoji\" alt=\":man_facepalming:\" loading=\"lazy\" width=\"20\" height=\"20\"> <img src=\"https://forum.typst.app/images/emoji/apple/man_facepalming.png?v=12\" title=\":man_facepalming:\" class=\"emoji\" alt=\":man_facepalming:\" loading=\"lazy\" width=\"20\" height=\"20\"> <img src=\"https://forum.typst.app/images/emoji/apple/man_facepalming.png?v=12\" title=\":man_facepalming:\" class=\"emoji\" alt=\":man_facepalming:\" loading=\"lazy\" width=\"20\" height=\"20\"> indeed, thank you for your correction <img src=\"https://forum.typst.app/images/emoji/apple/sweat_smile.png?v=12\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": ":man_facepalming: :man_facepalming: :man_facepalming: indeed, thank you for your correction :sweat_smile:",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 5.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 585
    },
    {
      "id": 5516,
      "post_number": 5,
      "username": "AhmedSalih",
      "name": "",
      "created_at": "2024-11-11T21:02:57.387Z",
      "updated_at": "2024-11-11T21:07:04.919Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Eric\" data-post=\"3\" data-topic=\"1678\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/eric/48/87_2.png\" class=\"avatar\"> Eric:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">let suffix = if day in (11, 12, 13) { \"th\" } else {\n  (\"st\", \"nd\", \"rd\").at(calc.rem(day, 10) - 1, default: \"th\")\n}\n</code></pre>\n</blockquote>\n</aside>\n<p>This errors with 10 though:</p>\n<pre><code class=\"lang-auto\">my-date(datetime(year: 2020, month: 1, day: 10))\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/3/3728ebbb707b51c4822fc37d6cddaedf28b3ec95.png\" alt=\"image\" data-base62-sha1=\"7RXVRMww76VSOMQWYjt6EyFqL5z\" width=\"197\" height=\"54\"></p>\n<p>Any suggestions :) ?</p>\n<p>EDIT: ChatGPT believes this to be a solution which works according to my test:</p>\n<pre><code class=\"lang-auto\">  let my_date(..args) = {\n    // Determine the date, defaulting to today if no argument is provided.\n    let date = if args.pos().len() == 0 {\n      datetime.today()\n    } else {\n      args.pos().first()\n    }\n    \n    // Calculate the day and determine the correct suffix.\n    let day = date.day()\n    let suffix = if day in (11, 12, 13) {\n      \"th\"\n    } else if calc.rem(day, 10) == 1 {\n      \"st\"\n    } else if calc.rem(day, 10) == 2 {\n      \"nd\"\n    } else if calc.rem(day, 10) == 3 {\n      \"rd\"\n    } else {\n      \"th\"\n    }\n\n  // Display the formatted date.\n  date.display(\"[day padding:none]\" + suffix + \" of [month repr:long] [year]\")\n}\n</code></pre>",
      "raw": "[quote=\"Eric, post:3, topic:1678\"]\n```\nlet suffix = if day in (11, 12, 13) { \"th\" } else {\n  (\"st\", \"nd\", \"rd\").at(calc.rem(day, 10) - 1, default: \"th\")\n}\n```\n[/quote]\n\nThis errors with 10 though:\n\n```\nmy-date(datetime(year: 2020, month: 1, day: 10))\n```\n\n![image|197x54](upload://7RXVRMww76VSOMQWYjt6EyFqL5z.png)\n\nAny suggestions :) ?\n\nEDIT: ChatGPT believes this to be a solution which works according to my test:\n\n```\n  let my_date(..args) = {\n    // Determine the date, defaulting to today if no argument is provided.\n    let date = if args.pos().len() == 0 {\n      datetime.today()\n    } else {\n      args.pos().first()\n    }\n    \n    // Calculate the day and determine the correct suffix.\n    let day = date.day()\n    let suffix = if day in (11, 12, 13) {\n      \"th\"\n    } else if calc.rem(day, 10) == 1 {\n      \"st\"\n    } else if calc.rem(day, 10) == 2 {\n      \"nd\"\n    } else if calc.rem(day, 10) == 3 {\n      \"rd\"\n    } else {\n      \"th\"\n    }\n\n  // Display the formatted date.\n  date.display(\"[day padding:none]\" + suffix + \" of [month repr:long] [year]\")\n}\n```",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 27,
      "score": 10.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 786
    },
    {
      "id": 5518,
      "post_number": 6,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-11-11T21:09:30.635Z",
      "updated_at": "2024-11-11T21:09:30.635Z",
      "cooked": "<p>Oops, you’re right, it should be <code>calc.rem(day - 1, 10)</code> instead of <code>calc.rem(day, 10) - 1</code>, I have edited my above reply. Your more explicit code by ChatGPT also works of course!</p>",
      "raw": "Oops, you're right, it should be `calc.rem(day - 1, 10)` instead of `calc.rem(day, 10) - 1`, I have edited my above reply. Your more explicit code by ChatGPT also works of course!",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 24.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 5521,
      "post_number": 7,
      "username": "AhmedSalih",
      "name": "",
      "created_at": "2024-11-11T21:17:49.559Z",
      "updated_at": "2024-11-11T21:17:49.559Z",
      "cooked": "<p>Thank you Eric, I have used your fix with the solution provided above</p>\n<p>Thank you to both of you! :)</p>",
      "raw": "Thank you Eric, I have used your fix with the solution provided above\n\nThank you to both of you! :)",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 786
    },
    {
      "id": 5522,
      "post_number": 8,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-11-11T21:21:41.101Z",
      "updated_at": "2024-11-11T21:22:29.790Z",
      "cooked": "<p>May I suggest the <code>nth</code> package? <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/universe/package/nth/\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/universe/package/nth/\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/universe/package/nth/\" target=\"_blank\" rel=\"noopener\">nth – Typst Universe</a></h3>\n\n  <p>Add english ordinals to numbers, eg. 1st, 2nd, 3rd, 4th.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>then you don’t have to do this logic yourself:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/nth:1.0.1\": *\n\n#let my-date(date) = nth(date.day()) + date.display(\" of [month repr:long] [year]\")\n\nToday: #my-date(datetime.today())\\\nCustom date: #my-date(datetime(year: 2020, month: 1, day: 5))\n</code></pre>\n<p>or replace <code>nth</code> with <code>nths</code> if you want superscript</p>",
      "raw": "May I suggest the `nth` package? :slight_smile: \n\nhttps://typst.app/universe/package/nth/\n\nthen you don't have to do this logic yourself:\n```typ\n#import \"@preview/nth:1.0.1\": *\n\n#let my-date(date) = nth(date.day()) + date.display(\" of [month repr:long] [year]\")\n\nToday: #my-date(datetime.today())\\\nCustom date: #my-date(datetime(year: 2020, month: 1, day: 5))\n```\n\nor replace `nth` with `nths` if you want superscript",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 19,
      "score": 58.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:55:06.522030"
}