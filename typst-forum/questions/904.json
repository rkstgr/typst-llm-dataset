{
  "topic_metadata": {
    "id": 904,
    "title": "How to create a pagebreak before every depth 1 heading except for the outline?",
    "slug": "how-to-create-a-pagebreak-before-every-depth-1-heading-except-for-the-outline",
    "posts_count": 5,
    "created_at": "2024-10-03T16:24:46.790Z",
    "last_posted_at": "2024-10-04T15:38:32.849Z",
    "views": 631,
    "like_count": 7,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "layout",
      "page"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 274
  },
  "posts": [
    {
      "id": 3344,
      "post_number": 1,
      "username": "skittles1412",
      "name": "skittles1412",
      "created_at": "2024-10-03T16:24:46.893Z",
      "updated_at": "2024-10-10T14:41:07.456Z",
      "cooked": "<p>Say I have something like</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// some show rule here\nstuff here\n#outline()\nmore stuff\n= My first heading\n</code></pre>\n<p>What show rule can help me add a <code>#pagebreak(weak: true)</code> before things like “My first heading” but not the outline?</p>\n<p>Currently I have something like</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(depth: 1): body =&gt; {    \n  pagebreak(weak: true)\n  body\n}\n</code></pre>\n<p>but this also seems to put a pagebreak before the outline.</p>",
      "raw": "Say I have something like\n```typ\n// some show rule here\nstuff here\n#outline()\nmore stuff\n= My first heading\n```\n\nWhat show rule can help me add a `#pagebreak(weak: true)` before things like \"My first heading\" but not the outline?\n\nCurrently I have something like\n```typ\n#show heading.where(depth: 1): body => {    \n  pagebreak(weak: true)\n  body\n}\n```\nbut this also seems to put a pagebreak before the outline.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 57,
      "score": 2976.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 528
    },
    {
      "id": 3346,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-10-03T18:32:20.500Z",
      "updated_at": "2024-10-03T18:32:20.500Z",
      "cooked": "<p>Would it be an option to just put the show rule after the outline?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">stuff here\n#outline()\nmore stuff\n\n#show heading.where(depth: 1): ...\n\n= My first heading\n</code></pre>\n<p>If this is not possible (maybe because you’re editing a template), you could use a state to store whether you are currently in the outline, and use that to determine whether you want to insert a page break:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline: it =&gt; {\n  state(\"in-outline\").update(true)\n  it\n  state(\"in-outline\").update(false)\n}\n\n#show heading.where(depth: 1): it =&gt; {\n  if not state(\"in-outline\", false).get() {\n    pagebreak(weak: true)\n  }\n  it\n}\n</code></pre>",
      "raw": "Would it be an option to just put the show rule after the outline?\n```typ\nstuff here\n#outline()\nmore stuff\n\n#show heading.where(depth: 1): ...\n\n= My first heading\n```\n\nIf this is not possible (maybe because you're editing a template), you could use a state to store whether you are currently in the outline, and use that to determine whether you want to insert a page break:\n```typ\n#show outline: it => {\n  state(\"in-outline\").update(true)\n  it\n  state(\"in-outline\").update(false)\n}\n\n#show heading.where(depth: 1): it => {\n  if not state(\"in-outline\", false).get() {\n    pagebreak(weak: true)\n  }\n  it\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 55,
      "score": 66.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 3347,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-03T19:16:44.606Z",
      "updated_at": "2024-10-04T05:17:14.634Z",
      "cooked": "<p>Although <a class=\"mention\" href=\"/u/eric\">@Eric</a>’s answer is more targeted, maybe the following works for you:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(depth: 1, outlined: true): ...\n</code></pre>\n<p>Since the outline itself isn’t outlined, it will not be affected. Of course, this is only an option if a) you have no other non-outlined level 1 headings or b) this is actually closer to what you want. If it’s only a), I would probably still prefer Eric’s solution.</p>",
      "raw": "Although @Eric's answer is more targeted, maybe the following works for you:\n```typ\n#show heading.where(depth: 1, outlined: true): ...\n```\nSince the outline itself isn't outlined, it will not be affected. Of course, this is only an option if a) you have no other non-outlined level 1 headings or b) this is actually closer to what you want. If it's only a), I would probably still prefer Eric's solution.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 51,
      "score": 50.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 3401,
      "post_number": 4,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-04T08:31:26.489Z",
      "updated_at": "2024-10-04T08:31:26.489Z",
      "cooked": "<p>This suggests the following slightly hacky solution <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline: set heading(supplement: [Outline])\n#show heading.where(depth: 1): it =&gt; {\n  if it.supplement != [Outline] {\n    pagebreak(weak: true)\n  }\n  it\n}\n</code></pre>",
      "raw": "This suggests the following slightly hacky solution :slight_smile: \n```typ\n#show outline: set heading(supplement: [Outline])\n#show heading.where(depth: 1): it => {\n  if it.supplement != [Outline] {\n    pagebreak(weak: true)\n  }\n  it\n}\n```",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 40,
      "score": 43.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 3411,
      "post_number": 5,
      "username": "skittles1412",
      "name": "skittles1412",
      "created_at": "2024-10-04T15:38:32.849Z",
      "updated_at": "2024-10-04T15:38:32.849Z",
      "cooked": "<p>Thank you all for the help!</p>",
      "raw": "Thank you all for the help!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 32.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 528
    }
  ],
  "scraped_at": "2025-06-10T09:57:28.184070"
}