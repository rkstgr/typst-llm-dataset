{
  "topic_metadata": {
    "id": 976,
    "title": "How to customize the styling of caption supplements?",
    "slug": "how-to-customize-the-styling-of-caption-supplements",
    "posts_count": 11,
    "created_at": "2024-10-08T08:03:19.241Z",
    "last_posted_at": "2025-01-15T11:34:37.209Z",
    "views": 530,
    "like_count": 5,
    "reply_count": 9,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [
      "figures"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 483
  },
  "posts": [
    {
      "id": 3543,
      "post_number": 1,
      "username": "talb",
      "name": "talb",
      "created_at": "2024-10-08T08:03:19.432Z",
      "updated_at": "2024-10-08T08:03:19.432Z",
      "cooked": "<p>I want to have figures with a bold supplement+number+separator, but I don’t want my references to the figure to be in bold.</p>\n<p>I have multiple figure types (Figure, Algorithm, Table) so I want the solution to be DRY if possible (I don’t want to repeat the same boilerplate for every figure/type).</p>\n<p>However, the following code does not work, as it does not increment the figure number in the caption (but it does in the figure references):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure.caption: it =&gt; box(\n  inset: (left: 1em, right: 1em),\n  align(left)[\n    *#it.supplement~#it.numbering#it.separator*#it.body\n  ]\n)\n\n#figure(\n  box(stroke: 1pt, inset: 5pt)[This is a figure],\n  caption: [This is a caption]\n) &lt;fig1&gt;\n\n#figure(\n  box(stroke: 1pt, inset: 5pt)[This is a figure],\n  caption: [This is a caption]\n) &lt;fig2&gt;\n\n@fig1 @fig2\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/84b0c144688cd757f9eaf3c0350b8ddbb1070268.png\" data-download-href=\"https://forum.typst.app/uploads/default/84b0c144688cd757f9eaf3c0350b8ddbb1070268\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/84b0c144688cd757f9eaf3c0350b8ddbb1070268_2_690x217.png\" alt=\"image\" data-base62-sha1=\"iVPIKJ5hPu0gme2FCC5V1eblmVW\" width=\"690\" height=\"217\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/84b0c144688cd757f9eaf3c0350b8ddbb1070268_2_690x217.png, https://forum.typst.app/uploads/default/original/1X/84b0c144688cd757f9eaf3c0350b8ddbb1070268.png 1.5x, https://forum.typst.app/uploads/default/original/1X/84b0c144688cd757f9eaf3c0350b8ddbb1070268.png 2x\" data-dominant-color=\"FBFBFB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">701×221 12.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>How to fix this?</p>",
      "raw": "I want to have figures with a bold supplement+number+separator, but I don't want my references to the figure to be in bold.\n\nI have multiple figure types (Figure, Algorithm, Table) so I want the solution to be DRY if possible (I don't want to repeat the same boilerplate for every figure/type).\n\nHowever, the following code does not work, as it does not increment the figure number in the caption (but it does in the figure references):\n\n```typ\n#show figure.caption: it => box(\n  inset: (left: 1em, right: 1em),\n  align(left)[\n    *#it.supplement~#it.numbering#it.separator*#it.body\n  ]\n)\n\n#figure(\n  box(stroke: 1pt, inset: 5pt)[This is a figure],\n  caption: [This is a caption]\n) <fig1>\n\n#figure(\n  box(stroke: 1pt, inset: 5pt)[This is a figure],\n  caption: [This is a caption]\n) <fig2>\n\n@fig1 @fig2\n```\n\n![image|690x217](upload://iVPIKJ5hPu0gme2FCC5V1eblmVW.png)\n\n\nHow to fix this?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 56,
      "score": 2471.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 3545,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-10-08T08:31:35.844Z",
      "updated_at": "2024-10-08T08:31:35.844Z",
      "cooked": "<p>Hello, the <code>it.numbering</code> is actually the numbering scheme. You have to use <code>it.counter.display()</code>.<br>\nHere is how I would write it</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure.caption: it =&gt; context [\n  *#it.supplement~#it.counter.display()#it.separator*#it.body\n]\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/22c209496da21637a192cda99da205021709fe05.png\" alt=\"image\" data-base62-sha1=\"4XtXcfKSTaw8Szq134f1wmcmVOR\" width=\"270\" height=\"166\"></p>",
      "raw": "Hello, the `it.numbering` is actually the numbering scheme. You have to use `it.counter.display()`.\nHere is how I would write it\n```typ\n#show figure.caption: it => context [\n  *#it.supplement~#it.counter.display()#it.separator*#it.body\n]\n```\n![image|270x166](upload://4XtXcfKSTaw8Szq134f1wmcmVOR.png)",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 2,
      "reads": 54,
      "score": 90.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 3559,
      "post_number": 3,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-08T12:10:16.585Z",
      "updated_at": "2024-10-08T12:10:16.585Z",
      "cooked": "<p>Regarding <code>#it.counter().display()</code>, be careful if you use it with floating figures, see <a href=\"https://forum.typst.app/t/how-to-customize-the-style-of-equation-numbering/641/8\" class=\"inline-onebox\">How to customize the style of equation numbering? - #8 by xkevio</a>.</p>",
      "raw": "Regarding `#it.counter().display()`, be careful if you use it with floating figures, see https://forum.typst.app/t/how-to-customize-the-style-of-equation-numbering/641/8?u=xkevio.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 50,
      "score": 90.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 7533,
      "post_number": 4,
      "username": "chxp",
      "name": "chxp",
      "created_at": "2025-01-15T09:25:50.776Z",
      "updated_at": "2025-01-15T09:26:31.690Z",
      "cooked": "<p>Hey, the <code>#it.counter.display(it.numbering)</code> is outdated in <code>typst 0.12</code>. Thus, how to use <code>context</code> to rewrite the script? Thanks.</p>",
      "raw": "Hey, the `#it.counter.display(it.numbering)` is outdated in `typst 0.12`. Thus, how to use `context` to rewrite the script? Thanks.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 22.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1055
    },
    {
      "id": 7537,
      "post_number": 5,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-01-15T09:47:06.684Z",
      "updated_at": "2025-01-15T09:47:17.664Z",
      "cooked": "<p>Use <code>#context it.counter().display(it.numbering)</code> instead</p>",
      "raw": "Use `#context it.counter().display(it.numbering)` instead",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 12.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 7538,
      "post_number": 6,
      "username": "chxp",
      "name": "chxp",
      "created_at": "2025-01-15T10:44:07.731Z",
      "updated_at": "2025-01-15T10:44:07.731Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"quachpas\" data-post=\"5\" data-topic=\"976\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/q/662200/48.png\" class=\"avatar\"> quachpas:</div>\n<blockquote>\n<p><a class=\"hashtag-cooked\" href=\"/tag/context\" data-type=\"tag\" data-slug=\"context\" data-id=\"61\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>context</span></a> it.counter().display(it.numbering)</p>\n</blockquote>\n</aside>\n<p>Could you provide a complete script? I found it hard to recognize the <code>context</code>.</p>\n<p>The following is wrong…</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show figure.caption: it =&gt; [\n    #text(weight: \"bold\")[\n        #it.supplement S #context it.counter().display(it.numbering).~\n    ]#it.body\n]\n</code></pre>",
      "raw": "[quote=\"quachpas, post:5, topic:976\"]\n#context it.counter().display(it.numbering)\n[/quote]\n\nCould you provide a complete script? I found it hard to recognize the `context`.\n\nThe following is wrong...\n```typst\n#show figure.caption: it => [\n    #text(weight: \"bold\")[\n        #it.supplement S #context it.counter().display(it.numbering).~\n    ]#it.body\n]\n```",
      "reply_to_post_number": 5,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 0,
      "reads": 34,
      "score": 16.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1055
    },
    {
      "id": 7539,
      "post_number": 7,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-01-15T10:55:49.321Z",
      "updated_at": "2025-01-15T10:55:49.321Z",
      "cooked": "<p>Can you tell me what the error is, or what is wrong?</p>",
      "raw": "Can you tell me what the error is, or what is wrong?",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 6.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 7541,
      "post_number": 8,
      "username": "chxp",
      "name": "chxp",
      "created_at": "2025-01-15T11:10:26.651Z",
      "updated_at": "2025-01-15T11:10:26.651Z",
      "cooked": "<p>code here:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(\"a4\", margin: auto)\n\n#show figure.caption: it =&gt; [\n    [*#it.supplement S#context it.counter().display(it.numbering).*~]#it.body\n]\n\n// figure\n#figure(\n    rect(height:6cm, width: 11cm, fill: red),\n    caption: [A curious figure.],\n) &lt;fig1&gt;\n\n\n#figure(\n    rect(height:10cm, width: 5cm, fill: blue),\n    caption: [A curious figure.],\n) &lt;fig2&gt;\n</code></pre>\n<p>with error:</p>\n<pre><code class=\"lang-auto\">error: type content has no method `counter`\n  ┌─ ask2.typ:4:34\n  │\n4 │     [*#it.supplement S#context it.counter().display(it.numbering).*~]#it.body\n  │                                   ^^^^^^^\n  │\n  = hint: did you mean to access the field `counter`?\n</code></pre>",
      "raw": "code here: \n```typst\n#set page(\"a4\", margin: auto)\n\n#show figure.caption: it => [\n    [*#it.supplement S#context it.counter().display(it.numbering).*~]#it.body\n]\n\n// figure\n#figure(\n    rect(height:6cm, width: 11cm, fill: red),\n    caption: [A curious figure.],\n) <fig1>\n\n\n#figure(\n    rect(height:10cm, width: 5cm, fill: blue),\n    caption: [A curious figure.],\n) <fig2>\n```\n\nwith error:\n```\nerror: type content has no method `counter`\n  ┌─ ask2.typ:4:34\n  │\n4 │     [*#it.supplement S#context it.counter().display(it.numbering).*~]#it.body\n  │                                   ^^^^^^^\n  │\n  = hint: did you mean to access the field `counter`?\n```",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 21.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1055
    },
    {
      "id": 7544,
      "post_number": 9,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-01-15T11:24:53.634Z",
      "updated_at": "2025-01-15T11:24:53.634Z",
      "cooked": "<p>My bad, I did write <code>counter()</code> instead of <code>counter</code>, but I don’t understand what your original issue was?</p>",
      "raw": "My bad, I did write `counter()` instead of `counter`, but I don't understand what your original issue was?",
      "reply_to_post_number": 8,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 11.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 7545,
      "post_number": 10,
      "username": "chxp",
      "name": "chxp",
      "created_at": "2025-01-15T11:32:33.895Z",
      "updated_at": "2025-01-15T11:32:33.895Z",
      "cooked": "<p>I just want you to update your answer to this question by using <code>context</code>, avoiding the warning message “warning: <code>counter.display</code> without context is deprecated” in <code>typst 0.12</code>.</p>\n<p>I found just removing the brackets of <code>counter</code> is okay. Such as <code>#context it.counter.display(it.numbering)</code> or <code>#context(it.counter.display(it.numbering))</code> both works fine.</p>\n<p>Thanks for your answer.</p>",
      "raw": "I just want you to update your answer to this question by using `context`, avoiding the warning message \"warning: `counter.display` without context is deprecated\" in `typst 0.12`.\n\nI found just removing the brackets of `counter` is okay. Such as `#context it.counter.display(it.numbering)` or `#context(it.counter.display(it.numbering))` both works fine.\n\nThanks for your answer.",
      "reply_to_post_number": 9,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 26.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1055
    },
    {
      "id": 7546,
      "post_number": 11,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-01-15T11:34:37.209Z",
      "updated_at": "2025-01-15T11:34:37.209Z",
      "cooked": "<p>The answer already is a context expression</p>",
      "raw": "The answer already is a context expression",
      "reply_to_post_number": 10,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 21.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:57:13.184046"
}