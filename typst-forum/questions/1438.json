{
  "topic_metadata": {
    "id": 1438,
    "title": "How to reference a Figure with modified Padding?",
    "slug": "how-to-reference-a-figure-with-modified-padding",
    "posts_count": 5,
    "created_at": "2024-10-30T17:12:24.340Z",
    "last_posted_at": "2024-10-31T10:33:34.423Z",
    "views": 228,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 564
  },
  "posts": [
    {
      "id": 4862,
      "post_number": 1,
      "username": "sereksim",
      "name": "sereksim",
      "created_at": "2024-10-30T17:12:24.470Z",
      "updated_at": "2024-10-31T04:45:43.143Z",
      "cooked": "<p>To improve the layout of my document I want to increase the space between the last line of text and the beginning of an image or table. I tried adding padding to the figures, but I encountered some problems regarding the combination of the padding and referencing the figures:</p>\n<p>Consider this example:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#outline(\n  title: [Images],\n  target: figure.where(kind: image),\n),\n\n#lorem(50) @myfigure #lorem(50)\n\n#figure(\n  image(\"images/image.svg\", alt: \"this is an image\", width: 75%),\n  caption: [this is an image],\n)&lt;myfigure&gt;\n\n#lorem(50)\n</code></pre>\n<p>As far as i know, there are different options to add padding to this figure:</p>\n<ol>\n<li>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#pad(\n  y: 7.5pt,\n  figure(\n    image(\"images/image.svg\", alt: \"this is an image\", width: 75%),\n    caption: [this is an image],\n  ),\n) \n</code></pre>\n<p>Using this option, there is no way to add the reference <code>&lt;myfigure&gt;</code>. It is not possible to add a reference to a padding (Error: <code>cannot reference pad</code>) and it is not possible to add a reference to a figure inside of a padding (Error: <code>expected comma</code>)</p>\n</li>\n<li>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#figure(\n  pad(\n    image(\"images/Bussysteme.svg\", alt: \"this is an image\", width: 75%), \n    y: 7.5pt,\n  ),\n  caption: [this is an image],\n)&lt;myfigure&gt;,\n</code></pre>\n<p>Now the reference works, but the padding is only around the image, not around the whole figure, including the caption. The caption still is to close to the text and further away from the image.</p>\n</li>\n<li>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\"> #figure(\n   pad(\n     image(\"images/image.svg\", alt: \"this is an image\", width: 75%), \n     top: 3pt,\n   ),\n   caption: pad([this is an image],bottom:3pt),\n )&lt;myfigure&gt;,\n</code></pre>\n<p>The padding works and the reference works as well, but the padding of the caption is now included in the outline and destroys the layout there.</p>\n</li>\n</ol>\n<p>Is there a different way to combine padding with references?</p>",
      "raw": "To improve the layout of my document I want to increase the space between the last line of text and the beginning of an image or table. I tried adding padding to the figures, but I encountered some problems regarding the combination of the padding and referencing the figures:\n\nConsider this example:\n\n  ```typst\n#outline(\n    title: [Images],\n    target: figure.where(kind: image),\n),\n\n#lorem(50) @myfigure #lorem(50)\n\n#figure(\n    image(\"images/image.svg\", alt: \"this is an image\", width: 75%),\n    caption: [this is an image],\n)<myfigure>\n\n#lorem(50)\n```\n\nAs far as i know, there are different options to add padding to this figure:\n\n1. \n    ```typst \n    #pad(\n      y: 7.5pt,\n      figure(\n        image(\"images/image.svg\", alt: \"this is an image\", width: 75%),\n        caption: [this is an image],\n      ),\n    ) \n    ```\n   Using this option, there is no way to add the reference `<myfigure>`. It is not possible to add a reference to a padding (Error: `cannot reference pad`) and it is not possible to add a reference to a figure inside of a padding (Error: `expected comma`)\n2. \n    ```typst \n    #figure(\n      pad(\n        image(\"images/Bussysteme.svg\", alt: \"this is an image\", width: 75%), \n        y: 7.5pt,\n      ),\n      caption: [this is an image],\n    )<myfigure>,\n    ```\n    Now the reference works, but the padding is only around the image, not around the whole figure, including the caption. The caption still is to close to the text and further away from the image.\n\n3. \n   ```typst\n    #figure(\n      pad(\n        image(\"images/image.svg\", alt: \"this is an image\", width: 75%), \n        top: 3pt,\n      ),\n      caption: pad([this is an image],bottom:3pt),\n    )<myfigure>,\n   ```\n    The padding works and the reference works as well, but the padding of the caption is now included in the outline and destroys the layout there.\n\nIs there a different way to combine padding with references?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 646.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 707
    },
    {
      "id": 4865,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-10-30T18:55:28.104Z",
      "updated_at": "2024-10-30T18:55:28.104Z",
      "cooked": "<p>There is indeed a very simple way to adjust the spacing around the figures. As figures are block elements, you can make use of the <a href=\"https://typst.app/docs/reference/layout/block/#parameters-spacing\"><code>spacing</code>, <code>above</code> and <code>below</code> fields</a> of the <a href=\"https://typst.app/docs/reference/layout/block/\"><code>block</code></a> element. To do that, define a <a href=\"https://typst.app/docs/reference/styling/#show-rules:~:text=With%20show%2Dset,a%20fantasy%20encyclopedia.\">show-set rule</a> on figures:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure: set block(spacing: 1.2em + 3pt)\n</code></pre>\n<p>The default value of the spacing is <code>1.2em</code>, so to increase it by <code>3pt</code>, you can just add them together. You can of course also set it to any other value, so just play around with it!</p>\n<p>Alternatively, you can also use the first approach you mentioned (though I would prefer the above). The label can then still be attached if you put the figure in <a href=\"https://typst.app/docs/reference/syntax/\">markup mode</a>, as the syntax with <code>&lt;...&gt;</code> only works there:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#pad(y: 7.5pt)[\n  #figure(\n    image(...)\n    caption: [this is an image]\n  ) &lt;myfigure&gt;\n]\n</code></pre>",
      "raw": "There is indeed a very simple way to adjust the spacing around the figures. As figures are block elements, you can make use of the [`spacing`, `above` and `below` fields](https://typst.app/docs/reference/layout/block/#parameters-spacing) of the [`block`](https://typst.app/docs/reference/layout/block/) element. To do that, define a [show-set rule](https://typst.app/docs/reference/styling/#show-rules:~:text=With%20show%2Dset,a%20fantasy%20encyclopedia.) on figures:\n```typ\n#show figure: set block(spacing: 1.2em + 3pt)\n```\nThe default value of the spacing is `1.2em`, so to increase it by `3pt`, you can just add them together. You can of course also set it to any other value, so just play around with it!\n\nAlternatively, you can also use the first approach you mentioned (though I would prefer the above). The label can then still be attached if you put the figure in [markup mode](https://typst.app/docs/reference/syntax/), as the syntax with `<...>` only works there:\n```typ\n#pad(y: 7.5pt)[\n  #figure(\n    image(...)\n    caption: [this is an image]\n  ) <myfigure>\n]\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 535.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 4878,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-31T04:45:52.899Z",
      "updated_at": "2024-10-31T04:45:52.899Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/sereksim\">@sereksim</a>, welcome to the forum! I’ve updated your post title to better fit our guidelines for question posts: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your post title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @sereksim, welcome to the forum! I've updated your post title to better fit our guidelines for question posts: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your post title is a question you'd ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 44.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 4881,
      "post_number": 4,
      "username": "sereksim",
      "name": "sereksim",
      "created_at": "2024-10-31T07:45:21.188Z",
      "updated_at": "2024-10-31T07:45:21.188Z",
      "cooked": "<p>Thanks for your answer! The show-set-rule would apply to all figures, while the approach with padding is linked to one specific figure, right?</p>",
      "raw": "Thanks for your answer! The show-set-rule would apply to all figures, while the approach with padding is linked to one specific figure, right?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 707
    },
    {
      "id": 4895,
      "post_number": 5,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-10-31T10:33:34.423Z",
      "updated_at": "2024-10-31T10:33:34.423Z",
      "cooked": "<p>Correct! However, you can also scope show rules to single figures:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#[\n  #show figure: set block(spacing: ...)\n  #figure(...) &lt;myfigure&gt;\n]\n</code></pre>",
      "raw": "Correct! However, you can also scope show rules to single figures:\n```typ\n#[\n  #show figure: set block(spacing: ...)\n  #figure(...) <myfigure>\n]\n```",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    }
  ],
  "scraped_at": "2025-06-10T09:55:44.062645"
}