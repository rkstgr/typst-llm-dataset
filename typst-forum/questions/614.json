{
  "topic_metadata": {
    "id": 614,
    "title": "How to customize the behaviour of how hydra displays a section or heading?",
    "slug": "how-to-customize-the-behaviour-of-how-hydra-displays-a-section-or-heading",
    "posts_count": 5,
    "created_at": "2024-09-23T11:06:05.663Z",
    "last_posted_at": "2024-09-23T15:00:56.101Z",
    "views": 299,
    "like_count": 3,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Tinger",
    "tags": [
      "header-footer",
      "hydra"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 478
  },
  "posts": [
    {
      "id": 2359,
      "post_number": 1,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-23T11:06:05.753Z",
      "updated_at": "2024-09-23T22:14:07.282Z",
      "cooked": "<p>I am using Hydra to display the current chapter’s title. However, I want to customize the output of the hydra() function.</p>\n<p>For chapter &lt;nr&gt; &lt;name&gt; the output is “&lt;nr&gt; &lt;name&gt;”. How can I change this to “Chapter &lt;nr&gt;: &lt;name&gt;”?</p>\n<p>I’d also like to know if Hydra allows me to determine whether a page is empty. I need this information to hide the header on empty pages.</p>\n<p>Thanks in advance!</p>",
      "raw": "I am using Hydra to display the current chapter's title. However, I want to customize the output of the hydra() function. \n\nFor chapter \\<nr> \\<name> the output is \"\\<nr> \\<name>\". How can I change this to \"Chapter \\<nr>: \\<name>\"?\n\nI'd also like to know if Hydra allows me to determine whether a page is empty. I need this information to hide the header on empty pages. \n\nThanks in advance!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 61,
      "score": 1022.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2366,
      "post_number": 2,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-09-23T11:27:33.667Z",
      "updated_at": "2024-09-23T13:54:20.354Z",
      "cooked": "<p>Hey there, thank you for using hydra!</p>\n<p>You can customize the behavior of how <code>hydra</code> displays the section or heading it found by passing a function to its <code>display</code> parameter. It works similar to a show rule, but also receives the internal context object, we’ll ignore this as its not relevant for the question.</p>\n<p>Assuming you’re chapters are headings as they usually are you can do it like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(header: hydra(display: (_, it) =&gt; {\n  [Chapter ]\n  numbering(it.numbering, ..counter(heading).at(it.location()))\n  [: ]\n  it.body\n}))\n</code></pre>\n<p>The first discarded parameter <code>_</code> is said context object, the second parameter <code>it</code> is the heading that <code>hydra</code> believes to be relevant at the current position.</p>\n<blockquote>\n<p>I’d also like to know if Hydra allows me to determine whether a page is empty. I need this information to hide the header on empty pages.</p>\n</blockquote>\n<p>Not at the moment, but there are other ways to completely ignore the page header, see <a href=\"https://github.com/typst/typst/issues/2722#issuecomment-1911150996\" rel=\"noopener nofollow ugc\">here</a> and <a href=\"https://github.com/typst/typst/issues/2722#issuecomment-2215031347\" rel=\"noopener nofollow ugc\">here</a> for some workaround to skip the header there.</p>",
      "raw": "Hey there, thank you for using hydra!\n\nYou can customize the behavior of how `hydra` displays the section or heading it found by passing a function to its `display` parameter. It works similar to a show rule, but also receives the internal context object, we'll ignore this as its not relevant for the question.\n\nAssuming you're chapters are headings as they usually are you can do it like this:\n```typ\n#set page(header: hydra(display: (_, it) => {\n  [Chapter ]\n  numbering(it.numbering, ..counter(heading).at(it.location()))\n  [: ]\n  it.body\n}))\n```\n\nThe first discarded parameter `_` is said context object, the second parameter `it` is the heading that `hydra` believes to be relevant at the current position.\n\n> I’d also like to know if Hydra allows me to determine whether a page is empty. I need this information to hide the header on empty pages.\n\nNot at the moment, but there are other ways to completely ignore the page header, see [here](https://github.com/typst/typst/issues/2722#issuecomment-1911150996) and [here](https://github.com/typst/typst/issues/2722#issuecomment-2215031347) for some workaround to skip the header there.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 60,
      "score": 151.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 29
    },
    {
      "id": 2373,
      "post_number": 3,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-23T12:13:32.992Z",
      "updated_at": "2024-09-23T12:15:35.200Z",
      "cooked": "<p>Thanks for the answer, but I don’t get it to work.</p>\n<p>a) always shows the correct heading number</p>\n<pre><code class=\"lang-auto\">hydra(1, skip-starting: false)\n</code></pre>\n<p>b) doesn’t work. Starts with chapter 0, seems to always be one page behind</p>\n<pre><code class=\"lang-auto\">hydra(1, skip-starting: false, display: (_, it) =&gt; {\n        \"Chapter \" + counter(heading.where(level: 1)).display() + \": \" + it.body\n      })\n</code></pre>\n<p>What am I missing?</p>\n<p>Edit: A little more context:</p>\n<pre><code class=\"lang-auto\">  set page(numbering: \"1\", number-align: top, header: context{   \n    if calc.odd(here().page()) [  \n      #hydra(1, skip-starting: false, display: (_, it) =&gt; {\n        \"Chapter \" + counter(heading.where(level: 1)).display() + \": \" + it.body\n      })  \n      #h(1fr) \n      #counter(page).display(\"1\")\n    ] else [ \n      #counter(page).display(\"1\") \n      #h(1fr) \n      #hydra(1, skip-starting: false, display: (_, it) =&gt; {\n        \"Chapter \" + counter(heading.where(level: 1)).display() + \": \" + it.body\n      }) \n    ]\n  })\n</code></pre>",
      "raw": "Thanks for the answer, but I don't get it to work.\n\na) always shows the correct heading number\n```\nhydra(1, skip-starting: false)\n```\nb) doesn't work. Starts with chapter 0, seems to always be one page behind\n```\nhydra(1, skip-starting: false, display: (_, it) => {\n        \"Chapter \" + counter(heading.where(level: 1)).display() + \": \" + it.body\n      })\n```\n\nWhat am I missing?\n\n\nEdit: A little more context:\n```\n  set page(numbering: \"1\", number-align: top, header: context{   \n    if calc.odd(here().page()) [  \n      #hydra(1, skip-starting: false, display: (_, it) => {\n        \"Chapter \" + counter(heading.where(level: 1)).display() + \": \" + it.body\n      })  \n      #h(1fr) \n      #counter(page).display(\"1\")\n    ] else [ \n      #counter(page).display(\"1\") \n      #h(1fr) \n      #hydra(1, skip-starting: false, display: (_, it) => {\n        \"Chapter \" + counter(heading.where(level: 1)).display() + \": \" + it.body\n      }) \n    ]\n  })\n```",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 53,
      "score": 20.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2382,
      "post_number": 4,
      "username": "Tinger",
      "name": "Tinger",
      "created_at": "2024-09-23T13:53:45.481Z",
      "updated_at": "2024-09-23T13:53:45.481Z",
      "cooked": "<p>Oh that’s on me! I actually made a mistake here, the reason the counter is one page behind is that I forgot to pass the correct location to the counter display. It should be <code>numbering(it.numbering, ..counter(heading).at(it.location()))</code>. Indeed this is the counter the default display uses too, I forgot about that <img src=\"https://forum.typst.app/images/emoji/apple/sweat_smile.png?v=12\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\">. Keep in mind that this assumes all headings are numbered, you may need additional checks if you change the numbering or include other heading ranges.</p>\n<p>I have updated the original answer.</p>",
      "raw": "Oh that's on me! I actually made a mistake here, the reason the counter is one page behind is that I forgot to pass the correct location to the counter display. It should be `numbering(it.numbering, ..counter(heading).at(it.location()))`. Indeed this is the counter the default display uses too, I forgot about that :sweat_smile:. Keep in mind that this assumes all headings are numbered, you may need additional checks if you change the numbering or include other heading ranges.\n\nI have updated the original answer.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 42,
      "score": 28.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 29
    },
    {
      "id": 2391,
      "post_number": 5,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-23T15:00:56.101Z",
      "updated_at": "2024-09-23T15:00:56.101Z",
      "cooked": "<p>Perfect! Thank you :)</p>",
      "raw": "Perfect! Thank you :)",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 39,
      "score": 7.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    }
  ],
  "scraped_at": "2025-06-10T09:58:15.677017"
}