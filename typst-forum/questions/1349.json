{
  "topic_metadata": {
    "id": 1349,
    "title": "How can I separate a preamble (with functions and formatting rules) from my main typ file?",
    "slug": "how-can-i-separate-a-preamble-with-functions-and-formatting-rules-from-my-main-typ-file",
    "posts_count": 5,
    "created_at": "2024-10-25T08:44:48.779Z",
    "last_posted_at": "2024-10-25T12:12:29.522Z",
    "views": 461,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "tom1",
    "tags": [
      "templates"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 544
  },
  "posts": [
    {
      "id": 4656,
      "post_number": 1,
      "username": "tom1",
      "name": "tom",
      "created_at": "2024-10-25T08:44:48.854Z",
      "updated_at": "2024-10-25T10:30:47.627Z",
      "cooked": "<p>Hi,<br>\nI want to split my typ file in 2 files: one preamble and one main file.<br>\nI tried import, include … but nothing seems to work. I put below an example of the problem: if I use this file, it’s working my text is blue and I have number on heading.<br>\nBut if I put the first part in preamble.typ (the first part finish before the first import), I am unable to get the same result. As you see in comment, I tried different thing but without getting the expected output.<br>\nDo you have ideas where is the problem please ? Many thanks.<br>\nTom</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let chapter-counter = counter(\"chapter\")\n#chapter-counter.update(0)\n\n#set page(margin: 2cm)                 // Set page margin globally\n#set heading(numbering: \"I.1.a.i\")     // Set a custom numbering format for headings\n#set text(fill: blue, size: 14pt)     // Set global text color and size\n\n// Function to define a chapter\n#let define-chapter(title) = {\n  pagebreak(weak: true)\n  context {\n    align(center)[\n      #block(inset: 2em, breakable: false)[\n        #set text(size: 24pt, weight: \"bold\")\n        #smallcaps[Chapter]\n        #v(0cm)\n        #title\n      ]\n    ]\n  }\n\n}\n\n// #import \"preamble.typ\": define-chapter\n// #import \"preamble.typ\": *\n// #include(\"preamble.typ\")\n#define-chapter(\"Introduction to Typst\")\n= Test &lt;test&gt;\n#lorem(700)\n</code></pre>",
      "raw": "Hi,\nI want to split my typ file in 2 files: one preamble and one main file.\nI tried import, include ... but nothing seems to work. I put below an example of the problem: if I use this file, it's working my text is blue and I have number on heading.\nBut if I put the first part in preamble.typ (the first part finish before the first import), I am unable to get the same result. As you see in comment, I tried different thing but without getting the expected output.\nDo you have ideas where is the problem please ? Many thanks.\nTom\n\n```typ\n#let chapter-counter = counter(\"chapter\")\n#chapter-counter.update(0)\n\n#set page(margin: 2cm)                 // Set page margin globally\n#set heading(numbering: \"I.1.a.i\")     // Set a custom numbering format for headings\n#set text(fill: blue, size: 14pt)     // Set global text color and size\n\n// Function to define a chapter\n#let define-chapter(title) = {\n  pagebreak(weak: true)\n  context {\n    align(center)[\n      #block(inset: 2em, breakable: false)[\n        #set text(size: 24pt, weight: \"bold\")\n        #smallcaps[Chapter]\n        #v(0cm)\n        #title\n      ]\n    ]\n  }\n\n}\n\n// #import \"preamble.typ\": define-chapter\n// #import \"preamble.typ\": *\n// #include(\"preamble.typ\")\n#define-chapter(\"Introduction to Typst\")\n= Test <test>\n#lorem(700)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 61,
      "score": 1847.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 677
    },
    {
      "id": 4659,
      "post_number": 2,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2024-10-25T09:18:23.083Z",
      "updated_at": "2024-10-25T09:18:23.083Z",
      "cooked": "<p>Check this post:</p><aside class=\"quote quote-modified\" data-post=\"1\" data-topic=\"1292\">\n  <div class=\"title\">\n    <div class=\"quote-controls\"></div>\n    <img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/c/0A3649/48.png\" class=\"avatar\">\n    <a href=\"https://forum.typst.app/t/how-can-i-create-a-set-of-shared-set-and-show-rules-which-can-be-imported-into-a-theme/1292\">How can I create a set of shared `set` and `show` rules which can be imported into a theme?</a> <a class=\"badge-category__wrapper \" href=\"/c/questions/5\"><span data-category-id=\"5\" style=\"--category-badge-color: #F7C000; --category-badge-text-color: #fdfdfd;\" data-drop-close=\"true\" class=\"badge-category \" title=\"Your questions about using Typst and the web app go in this category.\"><span class=\"badge-category__name\">Questions</span></span></a>\n  </div>\n  <blockquote>\n    If I want consistent show and set rules across several templates, I have been trying to do so with a generic styling file, which is imported into each template. This guarantees the consistency, I would think, but in practice does not. E.g., in styling.typ: \n#set text( size: 10pt,\n          fill: blue,\n          font: (\"Lato\", \"Noto Sans\", \"Fira Sans\", ),\n          lang: \"en\",\n          ligatures: true,\n          discretionary-ligatures: true,\n          historical-ligatures: true)\n\n#show math.equ…\n  </blockquote>\n</aside>\n",
      "raw": "Check this post:\nhttps://forum.typst.app/t/how-can-i-create-a-set-of-shared-set-and-show-rules-which-can-be-imported-into-a-theme/1292?u=paran3xus",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 59,
      "score": 171.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 4660,
      "post_number": 3,
      "username": "Yahuxo",
      "name": "Tobias",
      "created_at": "2024-10-25T10:16:20.881Z",
      "updated_at": "2024-10-25T10:16:20.881Z",
      "cooked": "<p>The tutorial page <a href=\"https://typst.app/docs/tutorial/making-a-template/\">Making a Template</a> should be helpful in your case.</p>\n<p>Citing from that tutorial:</p>\n<blockquote>\n<p>In Typst, templates are functions in which you can wrap your whole document.</p>\n</blockquote>\n<p>So if you <code>#import</code> something (a function) from a template it is not applied automatically. You have to call it (e.g. for your custom chapter function), or wrap your whole document in it (e.g. for the text set rules).</p>",
      "raw": "The tutorial page [Making a Template](https://typst.app/docs/tutorial/making-a-template/) should be helpful in your case.\n\nCiting from that tutorial:\n> In Typst, templates are functions in which you can wrap your whole document. \n\nSo if you `#import` something (a function) from a template it is not applied automatically. You have to call it (e.g. for your custom chapter function), or wrap your whole document in it (e.g. for the text set rules).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 53,
      "score": 15.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 472
    },
    {
      "id": 4662,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-10-25T10:34:46.818Z",
      "updated_at": "2024-10-25T10:34:46.818Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/tom1\">@tom1</a>, welcome and thank you for your question! I have changed your post’s title to bring it in line with the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a> and thus make it easier to understand from the title:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n<p>I also added the <a class=\"hashtag-cooked\" href=\"/tag/templates\" data-type=\"tag\" data-slug=\"templates\" data-id=\"51\" data-ref=\"templates::tag\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>templates</span></a> tag, as it makes your question easier to find.</p>",
      "raw": "Hi @tom1, welcome and thank you for your question! I have changed your post’s title to bring it in line with the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11) and thus make it easier to understand from the title:\n\n> **Good titles are questions you would ask your friend about Typst.**\n\nI also added the #templates::tag tag, as it makes your question easier to find.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 50,
      "score": 44.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 4668,
      "post_number": 5,
      "username": "tom1",
      "name": "tom",
      "created_at": "2024-10-25T12:12:29.522Z",
      "updated_at": "2024-11-06T19:09:57.804Z",
      "cooked": "<p>Many thanks for your replies.<br>\nCurrently I have not enough time to understand the overall process to convert to a template, but I find a solution which seems working except for the number of the chapter but I think I forgot to add it.</p>\n<p>I hope the solution will be interesting for some people.</p>\n<p><em>Listing of template_test.typ:</em></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// Counter for chapters\n#let chapter-counter = counter(\"chapter\")\n\n// Function to define a chapter\n#let define-chapter(title) = {\n  pagebreak(weak: true)\n  context {\n    align(center)[\n      #block(inset: 2em, breakable: false)[\n        #set text(size: 24pt, weight: \"bold\")\n        #smallcaps[Chapter]\n        #v(0cm)\n        #title\n      ]\n    ]\n  }\n}\n\n// Initialize document with all styles\n#let init(doc) = {\n  // Initialize counter\n  chapter-counter.update(0)\n  \n  // Set document styles\n  set page(margin: 2cm)\n  set heading(numbering: \"I.1.a.i\")\n  set text(fill: blue, size: 14pt)\n  \n  // Return the styled document\n  doc\n}\n</code></pre>\n<p><em>Listing of main.typ:</em></p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"template_test.typ\": init, define-chapter\n\n#show: doc =&gt; init(doc)\n\n#define-chapter(\"Introduction to Typst\")\n= Test &lt;test&gt;\n#lorem(700)\n</code></pre>\n<p>Tom</p>",
      "raw": "Many thanks for your replies.\nCurrently I have not enough time to understand the overall process to convert to a template, but I find a solution which seems working except for the number of the chapter but I think I forgot to add it.\n\nI hope the solution will be interesting for some people.\n\n*Listing of template_test.typ:*\n```typ\n// Counter for chapters\n#let chapter-counter = counter(\"chapter\")\n\n// Function to define a chapter\n#let define-chapter(title) = {\n  pagebreak(weak: true)\n  context {\n    align(center)[\n      #block(inset: 2em, breakable: false)[\n        #set text(size: 24pt, weight: \"bold\")\n        #smallcaps[Chapter]\n        #v(0cm)\n        #title\n      ]\n    ]\n  }\n}\n\n// Initialize document with all styles\n#let init(doc) = {\n  // Initialize counter\n  chapter-counter.update(0)\n  \n  // Set document styles\n  set page(margin: 2cm)\n  set heading(numbering: \"I.1.a.i\")\n  set text(fill: blue, size: 14pt)\n  \n  // Return the styled document\n  doc\n}\n```\n\n*Listing of main.typ:*\n```typ\n#import \"template_test.typ\": init, define-chapter\n\n#show: doc => init(doc)\n\n#define-chapter(\"Introduction to Typst\")\n= Test <test>\n#lorem(700)\n```\n\nTom",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 47,
      "score": 99.2,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 677
    }
  ],
  "scraped_at": "2025-06-10T09:55:58.862423"
}