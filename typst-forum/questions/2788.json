{
  "topic_metadata": {
    "id": 2788,
    "title": "How can I generate plots from a csv file?",
    "slug": "how-can-i-generate-plots-from-a-csv-file",
    "posts_count": 6,
    "created_at": "2025-02-12T10:23:24.578Z",
    "last_posted_at": "2025-02-12T15:05:38.395Z",
    "views": 310,
    "like_count": 4,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "sijo",
    "tags": [
      "graphics",
      "data-loading"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 488
  },
  "posts": [
    {
      "id": 8503,
      "post_number": 1,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-12T10:23:24.816Z",
      "updated_at": "2025-02-22T09:15:32.329Z",
      "cooked": "<p>Hello,<br>\nI want to work with typst to generate plots of series found in a csv file.<br>\nDO you have any ideas how to start that ?<br>\nI have read on cetz how to do it with canvas, but that’s just for defined functions before hand, my goal is to generate a series plot for every column in the csv file.<br>\nThank you kindly.</p>",
      "raw": "Hello,\nI want to work with typst to generate plots of series found in a csv file.\nDO you have any ideas how to start that ?\nI have read on cetz how to do it with canvas, but that's just for defined functions before hand, my goal is to generate a series plot for every column in the csv file.\nThank you kindly.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 1167.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    },
    {
      "id": 8504,
      "post_number": 2,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-12T10:55:16.376Z",
      "updated_at": "2025-02-12T10:55:16.376Z",
      "cooked": "<p>i started with this example, but to no avail,</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.2\": canvas, draw\n#import \"@preview/cetz-plot:0.1.1\": plot\n\n#let results = csv(\"data.csv\")\n#let rows= results.first()\n\n#canvas({\n  import draw: *\n\n  // Set-up a thin axis style\n  set-style(axes: (stroke: .5pt, tick: (stroke: .5pt)),\n            legend: (stroke: none, orientation: ttb, item: (spacing: .3), scale: 80%))\n\n  plot.plot(size: (12, 8),\n    {\n      let domain = (auto, +auto) //or domain(-calc.inf, calc.inf)\n\n      for i in range(1,results.len()) {\n        plot.add(rows,results.at(i), domain: domain, label: // column header,\n        style: (stroke: black))\n      }\n      \n    })\n})\n\n</code></pre>\n<p>This is not a working example, just to start suggestion on how to make it work automatically,  because  I have 124k csv files , each one 24 dimensions with 16 rows.</p>\n<p>Thanks team!</p>",
      "raw": "i started with this example, but to no avail,\n\n```typ\n#import \"@preview/cetz:0.3.2\": canvas, draw\n#import \"@preview/cetz-plot:0.1.1\": plot\n\n#let results = csv(\"data.csv\")\n#let rows= results.first()\n\n#canvas({\n  import draw: *\n\n  // Set-up a thin axis style\n  set-style(axes: (stroke: .5pt, tick: (stroke: .5pt)),\n            legend: (stroke: none, orientation: ttb, item: (spacing: .3), scale: 80%))\n\n  plot.plot(size: (12, 8),\n    {\n      let domain = (auto, +auto) //or domain(-calc.inf, calc.inf)\n\n      for i in range(1,results.len()) {\n        plot.add(rows,results.at(i), domain: domain, label: // column header,\n        style: (stroke: black))\n      }\n      \n    })\n})\n\n```\n\n\nThis is not a working example, just to start suggestion on how to make it work automatically,  because  I have 124k csv files , each one 24 dimensions with 16 rows.\n\nThanks team!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 22.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    },
    {
      "id": 8505,
      "post_number": 3,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-12T11:06:06.769Z",
      "updated_at": "2025-02-12T11:07:05.492Z",
      "cooked": "<p>Can you post a small example of a data file? It’s not clear what are the x and y coordinates of points for the plot.</p>",
      "raw": "Can you post a small example of a data file? It's not clear what are the x and y coordinates of points for the plot.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 31.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8511,
      "post_number": 4,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-12T13:38:38.583Z",
      "updated_at": "2025-02-12T13:38:38.583Z",
      "cooked": "<p>Sure it looks like this:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/d/dabdb2b27a41c1d3fffd295c74fa196006e59a19.png\" data-download-href=\"https://forum.typst.app/uploads/default/dabdb2b27a41c1d3fffd295c74fa196006e59a19\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/original/2X/d/dabdb2b27a41c1d3fffd295c74fa196006e59a19.png\" alt=\"image\" data-base62-sha1=\"vd4vUBrNQLitAwWv2MmONBw4aTv\" width=\"690\" height=\"383\" data-dominant-color=\"474747\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">778×432 42.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I want to plot every column against date column.</p>",
      "raw": "Sure it looks like this:\n\n![image|690x383](upload://vd4vUBrNQLitAwWv2MmONBw4aTv.png)\n\n\nI want to plot every column against date column.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 45.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    },
    {
      "id": 8518,
      "post_number": 5,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-12T14:50:53.051Z",
      "updated_at": "2025-02-12T14:51:54.238Z",
      "cooked": "<p>Here’s something to get you started:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.2\": canvas, draw\n#import \"@preview/cetz-plot:0.1.1\": plot\n\n// Load CSV and separate first row from others\n#let (names, ..data) = csv.decode(```\nDate,A,B,C\n2023-01-01,1,2,3\n2023-01-02,2,3,4\n2023-01-03,1,2,6\n2023-01-04,2,1,8\n```.text)\n\n// Hack: use TOML parser to parse date strings\n#let dates = data.map(x =&gt; toml.decode(\"date = \" + x.first()).date)\n\n// Each x value is the number of days since the first row date\n#let xs = dates.map(x =&gt; (x - dates.first()).days())\n\n// Make an array of (x, y) coordinates for the given column index\n#let series(j) = range(data.len()).map(i =&gt; (xs.at(i), float(data.at(i).at(j))))\n\n#canvas({\n  import draw: *\n\n  // Set-up a thin axis style\n  set-style(\n    axes: (stroke: .5pt, tick: (stroke: .5pt)),\n    legend: (stroke: none, orientation: ttb, item: (spacing: .3), scale: 80%),\n  )\n\n  plot.plot(size: (12, 8), {\n    for j in range(1, names.len()) {\n      plot.add(series(j), label: names.at(j))\n    }\n  })\n})\n</code></pre>\n<p>To load CSV data from a file, use <code>#let (names, ..data) = csv(\"file.csv\")</code> instead.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/e/e9dbfcca3262500fd2e5996c7d2ed48ca85ac6b1.png\" data-download-href=\"https://forum.typst.app/uploads/default/e9dbfcca3262500fd2e5996c7d2ed48ca85ac6b1\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/e/e9dbfcca3262500fd2e5996c7d2ed48ca85ac6b1_2_517x335.png\" alt=\"image\" data-base62-sha1=\"xmOzr8dQQBnnqvCvb9qVCK3Uoj7\" width=\"517\" height=\"335\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/e/e9dbfcca3262500fd2e5996c7d2ed48ca85ac6b1_2_517x335.png, https://forum.typst.app/uploads/default/optimized/2X/e/e9dbfcca3262500fd2e5996c7d2ed48ca85ac6b1_2_775x502.png 1.5x, https://forum.typst.app/uploads/default/original/2X/e/e9dbfcca3262500fd2e5996c7d2ed48ca85ac6b1.png 2x\" data-dominant-color=\"FAFBFA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1002×650 28.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Here's something to get you started:\n\n```typ\n#import \"@preview/cetz:0.3.2\": canvas, draw\n#import \"@preview/cetz-plot:0.1.1\": plot\n\n// Load CSV and separate first row from others\n#let (names, ..data) = csv.decode(```\nDate,A,B,C\n2023-01-01,1,2,3\n2023-01-02,2,3,4\n2023-01-03,1,2,6\n2023-01-04,2,1,8\n```.text)\n\n// Hack: use TOML parser to parse date strings\n#let dates = data.map(x => toml.decode(\"date = \" + x.first()).date)\n\n// Each x value is the number of days since the first row date\n#let xs = dates.map(x => (x - dates.first()).days())\n\n// Make an array of (x, y) coordinates for the given column index\n#let series(j) = range(data.len()).map(i => (xs.at(i), float(data.at(i).at(j))))\n\n#canvas({\n  import draw: *\n\n  // Set-up a thin axis style\n  set-style(\n    axes: (stroke: .5pt, tick: (stroke: .5pt)),\n    legend: (stroke: none, orientation: ttb, item: (spacing: .3), scale: 80%),\n  )\n\n  plot.plot(size: (12, 8), {\n    for j in range(1, names.len()) {\n      plot.add(series(j), label: names.at(j))\n    }\n  })\n})\n```\n\nTo load CSV data from a file, use `#let (names, ..data) = csv(\"file.csv\")` instead.\n\n![image|690x447, 75%](upload://xmOzr8dQQBnnqvCvb9qVCK3Uoj7.png)",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 29,
      "score": 65.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8521,
      "post_number": 6,
      "username": "This_isYE",
      "name": "This isYE",
      "created_at": "2025-02-12T15:05:38.395Z",
      "updated_at": "2025-02-12T15:20:06.564Z",
      "cooked": "<p>You are a life saver!</p>\n<p>What do I need to do to get each series in a graph, meaning a graph for A, B and C independently ?</p>\n<p>edit:<br>\nI figured it out, You just bring out the for loop before calling canvas.<br>\nThank you <a class=\"mention\" href=\"/u/sijo\">@sijo</a> !</p>",
      "raw": "You are a life saver!\n\nWhat do I need to do to get each series in a graph, meaning a graph for A, B and C independently ?\n\n\nedit:\nI figured it out, You just bring out the for loop before calling canvas.\nThank you @sijo !",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 29,
      "score": 30.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1060
    }
  ],
  "scraped_at": "2025-06-10T09:51:44.579245"
}