{
  "topic_metadata": {
    "id": 3891,
    "title": "How do I remove automatically inserted spaces in Japanese?",
    "slug": "how-do-i-remove-automatically-inserted-spaces-in-japanese",
    "posts_count": 5,
    "created_at": "2025-05-01T06:29:30.058Z",
    "last_posted_at": "2025-05-01T15:36:20.085Z",
    "views": 65,
    "like_count": 5,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Kans",
    "tags": [
      "scripting",
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 538
  },
  "posts": [
    {
      "id": 11844,
      "post_number": 1,
      "username": "octo8",
      "name": "",
      "created_at": "2025-05-01T06:29:30.204Z",
      "updated_at": "2025-05-01T13:32:35.531Z",
      "cooked": "<p>I use typst to create Japanese documents, but I have one problem.<br>\nIt is that line breaks in the typst file are causing unexpected output format changes – spaces are automatically inserted.<br>\nThis is not a problem when using LaTeX or perhaps when using typst to create documents in many other languages.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set text(\n  lang: \"ja\",\n  font: \"Noto Sans CJK JP\",\n  cjk-latin-spacing: auto,\n)\n\n// From the two examples below, we would like to get the same output,\n// but the automatically inserted spaces result in different output.\n// Example 1:\n吾輩は猫である。\n名前はまだ無い。\n\n//Example 2:\n吾輩は猫である。名前はまだ無い。\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/a/a9aea39afa8736f11caa8f1731ec70f7742d04f6.png\" alt=\"image\" data-base62-sha1=\"od4R0GqJZFW7yenwfiqQBZ1fRsy\" width=\"554\" height=\"132\"></p>\n<p>So, my question is this:<br>\nIs there a layout setup or scripting method that would allow me to input Example 1 and still get the same output as Example 2? In other words, is there any way to eliminate or prevent the spaces automatically inserted by line breaks?</p>",
      "raw": "I use typst to create Japanese documents, but I have one problem.\nIt is that line breaks in the typst file are causing unexpected output format changes -- spaces are automatically inserted.\nThis is not a problem when using LaTeX or perhaps when using typst to create documents in many other languages.\n\n```typ\n#set text(\n  lang: \"ja\",\n  font: \"Noto Sans CJK JP\",\n  cjk-latin-spacing: auto,\n)\n\n// From the two examples below, we would like to get the same output,\n// but the automatically inserted spaces result in different output.\n// Example 1:\n吾輩は猫である。\n名前はまだ無い。\n\n//Example 2:\n吾輩は猫である。名前はまだ無い。\n```\n![image|554x132](upload://od4R0GqJZFW7yenwfiqQBZ1fRsy.png)\n\nSo, my question is this:\nIs there a layout setup or scripting method that would allow me to input Example 1 and still get the same output as Example 2? In other words, is there any way to eliminate or prevent the spaces automatically inserted by line breaks?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 69.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1452
    },
    {
      "id": 11849,
      "post_number": 2,
      "username": "Kans",
      "name": "Kans",
      "created_at": "2025-05-01T08:50:37.344Z",
      "updated_at": "2025-05-01T08:50:37.344Z",
      "cooked": "<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set text(\n  lang: \"ja\",\n  font: \"Noto Sans CJK JP\",\n  cjk-latin-spacing: auto,\n)\n\n#show regex(`\\s+`.text): \"\"\n\n// From the two examples below, we would like to get the same output,\n// but the automatically inserted spaces result in different output.\n// Example 1:\n吾輩は猫である。\n名前はまだ無い。\n\n//Example 2:\n吾輩は猫である。名前はまだ無い。\n</code></pre>\n<p>My opinion is that a single line should be written in one line. And a line break in source code should be translated into a soft break, it’s <strong>not</strong> a bug.</p>",
      "raw": "```typst\n#set text(\n  lang: \"ja\",\n  font: \"Noto Sans CJK JP\",\n  cjk-latin-spacing: auto,\n)\n\n#show regex(`\\s+`.text): \"\"\n\n// From the two examples below, we would like to get the same output,\n// but the automatically inserted spaces result in different output.\n// Example 1:\n吾輩は猫である。\n名前はまだ無い。\n\n//Example 2:\n吾輩は猫である。名前はまだ無い。\n```\n\nMy opinion is that a single line should be written in one line. And a line break in source code should be translated into a soft break, it's **not** a bug.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 22,
      "score": 24.4,
      "accepted_answer": true,
      "trust_level": 0,
      "user_id": 1293
    },
    {
      "id": 11856,
      "post_number": 3,
      "username": "octo8",
      "name": "",
      "created_at": "2025-05-01T13:26:23.170Z",
      "updated_at": "2025-05-01T13:27:07.411Z",
      "cooked": "<p>Thank you very much! It seems to be working as I expected.</p>\n<p>I understand that this implementation is <strong>not</strong> a bug, and I understand the argument that what I want to output as a single line should be written as a single line in the source code.<br>\nHowever, for example if a paragraph consists of more than 100 sentences, under this implementation it should be written as a single line of source code. That is sometimes very difficult to use.<br>\nI wanted to know if there is a way for the user to control the behavior of soft break.</p>\n<p>Thank you very much again for your kind instruction!</p>",
      "raw": "Thank you very much! It seems to be working as I expected.\n\nI understand that this implementation is **not** a bug, and I understand the argument that what I want to output as a single line should be written as a single line in the source code.\nHowever, for example if a paragraph consists of more than 100 sentences, under this implementation it should be written as a single line of source code. That is sometimes very difficult to use.\nI wanted to know if there is a way for the user to control the behavior of soft break.\n\nThank you very much again for your kind instruction!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 17,
      "score": 8.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1452
    },
    {
      "id": 11857,
      "post_number": 4,
      "username": "Kans",
      "name": "Kans",
      "created_at": "2025-05-01T14:20:45.569Z",
      "updated_at": "2025-05-01T14:20:45.569Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"octo8\" data-post=\"3\" data-topic=\"3891\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/octo8/48/2495_2.png\" class=\"avatar\"> octo8:</div>\n<blockquote>\n<p>a paragraph consists of more than 100 sentences</p>\n</blockquote>\n</aside>\n<p>This makes sense, and it’s the same in Chinese typesetting. I think this is because Typst is designed for western language, in which words are separated by spaces.</p>\n<aside class=\"quote no-group\" data-username=\"octo8\" data-post=\"3\" data-topic=\"3891\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/octo8/48/2495_2.png\" class=\"avatar\"> octo8:</div>\n<blockquote>\n<p>I wanted to know if there is a way for the user to control the behavior of soft break.</p>\n</blockquote>\n</aside>\n<p>Unhopefully, <strong>not for now</strong>. But I can see the Typst community <strong>do</strong> trying to benefit CJK users, like this <a href=\"https://typst.app/docs/reference/text/text/#parameters-cjk-latin-spacing\">Text Function #cjk-latin-spacing</a>. Maybe <code>text</code> function will have a <code>cjk-soft-break</code> parameter in the future, which can eliminate unnecessary spaces between CJK characters. <img src=\"https://forum.typst.app/images/emoji/apple/smiling_face_with_three_hearts.png?v=12\" title=\":smiling_face_with_three_hearts:\" class=\"emoji\" alt=\":smiling_face_with_three_hearts:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "[quote=\"octo8, post:3, topic:3891\"]\na paragraph consists of more than 100 sentences\n[/quote]\n\nThis makes sense, and it's the same in Chinese typesetting. I think this is because Typst is designed for western language, in which words are separated by spaces.\n\n[quote=\"octo8, post:3, topic:3891\"]\nI wanted to know if there is a way for the user to control the behavior of soft break.\n[/quote]\n\nUnhopefully, **not for now**. But I can see the Typst community **do** trying to benefit CJK users, like this [Text Function #cjk-latin-spacing](https://typst.app/docs/reference/text/text/#parameters-cjk-latin-spacing). Maybe `text` function will have a `cjk-soft-break` parameter in the future, which can eliminate unnecessary spaces between CJK characters. :smiling_face_with_three_hearts:",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 17,
      "score": 13.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1293
    },
    {
      "id": 11860,
      "post_number": 5,
      "username": "bluss",
      "name": "Ulrik",
      "created_at": "2025-05-01T15:36:20.085Z",
      "updated_at": "2025-05-01T17:10:50.086Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/octo8\">@octo8</a>, your issue is - kind of - already reported as a feature request here: <a href=\"https://github.com/typst/typst/issues/792\" class=\"inline-onebox\">Ignore linebreaks between CJK characters in source code · Issue #792 · typst/typst · GitHub</a>  (and you could vote on it by adding a <img src=\"https://forum.typst.app/images/emoji/apple/+1.png?v=12\" title=\":+1:\" class=\"emoji\" alt=\":+1:\" loading=\"lazy\" width=\"20\" height=\"20\"> on the issue). I say kind of since the issue already prescribes a particular fix with comments, but I think other solutions are mentioned there too.</p>\n<p>The project wants to have a solution for the issue for typst 0.14, so that’s promising.</p>",
      "raw": "Hi @octo8, your issue is - kind of - already reported as a feature request here: https://github.com/typst/typst/issues/792  (and you could vote on it by adding a :+1: on the issue). I say kind of since the issue already prescribes a particular fix with comments, but I think other solutions are mentioned there too.\n\nThe project wants to have a solution for the issue for typst 0.14, so that's promising.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 3,
      "reads": 16,
      "score": 48.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 1272
    }
  ],
  "scraped_at": "2025-06-10T09:48:27.460671"
}