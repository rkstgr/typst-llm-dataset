{
  "topic_metadata": {
    "id": 3214,
    "title": "How can I prevent indent on paragraphs with run-in headings?",
    "slug": "how-can-i-prevent-indent-on-paragraphs-with-run-in-headings",
    "posts_count": 5,
    "created_at": "2025-03-12T09:47:27.793Z",
    "last_posted_at": "2025-03-13T08:43:52.381Z",
    "views": 83,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "sijo",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 374
  },
  "posts": [
    {
      "id": 9691,
      "post_number": 1,
      "username": "AJ_Rush",
      "name": "AJ Rush",
      "created_at": "2025-03-12T09:47:27.793Z",
      "updated_at": "2025-03-12T09:54:33.425Z",
      "cooked": "<p>My body paragraphs are indented. Run-in headings then also indent. How do I prevent this (aside from manually removing indenting on every body paragraph which follows a run-in heading)?</p>",
      "raw": "My body paragraphs are indented. Run-in headings then also indent. How do I prevent this (aside from manually removing indenting on every body paragraph which follows a run-in heading)?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 134.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 873
    },
    {
      "id": 9693,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-12T09:54:22.317Z",
      "updated_at": "2025-03-12T09:54:22.317Z",
      "cooked": "<p>I think your question is distinct enough that it warrants its own topic; this way people can better find it by the title. Feel free to change it if I didn’t get it right <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Could you add an example of the layout you have? That will help us find the necessary changes to make it work.</p>",
      "raw": "I think your question is distinct enough that it warrants its own topic; this way people can better find it by the title. Feel free to change it if I didn't get it right :slight_smile: \n\nCould you add an example of the layout you have? That will help us find the necessary changes to make it work.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 9707,
      "post_number": 3,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-12T15:48:27.736Z",
      "updated_at": "2025-03-12T15:48:27.736Z",
      "cooked": "<p>This seems to work in this simple example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set par(first-line-indent: (amount: 2em, all: true))\n\n#show par: it =&gt; {\n  if it.first-line-indent == (amount: 0pt, all: false) { return it }\n  let children = it.body.at(\"children\", default: none)\n  if children == none or children.len() == 0 { return it }\n  let child = children.first().at(\"child\", default: none)\n  if child == none { return it }\n  if child.func() != box { return it }\n  let body = child.at(\"body\", default: none)\n  if body == none { return it }\n  if body.func() == figure and body.kind == \"h2\" {\n    return par(first-line-indent: 0pt, it.body)\n  }\n  return it\n}\n\n#show heading.where(level: 2): it =&gt; box(\n  figure(kind: \"h2\", supplement: none, it.body))\n\n= A\n#lorem(30)\n\n== A1\n#lorem(30)\n\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/6/690209d835dbfa0db39372c604bf939916e62ed8.png\" data-download-href=\"https://forum.typst.app/uploads/default/690209d835dbfa0db39372c604bf939916e62ed8\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/6/690209d835dbfa0db39372c604bf939916e62ed8_2_517x130.png\" alt=\"image\" data-base62-sha1=\"eYWv6NgREmuFxlc8e3P3eN80RUk\" width=\"517\" height=\"130\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/6/690209d835dbfa0db39372c604bf939916e62ed8_2_517x130.png, https://forum.typst.app/uploads/default/optimized/2X/6/690209d835dbfa0db39372c604bf939916e62ed8_2_775x195.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/6/690209d835dbfa0db39372c604bf939916e62ed8_2_1034x260.png 2x\" data-dominant-color=\"F0F0F0\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1130×286 53.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Surely there’s a better way <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "This seems to work in this simple example:\n\n```typ\n#set par(first-line-indent: (amount: 2em, all: true))\n\n#show par: it => {\n  if it.first-line-indent == (amount: 0pt, all: false) { return it }\n  let children = it.body.at(\"children\", default: none)\n  if children == none or children.len() == 0 { return it }\n  let child = children.first().at(\"child\", default: none)\n  if child == none { return it }\n  if child.func() != box { return it }\n  let body = child.at(\"body\", default: none)\n  if body == none { return it }\n  if body.func() == figure and body.kind == \"h2\" {\n    return par(first-line-indent: 0pt, it.body)\n  }\n  return it\n}\n\n#show heading.where(level: 2): it => box(\n  figure(kind: \"h2\", supplement: none, it.body))\n\n= A\n#lorem(30)\n\n== A1\n#lorem(30)\n\n```\n\n![image|690x174, 75%](upload://eYWv6NgREmuFxlc8e3P3eN80RUk.png)\n\nSurely there's a better way :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 18.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 9716,
      "post_number": 4,
      "username": "AJ_Rush",
      "name": "AJ Rush",
      "created_at": "2025-03-12T22:52:14.448Z",
      "updated_at": "2025-03-12T22:52:14.448Z",
      "cooked": "<p>Yes, you’ve summed up my problem correctly. Here’s my MWE:</p>\n<pre><code class=\"lang-auto\">#show heading.where(level: 1): it =&gt;     upper(it.body)\n#set par(first-line-indent: 1em)\n\n= Heading\n#lorem(20)\n\n= Heading\n#lorem(20)\n</code></pre>\n<p>Gives me:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/a/a3f815c11e125b4c71a32de8d8414caf06548672.png\" alt=\"image\" data-base62-sha1=\"noxlx0E27xZQ0nRjFvaIIaMSMYq\" width=\"414\" height=\"101\"></p>\n<p>I want it to look like:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/e/ef5bd720097e2eb21e476d0546603111a0b73d35.png\" alt=\"image\" data-base62-sha1=\"y9sSI6JTnkR5CzyQKBbiws3hA69\" width=\"414\" height=\"101\"></p>\n<p>The suggested solution looks clever, also much more complicated than it seems like it ought to be. Particularly if I have more than one style of run-in heading (which I generally do).</p>\n<p>I agree, there should be an easier way.</p>",
      "raw": "Yes, you've summed up my problem correctly. Here's my MWE:\n\n\n```\n#show heading.where(level: 1): it =>     upper(it.body)\n#set par(first-line-indent: 1em)\n\n= Heading\n#lorem(20)\n\n= Heading\n#lorem(20)\n```\n\nGives me:\n![image|414x101](upload://noxlx0E27xZQ0nRjFvaIIaMSMYq.png)\n\nI want it to look like:\n![image|414x101](upload://y9sSI6JTnkR5CzyQKBbiws3hA69.png)\n\nThe suggested solution looks clever, also much more complicated than it seems like it ought to be. Particularly if I have more than one style of run-in heading (which I generally do).\n\nI agree, there should be an easier way.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 14,
      "score": 17.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 873
    },
    {
      "id": 9745,
      "post_number": 5,
      "username": "sijo",
      "name": "",
      "created_at": "2025-03-13T08:43:52.381Z",
      "updated_at": "2025-03-13T08:44:01.044Z",
      "cooked": "<p>Ah your problem is actually a bit different from what I thought: you’re not using <code>first-line-indent: (all: true, ...)</code>. Then you can solve it by making sure that the headings are always in a “first paragraph” after a block:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show heading.where(level: 1): it =&gt; block() + upper(it.body)\n</code></pre>\n<p>You can adjust the <code>block()</code> parameters to tune the spacing.</p>",
      "raw": "Ah your problem is actually a bit different from what I thought: you're not using `first-line-indent: (all: true, ...)`. Then you can solve it by making sure that the headings are always in a \"first paragraph\" after a block:\n\n```typ\n#show heading.where(level: 1): it => block() + upper(it.body)\n```\n\nYou can adjust the `block()` parameters to tune the spacing.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 13,
      "score": 22.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:50:25.327624"
}