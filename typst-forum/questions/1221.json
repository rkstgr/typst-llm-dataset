{
  "topic_metadata": {
    "id": 1221,
    "title": "Is it possible to create a link to a heading by using the label alone?",
    "slug": "is-it-possible-to-create-a-link-to-a-heading-by-using-the-label-alone",
    "posts_count": 6,
    "created_at": "2024-10-19T20:15:50.481Z",
    "last_posted_at": "2024-10-19T21:22:59.953Z",
    "views": 695,
    "like_count": 2,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "xkevio",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 510
  },
  "posts": [
    {
      "id": 4275,
      "post_number": 1,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-10-19T20:15:50.588Z",
      "updated_at": "2024-10-19T20:21:59.814Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">For more information about hedgehogs, see the section about #link(&lt;wrds&gt;)[wyrdies].\n\n= Wyrdies and Their Friends\n&lt;wrds&gt;\n\nWyrdies, commonly known as unicorns, have many friends. Among them are hedgehogs and kangaroos.\n</code></pre>\n<p>This works. Output:</p>\n<blockquote>\n<p>For more information about hedgehogs, see the section about wyrdies.</p>\n</blockquote>\n<p>But is it possible to create a link to a heading without specifying its name, by using the label alone?</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">For more information about hedgehogs, see “#link(&lt;wrds&gt;)”.\n</code></pre>\n<p>Output:</p>\n<blockquote>\n<p>For more information about hedgehogs, see “Wyrdies and Their Friends”.</p>\n</blockquote>\n<p>I tried  <code>#link(&lt;wrds&gt;)</code> and <code>#link(&lt;wrds&gt;)[]</code>, but it doesn’t seem to work.</p>",
      "raw": "```typ\nFor more information about hedgehogs, see the section about #link(<wrds>)[wyrdies].\n\n= Wyrdies and Their Friends\n<wrds>\n\nWyrdies, commonly known as unicorns, have many friends. Among them are hedgehogs and kangaroos.\n```\n\nThis works. Output:\n\n> For more information about hedgehogs, see the section about wyrdies.\n\nBut is it possible to create a link to a heading without specifying its name, by using the label alone?\n\n```typ\nFor more information about hedgehogs, see “#link(<wrds>)”.\n```\n\nOutput:\n\n> For more information about hedgehogs, see “Wyrdies and Their Friends”.\n\nI tried  `#link(<wrds>)` and `#link(<wrds>)[]`, but it doesn't seem to work.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 4212.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 4276,
      "post_number": 2,
      "username": "SebastianJL",
      "name": "Johannes Lade",
      "created_at": "2024-10-19T20:23:23.251Z",
      "updated_at": "2024-10-19T20:26:42.097Z",
      "cooked": "<p>I think usually you would use <code>@wrds</code></p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">For more information about hedgehogs, see @wrds.\n\n= Wyrdies and Their Friends&lt;wrds&gt;\n\nWyrdies, commonly known as unicorns, have many friends. Among them are hedgehogs and kangaroos.\n</code></pre>",
      "raw": "I think usually you would use `@wrds`\n\n```typst\nFor more information about hedgehogs, see @wrds.\n\n= Wyrdies and Their Friends<wrds>\n\nWyrdies, commonly known as unicorns, have many friends. Among them are hedgehogs and kangaroos.\n```",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 62.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 591
    },
    {
      "id": 4277,
      "post_number": 3,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-10-19T20:26:42.107Z",
      "updated_at": "2024-10-19T20:27:50.167Z",
      "cooked": "<p>But this requires to use numbering, right?</p>\n<pre><code class=\"lang-auto\">#set heading(numbering: \"1.\")\n</code></pre>\n<p>And even with numbering, the section is mentioned by its generic name, that is, as “Section”:</p>\n<blockquote>\n<p>For more information about hedgehogs, see “Section 1”.</p>\n</blockquote>",
      "raw": "But this requires to use numbering, right?\n\n```\n#set heading(numbering: \"1.\")\n```\n\nAnd even with numbering, the section is mentioned by its generic name, that is, as \"Section\":\n\n> For more information about hedgehogs, see “Section 1”.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 33,
      "score": 36.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 4278,
      "post_number": 4,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-19T20:29:10.666Z",
      "updated_at": "2024-10-19T20:30:22.226Z",
      "cooked": "<p>The problem there is that then the heading needs to have a numbering and <a class=\"mention\" href=\"/u/jsx97\">@jsx97</a> wants the ref to return a clickable title and not “Section X”.</p>\n<p>You can achieve this with a show-rule on <code>link</code>, but you still need to call it with the empty square brackets as the body argument is required unless it’s a URL:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show link.where(body: []): l =&gt; {\n  let heading-elem = query(l.dest).first()\n  link(l.dest, heading-elem.body)\n}\n\nFor more information about hedgehogs, see the section about #link(&lt;wrds&gt;)[].\n\n= Wyrdies and Their Friends&lt;wrds&gt;\n\nWyrdies, commonly known as unicorns, have many friends. Among them are hedgehogs and kangaroos.\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/8c8d6c03249e8c7c3fd4b59383752be0a802679e.png\" data-download-href=\"https://forum.typst.app/uploads/default/8c8d6c03249e8c7c3fd4b59383752be0a802679e\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/8c8d6c03249e8c7c3fd4b59383752be0a802679e_2_690x144.png\" alt=\"image\" data-base62-sha1=\"k3nQ8ys9FDEf3ysVyPbBTDhbb5A\" width=\"690\" height=\"144\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/8c8d6c03249e8c7c3fd4b59383752be0a802679e_2_690x144.png, https://forum.typst.app/uploads/default/original/1X/8c8d6c03249e8c7c3fd4b59383752be0a802679e.png 1.5x, https://forum.typst.app/uploads/default/original/1X/8c8d6c03249e8c7c3fd4b59383752be0a802679e.png 2x\" data-dominant-color=\"F1F1F1\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">867×182 43.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>PS: It is probably a good idea to check if <code>type(l.dest) == label</code> in the first place but assuming you only use the <code>#link(...)[]</code> syntax for this purpose, it’s fine.</p>",
      "raw": "The problem there is that then the heading needs to have a numbering and @jsx97 wants the ref to return a clickable title and not \"Section X\".\n\nYou can achieve this with a show-rule on `link`, but you still need to call it with the empty square brackets as the body argument is required unless it's a URL:\n```typ\n#show link.where(body: []): l => {\n  let heading-elem = query(l.dest).first()\n  link(l.dest, heading-elem.body)\n}\n\nFor more information about hedgehogs, see the section about #link(<wrds>)[].\n\n= Wyrdies and Their Friends<wrds>\n\nWyrdies, commonly known as unicorns, have many friends. Among them are hedgehogs and kangaroos.\n```\n\n![image|690x144](upload://k3nQ8ys9FDEf3ysVyPbBTDhbb5A.png)\n\nPS: It is probably a good idea to check if `type(l.dest) == label` in the first place but assuming you only use the `#link(...)[]` syntax for this purpose, it's fine.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 81.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 4280,
      "post_number": 5,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-10-19T21:12:16.444Z",
      "updated_at": "2024-10-19T21:12:16.444Z",
      "cooked": "<p>This works, thanks. But there is one minor issue: currently, the link inherits the inline styling of its heading. That is, if you have</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">For more information about hedgehogs, see “#link(&lt;wrds&gt;)[]”.\n\n= Wyrdies #strong[and Their Friends]&lt;wrds&gt;\n</code></pre>\n<p>the output will be</p>\n<blockquote>\n<p>For more information about hedgehogs, see “Wyrdies <strong>and Their Friends</strong>”.</p>\n</blockquote>\n<p>Could you show how to fix it?</p>",
      "raw": "This works, thanks. But there is one minor issue: currently, the link inherits the inline styling of its heading. That is, if you have\n\n```typ\nFor more information about hedgehogs, see “#link(<wrds>)[]”.\n\n= Wyrdies #strong[and Their Friends]<wrds>\n```\n\nthe output will be\n\n> For more information about hedgehogs, see “Wyrdies **and Their Friends**”.\n\nCould you show how to fix it?",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 28,
      "score": 25.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 4281,
      "post_number": 6,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-19T21:22:59.953Z",
      "updated_at": "2024-10-19T21:29:32.165Z",
      "cooked": "<p>Oh yea for sure. Assuming your headings are always just text and dont, for example, include a random <code>#rect()</code> or styling in general, use <code>heading-elem.body.text</code> instead.</p>\n<p>If the heading is not just text but has styling like <code>bold</code>, it will be a sequence and you can access the textual part through <code>.children()</code> which you will have to combine to plain text.</p>\n<p><strong>EDIT:</strong> For example, in your case, “Wyrdies <strong>and Their Friends</strong>” would be represented as <code>sequence([Wyrdies], [ ], strong(body: [and Their Friends]))</code> and could be extracted as follows:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show link.where(body: []): l =&gt; {\n  let heading-elem = query(l.dest).first()\n  link(l.dest, heading-elem.body.children.map(c =&gt; {\n    if c.has(\"text\") { c.text }\n    else if c.has(\"body\") { c.body }\n    else { c }\n  }).join())\n}\n</code></pre>\n<p>(This probably does not cover all cases.)</p>",
      "raw": "Oh yea for sure. Assuming your headings are always just text and dont, for example, include a random `#rect()` or styling in general, use `heading-elem.body.text` instead.\n\nIf the heading is not just text but has styling like `bold`, it will be a sequence and you can access the textual part through `.children()` which you will have to combine to plain text.\n\n**EDIT:** For example, in your case, \"Wyrdies **and Their Friends**\" would be represented as `sequence([Wyrdies], [ ], strong(body: [and Their Friends]))` and could be extracted as follows:\n\n```typ\n#show link.where(body: []): l => {\n  let heading-elem = query(l.dest).first()\n  link(l.dest, heading-elem.body.children.map(c => {\n    if c.has(\"text\") { c.text }\n    else if c.has(\"body\") { c.body }\n    else { c }\n  }).join())\n}\n```\n\n(This probably does not cover all cases.)",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 40.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    }
  ],
  "scraped_at": "2025-06-10T09:56:22.393652"
}