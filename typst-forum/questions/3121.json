{
  "topic_metadata": {
    "id": 3121,
    "title": "How to set a 3 colors bar/grid for underline stroke",
    "slug": "how-to-set-a-3-colors-bar-grid-for-underline-stroke",
    "posts_count": 5,
    "created_at": "2025-03-05T22:58:16.884Z",
    "last_posted_at": "2025-03-06T08:44:15.810Z",
    "views": 58,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sitandr",
    "tags": [
      "scripting",
      "text-formatting"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 443
  },
  "posts": [
    {
      "id": 9423,
      "post_number": 1,
      "username": "alex01",
      "name": "alex",
      "created_at": "2025-03-05T22:58:17.026Z",
      "updated_at": "2025-03-09T14:28:38.345Z",
      "cooked": "<p>I would like to have as underline funktion a color bar with 3 lines.</p>\n<p>The snippet blow creates ony the green line</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/b/bb396a49ae1c5a60574a4728d783b9dbfec96b6f.png\" alt=\"image\" data-base62-sha1=\"qIgivdDiZwpuWeJeIp85CdjDbEX\" width=\"263\" height=\"130\"></p>\n<details>\n<summary>\nSummary</summary>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show underline: it =&gt; {\n  grid(\n  rows: (auto, auto, auto),\n  //align: center+bottom,\n  stroke: none,\n  gutter: 1,\n  it,\n  line(stroke: red),\n  line(stroke: blue),\n  line(stroke: green),\n)\n}\n</code></pre>\n</details>\n<p>Is my Idea possible with typst?</p>",
      "raw": "I would like to have as underline funktion a color bar with 3 lines.\n\nThe snippet blow creates ony the green line\n\n![image|263x130](upload://qIgivdDiZwpuWeJeIp85CdjDbEX.png)\n\n[details=\"Summary\"]\n```typst\n#show underline: it => {\n  grid(\n  rows: (auto, auto, auto),\n  //align: center+bottom,\n  stroke: none,\n  gutter: 1,\n  it,\n  line(stroke: red),\n  line(stroke: blue),\n  line(stroke: green),\n)\n}\n```\n[/details]\n\nIs my Idea possible with typst?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 115.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1296
    },
    {
      "id": 9425,
      "post_number": 2,
      "username": "sitandr",
      "name": "sitandr",
      "created_at": "2025-03-05T23:52:06.099Z",
      "updated_at": "2025-03-05T23:52:06.099Z",
      "cooked": "<p>I have two options for you.</p>\n<p>Unfortunately, recursive show rules are still kind of cursed, so if I try to use underline inside show rule for underline, it would be pretty bad. Even several clever tricks I know didn’t save me there.</p>\n<p>So, there are two options: either get rid of show rule or use element other than underline inside the rule:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// creating custom function for multiunderline\n#let underbrow(it) = {\n  underline(underline(underline(it, stroke: red), stroke: yellow, offset: 1.5pt), stroke: blue, offset: 2pt)\n}\n\n#underbrow[Hello world!]\n\n// creating show rule with boxes' lower edges\n#show underline: it =&gt; {\n    let cbox(color, body) = {\n      box(\n        body,\n        stroke: (bottom: color + 1pt),\n        inset: (bottom: 1pt))\n    }\n    \n    cbox(blue, cbox(yellow, cbox(red, it.body)))\n}\n\n#underline[Hello world!]\n</code></pre>\n<p>Here is the result, of course, pretty twickable in both cases:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/f/f51db23c56cabbe2fdeff8856326443d986cd6a3.png\" alt=\"image\" data-base62-sha1=\"yYoBskXxnQIxpVwskWh0aZgm4P9\" width=\"336\" height=\"185\"></p>\n<h1><a name=\"p-9425-drawbacks-1\" class=\"anchor\" href=\"#p-9425-drawbacks-1\"></a>Drawbacks</h1>\n<ol>\n<li>Custom function: you will have to replace all <code>underline</code> in your document with this function. That includes all files you <code>include</code> or <code>import</code>. If underlining is done by a package, it can’t be tweaked this way.</li>\n<li>Show rule: unfortunately, <code>box</code> is not <code>underline</code>. For example, it is not breakable. This underline can’t easily evade the spaces. You can do it, of course, with some magic by splitting input by words, and putting each word in a box separately, but it would still be limited.</li>\n</ol>\n<p>Hope that helps!</p>",
      "raw": "I have two options for you.\n\nUnfortunately, recursive show rules are still kind of cursed, so if I try to use underline inside show rule for underline, it would be pretty bad. Even several clever tricks I know didn't save me there.\n\nSo, there are two options: either get rid of show rule or use element other than underline inside the rule:\n\n```typ\n// creating custom function for multiunderline\n#let underbrow(it) = {\n  underline(underline(underline(it, stroke: red), stroke: yellow, offset: 1.5pt), stroke: blue, offset: 2pt)\n}\n\n#underbrow[Hello world!]\n\n// creating show rule with boxes' lower edges\n#show underline: it => {\n    let cbox(color, body) = {\n      box(\n        body,\n        stroke: (bottom: color + 1pt),\n        inset: (bottom: 1pt))\n    }\n    \n    cbox(blue, cbox(yellow, cbox(red, it.body)))\n}\n\n#underline[Hello world!]\n```\n\nHere is the result, of course, pretty twickable in both cases:\n![image|336x185](upload://yYoBskXxnQIxpVwskWh0aZgm4P9.png)\n\n\n# Drawbacks\n\n1. Custom function: you will have to replace all `underline` in your document with this function. That includes all files you `include` or `import`. If underlining is done by a package, it can't be tweaked this way.\n2. Show rule: unfortunately, `box` is not `underline`. For example, it is not breakable. This underline can't easily evade the spaces. You can do it, of course, with some magic by splitting input by words, and putting each word in a box separately, but it would still be limited.\n\nHope that helps!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 10.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 19
    },
    {
      "id": 9428,
      "post_number": 3,
      "username": "alex01",
      "name": "alex",
      "created_at": "2025-03-06T00:07:46.084Z",
      "updated_at": "2025-03-06T00:07:46.084Z",
      "cooked": "<p>Thank you <a class=\"mention\" href=\"/u/sitandr\">@sitandr</a>.</p>\n<p>I choose the second one and keep the Drawbacks in mind.</p>\n<aside class=\"quote no-group\" data-username=\"sitandr\" data-post=\"2\" data-topic=\"3121\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/s/B7441C/48.png\" class=\"avatar\"> sitandr:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">#show underline: it =&gt; {\n    let cbox(color, body) = {\n      box(\n        body,\n        stroke: (bottom: color + 1pt),\n        inset: (bottom: 1pt))\n    }\n    \n    cbox(blue, cbox(yellow, cbox(red, it.body)))\n}\n\n#underline[Hello world!]\n</code></pre>\n</blockquote>\n</aside>",
      "raw": "Thank you @sitandr.\n\nI choose the second one and keep the Drawbacks in mind.\n\n[quote=\"sitandr, post:2, topic:3121\"]\n```\n#show underline: it => {\n    let cbox(color, body) = {\n      box(\n        body,\n        stroke: (bottom: color + 1pt),\n        inset: (bottom: 1pt))\n    }\n    \n    cbox(blue, cbox(yellow, cbox(red, it.body)))\n}\n\n#underline[Hello world!]\n```\n[/quote]",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 24,
      "score": 4.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1296
    },
    {
      "id": 9429,
      "post_number": 4,
      "username": "gezepi",
      "name": "",
      "created_at": "2025-03-06T07:08:57.174Z",
      "updated_at": "2025-03-06T07:08:57.174Z",
      "cooked": "<p>I expected this to work better, but I’ll leave it here in the hopes that someone more familiar with gradients can get it working properly.  The idea was to underline with a stroke that uses a vertical gradient with the three target colors.  For some reason red is always dominant and blue is always the least present.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#underline(\n  stroke: (\n    paint: gradient.linear(red, blue, green, angle: 90deg).sharp(3),\n    thickness: 3pt\n  ),\n    offset: 2pt\n)[Once it's gone, it's gone.]\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/6/60c8682789b824ccfe0545b348d96bdd202daf10.png\" alt=\"image\" data-base62-sha1=\"dObcPbYDLh5pVSqWbD9PvwwOX60\" width=\"580\" height=\"96\"></p>",
      "raw": "I expected this to work better, but I'll leave it here in the hopes that someone more familiar with gradients can get it working properly.  The idea was to underline with a stroke that uses a vertical gradient with the three target colors.  For some reason red is always dominant and blue is always the least present.\n\n```typ\n#underline(\n  stroke: (\n    paint: gradient.linear(red, blue, green, angle: 90deg).sharp(3),\n    thickness: 3pt\n  ),\n    offset: 2pt\n)[Once it's gone, it's gone.]\n```\n![image|580x96](upload://dObcPbYDLh5pVSqWbD9PvwwOX60.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 9.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 9433,
      "post_number": 5,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-03-06T08:44:15.810Z",
      "updated_at": "2025-03-06T08:44:15.810Z",
      "cooked": "<p>This looks like it is related to  <a href=\"https://github.com/typst/typst/issues/5799\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Gradient Rendering Issue with line/underline Functions Using ttb Direction in Typst · Issue #5799 · typst/typst · GitHub</a>.</p>",
      "raw": "This looks like it is related to  https://github.com/typst/typst/issues/5799.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 19,
      "score": 23.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    }
  ],
  "scraped_at": "2025-06-10T09:50:40.067967"
}