{
  "topic_metadata": {
    "id": 641,
    "title": "How to customize the style of equation numbering?",
    "slug": "how-to-customize-the-style-of-equation-numbering",
    "posts_count": 6,
    "created_at": "2024-09-24T15:51:08.665Z",
    "last_posted_at": "2024-10-06T21:17:27.727Z",
    "views": 638,
    "like_count": 4,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "scripting",
      "math",
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 743
  },
  "posts": [
    {
      "id": 2470,
      "post_number": 1,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-24T15:51:08.868Z",
      "updated_at": "2024-10-10T15:42:00.825Z",
      "cooked": "<p>Hi,</p>\n<p>For figures I use the following method:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let SIZE_SMALL = 9pt\n#show figure.caption: it =&gt; text(\n  size: SIZE_SMALL, \n  [*#it.supplement #it.counter.display(it.numbering):* #it.body]\n)\n</code></pre>\n<p>Is there a similar method to achieve bold equation numbering?</p>\n<p>Thanks in advance!</p>\n<p><br>\nEDIT:<br>\nIf you are using the <a href=\"https://typst.app/universe/package/i-figured/#:~:text=Show%20a%20figure%20with%20per-section\">i-figured</a> module: <a href=\"https://forum.typst.app/t/how-to-customize-the-style-of-equation-numbering/641/3\">see here</a></p>",
      "raw": "Hi, \n\nFor figures I use the following method:\n```typ \n#let SIZE_SMALL = 9pt\n#show figure.caption: it => text(\n  size: SIZE_SMALL, \n  [*#it.supplement #it.counter.display(it.numbering):* #it.body]\n)\n``` \n\nIs there a similar method to achieve bold equation numbering?\n\nThanks in advance!\n\n\\\nEDIT:\nIf you are using the [i-figured](https://typst.app/universe/package/i-figured/#:~:text=Show%20a%20figure%20with%20per-section) module: [see here](https://forum.typst.app/t/how-to-customize-the-style-of-equation-numbering/641/3?u=jacobdabozze)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 76,
      "score": 2410.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2476,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-24T16:13:53.743Z",
      "updated_at": "2024-10-05T20:45:52.340Z",
      "cooked": "<p>For <code>figure.caption</code> you’ve missed the <code>it.separator</code> which is equal to <code>:</code> by default.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let JF_FS_SMALL = 14pt\n#set page(paper: \"a6\")\n#let your-default-font = \"Linux Libertine\"\n#set text(font: your-default-font)\n\n#show figure.caption: it =&gt; context text(\n  size: JF_FS_SMALL,\n  [*#it.supplement #it.counter.display(it.numbering)#it.separator* #it.body],\n)\n\n// #set math.equation(numbering: \"(1)\") // not bold\n#set math.equation(numbering: (..n) =&gt; {\n  strong(text(font: your-default-font, numbering(\"(1)\", ..n)))\n})\n\n#figure(caption: [caption], rect())\n$ y = 2x $\n</code></pre>\n<div align=\"center\">\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/cefb0751284c5817ce8dd7221d718289a67a8a3a.png\" alt=\"image\" data-base62-sha1=\"tx2btN18HMaLu7gHnTw1IOt0lbI\" width=\"578\" height=\"224\"></p>\n</div>\n<p>The problem with equation is that it uses the default math font (which I didn’t really think/know about before), therefore <code>strong()</code> has no effect on it. To fix this, you have to use some other typeface that has a bold font.</p>\n<p>Note that using a custom numbering function has a side effect that is described here: <a href=\"https://forum.typst.app/t/how-to-increase-the-spacing-between-the-number-and-the-title-of-a-heading/640/2\" class=\"inline-onebox\">How to increase the spacing between the number and the title of a heading? - #2 by Andrew</a>.</p>\n<hr>\n<h3><a name=\"p-2476-typst-012-update-1\" class=\"anchor\" href=\"#p-2476-typst-012-update-1\"></a>Typst 0.12 update</h3>\n<p><a href=\"https://github.com/typst/typst/pull/5126#issuecomment-2395118793\" rel=\"noopener nofollow ugc\">With Typst v0.12.0</a> you can use the built-in bold math font like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set math.equation(numbering: (..n) =&gt; strong(numbering(\"(1)\", ..n)))\n$ y = 2x $\n</code></pre>\n<p>This means that the <code>your-default-font</code> stuff can be removed.</p>",
      "raw": "For `figure.caption` you've missed the `it.separator` which is equal to `:` by default.\n\n```typ\n#let JF_FS_SMALL = 14pt\n#set page(paper: \"a6\")\n#let your-default-font = \"Linux Libertine\"\n#set text(font: your-default-font)\n\n#show figure.caption: it => context text(\n  size: JF_FS_SMALL,\n  [*#it.supplement #it.counter.display(it.numbering)#it.separator* #it.body],\n)\n\n// #set math.equation(numbering: \"(1)\") // not bold\n#set math.equation(numbering: (..n) => {\n  strong(text(font: your-default-font, numbering(\"(1)\", ..n)))\n})\n\n#figure(caption: [caption], rect())\n$ y = 2x $\n```\n\n<div align=center>\n\n![image|578x224](upload://tx2btN18HMaLu7gHnTw1IOt0lbI.png)\n</div>\n\nThe problem with equation is that it uses the default math font (which I didn't really think/know about before), therefore `strong()` has no effect on it. To fix this, you have to use some other typeface that has a bold font.\n\nNote that using a custom numbering function has a side effect that is described here: https://forum.typst.app/t/how-to-increase-the-spacing-between-the-number-and-the-title-of-a-heading/640/2.\n\n---\n\n### Typst 0.12 update\n\n[With Typst v0.12.0](https://github.com/typst/typst/pull/5126#issuecomment-2395118793) you can use the built-in bold math font like this:\n\n```typ\n#set math.equation(numbering: (..n) => strong(numbering(\"(1)\", ..n)))\n$ y = 2x $\n```\n\nThis means that the `your-default-font` stuff can be removed.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 76,
      "score": 110.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2556,
      "post_number": 3,
      "username": "Jacobdabozze",
      "name": "",
      "created_at": "2024-09-25T11:11:03.929Z",
      "updated_at": "2024-09-25T11:26:01.683Z",
      "cooked": "<p>Clever! This is a great solution.</p>\n<p>I’d like to add an example of how I used this with the <a href=\"https://typst.app/universe/package/i-figured/#:~:text=Show%20a%20figure%20with%20per-section\">i-figured</a> module:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/i-figured:0.2.4\"\n\n#set page(paper: \"a7\")\n#set heading(numbering: \"1\")\n\n#let custom-font = \"Buenard\"\n#set text(font: custom-font)\n\n#show heading: i-figured.reset-counters\n#show math.equation: it =&gt; i-figured.show-equation(\n  it, \n  numbering: (..n) =&gt; text(\n    font: custom-font,\n    strong(numbering(\"(1.1)\", ..n))\n  )\n)\n\n= Heading One \n$ y = x^2 + 1 $\n$ y = x^2 + 2 $\n\n= Heading Two\n*#lorem(5)*\n$ y = x^2 + 3 $\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/040ac86886634cf0adbb70e0a508ccba48b6d159.png\" alt=\"image\" data-base62-sha1=\"zL0KcOX4AIWCX69JHuzTi3sKSZ\" width=\"262\" height=\"378\"></p>",
      "raw": "Clever! This is a great solution.\n\nI'd like to add an example of how I used this with the [i-figured](https://typst.app/universe/package/i-figured/#:~:text=Show%20a%20figure%20with%20per-section) module:\n\n```typ\n#import \"@preview/i-figured:0.2.4\"\n\n#set page(paper: \"a7\")\n#set heading(numbering: \"1\")\n\n#let custom-font = \"Buenard\"\n#set text(font: custom-font)\n\n#show heading: i-figured.reset-counters\n#show math.equation: it => i-figured.show-equation(\n  it, \n  numbering: (..n) => text(\n    font: custom-font,\n    strong(numbering(\"(1.1)\", ..n))\n  )\n)\n\n= Heading One \n$ y = x^2 + 1 $\n$ y = x^2 + 2 $\n\n= Heading Two\n*#lorem(5)*\n$ y = x^2 + 3 $\n```\n\n![image|262x378](upload://zL0KcOX4AIWCX69JHuzTi3sKSZ.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 63,
      "score": 72.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 424
    },
    {
      "id": 2573,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-25T13:25:05.273Z",
      "updated_at": "2024-09-25T13:25:05.273Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Jacobdabozze\" data-post=\"3\" data-topic=\"641\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/j/E95420/48.png\" class=\"avatar\"> Jacobdabozze:</div>\n<blockquote>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation: it =&gt; i-figured.show-equation(\n  it, \n  numbering: (..n) =&gt; text(\n    font: custom-font,\n    strong(numbering(\"(1.1)\", ..n))\n  )\n)\n</code></pre>\n</blockquote>\n</aside>\n<p>This can be optimized like this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation: i-figured.show-equation.with(\n  numbering: (..n) =&gt; text(\n    font: custom-font,\n    strong(numbering(\"(1.1)\", ..n))\n  )\n)\n</code></pre>\n<p>Because even though the <code>it</code> is the first positional argument, you still can use <code>.with()</code> with named arguments, which wouldn’t interfere with positional arguments. It won’t work if you set/pass positional arguments and first argument should be <code>it</code>. In other cases <code>.with()</code> nicely reduces code clutter.</p>",
      "raw": "[quote=\"Jacobdabozze, post:3, topic:641\"]\n```typ\n#show math.equation: it => i-figured.show-equation(\n  it, \n  numbering: (..n) => text(\n    font: custom-font,\n    strong(numbering(\"(1.1)\", ..n))\n  )\n)\n```\n[/quote]\n\nThis can be optimized like this:\n\n```typ\n#show math.equation: i-figured.show-equation.with(\n  numbering: (..n) => text(\n    font: custom-font,\n    strong(numbering(\"(1.1)\", ..n))\n  )\n)\n```\n\nBecause even though the `it` is the first positional argument, you still can use `.with()` with named arguments, which wouldn't interfere with positional arguments. It won't work if you set/pass positional arguments and first argument should be `it`. In other cases `.with()` nicely reduces code clutter.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 49,
      "score": 29.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3472,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-05T20:48:05.183Z",
      "updated_at": "2024-10-05T20:48:05.183Z",
      "cooked": "<p>I expanded the post with a new solution for Typst 0.12. I also added the now missing <code>context</code> from the <code>show figure.caption</code> rule because <code>counter.display</code> should be used inside a context.</p>",
      "raw": "I expanded the post with a new solution for Typst 0.12. I also added the now missing `context` from the `show figure.caption` rule because `counter.display` should be used inside a context.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 45,
      "score": 24.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3503,
      "post_number": 8,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-06T21:17:27.727Z",
      "updated_at": "2024-10-06T21:18:18.767Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"7\" data-topic=\"641\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>I expanded the post with a new solution for Typst 0.12. I also added the now missing <code>context</code> from the <code>show figure.caption</code> rule because <code>counter.display</code> should be used inside a context.</p>\n</blockquote>\n</aside>\n<p>Careful with <code>counter.display()</code> now. First of all, it’s probably enough to just move the <code>context</code> only before <code>counter.display()</code> but more importantly this now won’t work anymore with 0.12 <strong>and</strong> floating figures, see <a href=\"https://github.com/typst/typst/issues/4966\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Wrong counter value when accessed from inside floating figure · Issue #4966 · typst/typst · GitHub</a>.</p>\n<p>This is technically correct as, according to <a class=\"mention\" href=\"/u/laurmaedje\">@laurmaedje</a>, it was kind of more luck that it even worked at all and now it doesn’t anymore. The correct solution would be to pass the location of <code>figure.caption</code> to the counter with <code>.at()</code> but since <code>.location()</code> of <code>figure.caption()</code> returns <code>none</code>, the next best and (for now) correct way is to nest the <code>figure.caption()</code> show rule inside a <code>figure</code> show rule and use its location.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show figure: fig =&gt; {\n  show figure.caption: c =&gt; [\n    #let fig-num = numbering(fig.numbering, ..c.counter.at(fig.location()))\n    *#it.supplement #fig-num#it.separator* #it.body\n  ]\n  fig\n}\n</code></pre>",
      "raw": "[quote=\"Andrew, post:7, topic:641, full:true\"]\nI expanded the post with a new solution for Typst 0.12. I also added the now missing `context` from the `show figure.caption` rule because `counter.display` should be used inside a context.\n[/quote]\n\nCareful with `counter.display()` now. First of all, it's probably enough to just move the `context` only before `counter.display()` but more importantly this now won't work anymore with 0.12 **and** floating figures, see https://github.com/typst/typst/issues/4966.\n\nThis is technically correct as, according to @laurmaedje, it was kind of more luck that it even worked at all and now it doesn't anymore. The correct solution would be to pass the location of `figure.caption` to the counter with `.at()` but since `.location()` of `figure.caption()` returns `none`, the next best and (for now) correct way is to nest the `figure.caption()` show rule inside a `figure` show rule and use its location.\n\n```typ\n#show figure: fig => {\n  show figure.caption: c => [\n    #let fig-num = numbering(fig.numbering, ..c.counter.at(fig.location()))\n    *#it.supplement #fig-num#it.separator* #it.body\n  ]\n  fig\n}\n```",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 43,
      "score": 38.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    }
  ],
  "scraped_at": "2025-06-10T09:58:10.555111"
}