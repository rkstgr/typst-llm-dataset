{
  "topic_metadata": {
    "id": 955,
    "title": "How to make each grid cell take up all available space?",
    "slug": "how-to-make-each-grid-cell-take-up-all-available-space",
    "posts_count": 9,
    "created_at": "2024-10-06T02:31:11.176Z",
    "last_posted_at": "2024-10-08T17:35:27.048Z",
    "views": 1004,
    "like_count": 6,
    "reply_count": 4,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 5,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "layout",
      "grids"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 1147
  },
  "posts": [
    {
      "id": 3474,
      "post_number": 1,
      "username": "AllanChain",
      "name": "AllanChain",
      "created_at": "2024-10-06T02:31:11.405Z",
      "updated_at": "2024-10-06T02:31:11.405Z",
      "cooked": "<p>Sorry, I can’t find a proper and concise way to describe the problem in the title. Let me explain in detail here.</p>\n<p>I’m making a poster with many color boxes. I want all boxes aligned and fill up all available vertical space and thus there is no extra blank areas. Here is a simplified version of it:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 300pt, height: 200pt)\n\n#set rect(\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  radius: 5pt,\n)\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  gutter: 3pt,\n  grid.cell(rowspan: 2, rect[\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  rect[How to make this expand?],\n  rect[I want each cell to take up all available space.],\n  rect[I don't want to hard code heights of each row.],\n  rect[How to make this expand?],\n)\n</code></pre>\n<p>The result:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/6bb3bf636e7b4d78c912330d05b3ab8291919d77.png\" alt=\"Current result\" data-base62-sha1=\"fmMcczla0B6cBkLoM5QD55jdNbx\" width=\"600\" height=\"400\"><br>\nThe desired layout should look like the following:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/4b7774febcdaa32ee0155f104d6cec7c1a1b2b45.png\" alt=\"Desired layout\" data-base62-sha1=\"aLBKeFsN2BlRfUnPTZy9gGGg3Vb\" width=\"600\" height=\"400\"><br>\nIt is achieved by using <code>fill</code> provided by <code>grid</code>, but I don’t want to use it because it is much less flexible than <code>rect</code> or other things. For example, it cannot have <code>radius</code> set. Is it possible to make all <code>rect</code> automatically take up all vertical spaces?</p>",
      "raw": "Sorry, I can't find a proper and concise way to describe the problem in the title. Let me explain in detail here.\n\nI'm making a poster with many color boxes. I want all boxes aligned and fill up all available vertical space and thus there is no extra blank areas. Here is a simplified version of it:\n\n```typ\n#set page(width: 300pt, height: 200pt)\n\n#set rect(\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  radius: 5pt,\n)\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  gutter: 3pt,\n  grid.cell(rowspan: 2, rect[\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  rect[How to make this expand?],\n  rect[I want each cell to take up all available space.],\n  rect[I don't want to hard code heights of each row.],\n  rect[How to make this expand?],\n)\n```\n\nThe result:\n![Current result|600x400](upload://fmMcczla0B6cBkLoM5QD55jdNbx.png)\nThe desired layout should look like the following:\n![Desired layout|600x400](upload://aLBKeFsN2BlRfUnPTZy9gGGg3Vb.png)\nIt is achieved by using `fill` provided by `grid`, but I don't want to use it because it is much less flexible than `rect` or other things. For example, it cannot have `radius` set. Is it possible to make all `rect` automatically take up all vertical spaces?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 75,
      "score": 4804.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 547
    },
    {
      "id": 3478,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2024-10-06T07:02:58.857Z",
      "updated_at": "2024-10-06T07:02:58.857Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/allanchain\">@AllanChain</a>,</p>\n<p>the <a href=\"https://typst.app/docs/reference/layout/fraction/\">Fraction</a> type can be used to fill the remaining space in a layout. You can set the height of the rect boxes with <code>#set rect(height: 1fr)</code> to take all the remaining space. Now you also have to limit the height of the grid with <code>rows: 1fr</code> otherwise the rect boxes span the entire page.</p>\n<details>\n<summary>\nCode</summary>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(width: 300pt, height: 200pt)\n\n#set rect(\n  height: 1fr,\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  radius: 5pt,\n)\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  rows: 1fr,\n  gutter: 3pt,\n  grid.cell(rowspan: 2, rect[\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  rect[How to make this expand?],\n  rect[I want each cell to take up all available space.],\n  rect[I don't want to hard code heights of each row.],\n  rect[How to make this expand?],\n)\n</code></pre>\n</details>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/2811209cb4c053e1355040c4e8fac0a070b7577d.png\" alt=\"test\" data-base62-sha1=\"5IrNesvJsq7wG7DjmDGkzVz77w9\" width=\"300\" height=\"200\"></p>",
      "raw": "Hello @AllanChain,\n\nthe [Fraction](https://typst.app/docs/reference/layout/fraction/) type can be used to fill the remaining space in a layout. You can set the height of the rect boxes with `#set rect(height: 1fr)` to take all the remaining space. Now you also have to limit the height of the grid with `rows: 1fr` otherwise the rect boxes span the entire page.\n\n[details=\"Code\"]\n```typst\n#set page(width: 300pt, height: 200pt)\n\n#set rect(\n  height: 1fr,\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  radius: 5pt,\n)\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  rows: 1fr,\n  gutter: 3pt,\n  grid.cell(rowspan: 2, rect[\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  rect[How to make this expand?],\n  rect[I want each cell to take up all available space.],\n  rect[I don't want to hard code heights of each row.],\n  rect[How to make this expand?],\n)\n```\n[/details]\n\n![test|300x200](upload://5IrNesvJsq7wG7DjmDGkzVz77w9.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 62,
      "score": 77.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 3505,
      "post_number": 4,
      "username": "Blaz",
      "name": "Blaz",
      "created_at": "2024-10-06T21:33:14.631Z",
      "updated_at": "2024-10-06T21:33:14.631Z",
      "cooked": "<p>Note that this only works from 0.12.0 onwards, which is still in its testing phase, as <code>rect</code> doesn’t accept <code>fraction</code> type in its height in previous versions.</p>\n<p>In 0.11.1 you can add <code>#v(1fr)</code> at the end of each <code>rect</code> to achieve the same effect:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 300pt, height: 200pt)\n\n#set rect(\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  radius: 5pt,\n)\n\n#show grid.cell: it =&gt; {\n  rect(it+v(1fr))\n}\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  rows: 1fr,\n  gutter: 3pt,\n  grid.cell(rowspan: 2, [\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  [How to make this expand?],\n  [I want each cell to take up all available space.],\n  [I don't want to hard code heights of each row.],\n  [How to make this expand?],\n)\n</code></pre>",
      "raw": "Note that this only works from 0.12.0 onwards, which is still in its testing phase, as `rect` doesn't accept `fraction` type in its height in previous versions.\n\nIn 0.11.1 you can add `#v(1fr)` at the end of each `rect` to achieve the same effect:\n\n```typ\n#set page(width: 300pt, height: 200pt)\n\n#set rect(\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  radius: 5pt,\n)\n\n#show grid.cell: it => {\n  rect(it+v(1fr))\n}\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  rows: 1fr,\n  gutter: 3pt,\n  grid.cell(rowspan: 2, [\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  [How to make this expand?],\n  [I want each cell to take up all available space.],\n  [I don't want to hard code heights of each row.],\n  [How to make this expand?],\n)\n```",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 60,
      "score": 56.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 98
    },
    {
      "id": 3508,
      "post_number": 5,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-06T22:37:43.232Z",
      "updated_at": "2024-10-06T22:37:43.232Z",
      "cooked": "<p>First things first, it’s worth mentioning that the “happy path” for grid fill is to use the built-in fill parameter for grid and grid cells, since that fill is handled by the grid itself and always covers the whole cell.</p>\n<p>With that not being possible here due to the desired radius, the ideal solution would be to remain with <code>auto</code>-sized rows (the default), but set <code>rect(height: 100%)</code> on each rectangle so that each rectangle occupies the final measured height for the cell. However, by default, <code>100%</code> in an auto row always means 100% of the page’s (or parent container’s, if there is one) height, instead of the row height, to avoid a cyclic dependency problem (the <code>auto</code> row height depends on the cells’ heights, but the cells’ heights would depend on the <code>auto</code> row height); you cannot currently change that, but there is a proposal to be able to do so (which would alleviate the need for extra <code>measure()</code> calls): <a href=\"https://github.com/typst/typst/issues/4000\" class=\"inline-onebox\">Add `table.cell(fit: Axes&lt;bool&gt;)` parameter · Issue #4000 · typst/typst · GitHub</a></p>\n<p>For the time being, setting the row height to <code>1fr</code> as suggested above does work to some extent, in that <strong>all remaining space</strong> will be equally divided between each row of rectangles, but more importantly, sets <code>100%</code> to mean the row height, allowing you to <code>#set rect(height: 100%)</code>, leading to the desired effect. (<code>100%</code> is equal to the row height for all row sizes except for <code>auto</code>.) However, this has the problem that <code>1fr</code> will be relative to your whole page, so I’d recommend using fixed height rows for this purpose. Regardless of the approach taken, setting the rectangle heights to <code>100%</code> (or to some fixed size if you prefer) is the preferred solution (and does not require using Typst 0.12.0):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 300pt, height: 400pt)\n\n#set rect(\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  height: 100%,  // &lt;--- /!\\\n  radius: 5pt,\n)\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  gutter: 3pt,\n  rows: 1fr,\n  // rows: (8em, 6em), // &lt;--- would be ideal\n  grid.cell(rowspan: 2, rect[\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  rect[How to make this expand?],\n  rect[I want each cell to take up all available space.],\n  rect[I don't want to hard code heights of each row.],\n  rect[How to make this expand?],\n)\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/9c12cca7dde61f3d8385df384177db67edc05cd1.png\" alt=\"output\" data-base62-sha1=\"mgGLiXwc1YciB5HQa6UcqSPkZPP\" width=\"359\" height=\"475\"></p>",
      "raw": "First things first, it's worth mentioning that the \"happy path\" for grid fill is to use the built-in fill parameter for grid and grid cells, since that fill is handled by the grid itself and always covers the whole cell.\n\nWith that not being possible here due to the desired radius, the ideal solution would be to remain with `auto`-sized rows (the default), but set `rect(height: 100%)` on each rectangle so that each rectangle occupies the final measured height for the cell. However, by default, `100%` in an auto row always means 100% of the page's (or parent container's, if there is one) height, instead of the row height, to avoid a cyclic dependency problem (the `auto` row height depends on the cells' heights, but the cells' heights would depend on the `auto` row height); you cannot currently change that, but there is a proposal to be able to do so (which would alleviate the need for extra `measure()` calls): https://github.com/typst/typst/issues/4000\n\nFor the time being, setting the row height to `1fr` as suggested above does work to some extent, in that **all remaining space** will be equally divided between each row of rectangles, but more importantly, sets `100%` to mean the row height, allowing you to `#set rect(height: 100%)`, leading to the desired effect. (`100%` is equal to the row height for all row sizes except for `auto`.) However, this has the problem that `1fr` will be relative to your whole page, so I'd recommend using fixed height rows for this purpose. Regardless of the approach taken, setting the rectangle heights to `100%` (or to some fixed size if you prefer) is the preferred solution (and does not require using Typst 0.12.0):\n\n```typ\n#set page(width: 300pt, height: 400pt)\n\n#set rect(\n  inset: 8pt,\n  fill: rgb(\"e4e5ea\"),\n  width: 100%,\n  height: 100%,  // <--- /!\\\n  radius: 5pt,\n)\n\n#grid(\n  columns: (1fr, 1fr, 1fr),\n  gutter: 3pt,\n  rows: 1fr,\n  // rows: (8em, 6em), // <--- would be ideal\n  grid.cell(rowspan: 2, rect[\n    I don't want to use `fill` provided by `grid` because I can not get nice `radius`.\\\n    This is 2 rows.\n  ]),\n  rect[How to make this expand?],\n  rect[I want each cell to take up all available space.],\n  rect[I don't want to hard code heights of each row.],\n  rect[How to make this expand?],\n)\n```\n![output|359x475](upload://mgGLiXwc1YciB5HQa6UcqSPkZPP.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 50,
      "score": 134.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 3509,
      "post_number": 6,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-06T22:40:24.356Z",
      "updated_at": "2024-10-06T22:40:24.356Z",
      "cooked": "<p>I’ll add that another awesome idea is to open an issue in our GitHub proposing a <code>radius</code> parameter for grid cells’ fill: <a href=\"https://github.com/typst/typst/issues\" class=\"inline-onebox\">Issues · typst/typst · GitHub</a></p>",
      "raw": "I'll add that another awesome idea is to open an issue in our GitHub proposing a `radius` parameter for grid cells' fill: https://github.com/typst/typst/issues",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 7.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 3511,
      "post_number": 7,
      "username": "AllanChain",
      "name": "AllanChain",
      "created_at": "2024-10-07T01:30:20.833Z",
      "updated_at": "2024-10-07T01:30:20.833Z",
      "cooked": "<p>Thanks for elaborating. Now, I understand that it is currently very difficult to have <code>auto</code>-sized rows while having a growable <code>rect</code> content in Typst.</p>\n<p>The <code>rows: 1fr</code> suggested here and above does work in my example, but does not work nicely in my real world poster because all rows are evenly spaced relative to the page. What I really want is <code>auto</code>-sized rows, and I’m sorry that I didn’t make it clear in the question.</p>\n<p>Therefore, I’m setting a fixed height and use <code>height: 100%</code> for now. I will follow up the issue you mentioned.</p>",
      "raw": "Thanks for elaborating. Now, I understand that it is currently very difficult to have `auto`-sized rows while having a growable `rect` content in Typst.\n\nThe `rows: 1fr` suggested here and above does work in my example, but does not work nicely in my real world poster because all rows are evenly spaced relative to the page. What I really want is `auto`-sized rows, and I'm sorry that I didn't make it clear in the question.\n\nTherefore, I'm setting a fixed height and use `height: 100%` for now. I will follow up the issue you mentioned.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 7.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 547
    },
    {
      "id": 3525,
      "post_number": 8,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-07T12:42:18.220Z",
      "updated_at": "2024-10-07T12:44:25.423Z",
      "cooked": "<p>Glad you managed to solve it! Let’s mark my answer as a solution for now then, and we can maybe change that in the future when that issue is closed. <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Glad you managed to solve it! Let's mark my answer as a solution for now then, and we can maybe change that in the future when that issue is closed. :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 32.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 3534,
      "post_number": 9,
      "username": "AllanChain",
      "name": "AllanChain",
      "created_at": "2024-10-08T04:58:44.807Z",
      "updated_at": "2024-10-08T05:05:57.549Z",
      "cooked": "<p>I can’t find the “mark as solution” button now, but I’m sure it existed days before. Is the forum site updated? Also, I’m unable to login on other devices (<a href=\"https://forum.typst.app/t/unable-to-log-in-to-the-forum/973\" class=\"inline-onebox\">Unable to log in to the forum</a>), which is strange.</p>",
      "raw": "I can't find the \"mark as solution\" button now, but I'm sure it existed days before. Is the forum site updated? Also, I'm unable to login on other devices (https://forum.typst.app/t/unable-to-log-in-to-the-forum/973), which is strange.",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 11.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 547
    },
    {
      "id": 3574,
      "post_number": 10,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-08T17:35:27.048Z",
      "updated_at": "2024-10-08T17:35:27.048Z",
      "cooked": "<p>Yeah, it appears there is an ongoing issue with the forum, sorry for that. Hopefully it should be solved soon.</p>",
      "raw": "Yeah, it appears there is an ongoing issue with the forum, sorry for that. Hopefully it should be solved soon.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 11.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:57:17.613890"
}