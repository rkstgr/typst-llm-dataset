{
  "topic_metadata": {
    "id": 1404,
    "title": "How to get the page number when referencing?",
    "slug": "how-to-get-the-page-number-when-referencing",
    "posts_count": 3,
    "created_at": "2024-10-28T23:33:53.197Z",
    "last_posted_at": "2024-10-31T04:43:32.694Z",
    "views": 574,
    "like_count": 3,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "scripting",
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 280
  },
  "posts": [
    {
      "id": 4788,
      "post_number": 1,
      "username": "jsx97",
      "name": "jsx97",
      "created_at": "2024-10-28T23:33:53.304Z",
      "updated_at": "2024-10-31T04:42:56.699Z",
      "cooked": "<p>Here is a discussion about how to get the page number when referencing an image or table. (And if I understand correctly, it should also work for headings.): <a href=\"https://github.com/typst/typst/issues/2873\" rel=\"noopener nofollow ugc\">https://github.com/typst/typst/issues/2873</a>.</p>\n<p>In May, Laurenz posted a solution for Typst 0.11:</p>\n<blockquote>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let pageref(label) = context {\n  let loc = locate(label)\n  let nums = counter(page).at(loc)\n  link(loc, numbering(loc.page-numbering(), ..nums))\n}\n</code></pre>\n<p>You can use it as</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">see #pageref(&lt;myref&gt;)\n</code></pre>\n</blockquote>\n<p>This doesn’t seem to work for me using Typst 0.12 and gives an error. Not sure whether the code should be updated or I simply don’t really understand how to use it properly. Here is what I tried:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let pageref(label) = context {\n  let loc = locate(label)\n  let nums = counter(page).at(loc)\n  link(loc, numbering(loc.page-numbering(), ..nums))\n}\n\n= Foos and Bars\n&lt;myref&gt;\n\n#lorem(1000)\n\nFor more on foo, see #pageref(&lt;myref&gt;).\n</code></pre>\n<p>There is also a similar question by Goossa and there is a solution by Andrew: <a href=\"https://forum.typst.app/t/how-do-i-make-a-reference-that-inserts-name-of-section-and-page-number/461\">https://forum.typst.app/t/how-do-i-make-a-reference-that-inserts-name-of-section-and-page-number/461</a>, and it works. But having 2 working solutions is better than 1, right? <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Here is a discussion about how to get the page number when referencing an image or table. (And if I understand correctly, it should also work for headings.): <https://github.com/typst/typst/issues/2873>.\n\nIn May, Laurenz posted a solution for Typst 0.11:\n\n> ```typ\n> #let pageref(label) = context {\n>   let loc = locate(label)\n>   let nums = counter(page).at(loc)\n>   link(loc, numbering(loc.page-numbering(), ..nums))\n> }\n> ```\n>\n> You can use it as\n>\n> ```typ\n> see #pageref(<myref>)\n> ```\n\nThis doesn't seem to work for me using Typst 0.12 and gives an error. Not sure whether the code should be updated or I simply don't really understand how to use it properly. Here is what I tried:\n\n```typ\n#let pageref(label) = context {\n  let loc = locate(label)\n  let nums = counter(page).at(loc)\n  link(loc, numbering(loc.page-numbering(), ..nums))\n}\n\n= Foos and Bars\n<myref>\n\n#lorem(1000)\n\nFor more on foo, see #pageref(<myref>).\n```\n\nThere is also a similar question by Goossa and there is a solution by Andrew: <https://forum.typst.app/t/how-do-i-make-a-reference-that-inserts-name-of-section-and-page-number/461>, and it works. But having 2 working solutions is better than 1, right? :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 52,
      "score": 2660.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 477
    },
    {
      "id": 4800,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2024-10-29T07:11:58.427Z",
      "updated_at": "2024-10-29T07:11:58.427Z",
      "cooked": "<p>The page’s numbering is <code>none</code> by default, so you need to either set it to something else via</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(numbering: \"1\")\n</code></pre>\n<p>or explicitly handle that case in the <code>pageref</code> function.</p>",
      "raw": "The page's numbering is `none` by default, so you need to either set it to something else via\n```typ\n#set page(numbering: \"1\")\n```\nor explicitly handle that case in the `pageref` function.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 47,
      "score": 124.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 4876,
      "post_number": 3,
      "username": "PgBiel",
      "name": "",
      "created_at": "2024-10-31T04:43:32.694Z",
      "updated_at": "2024-10-31T04:43:32.694Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/jsx97\">@jsx97</a>, I’ve updated your post title to better fit our guidelines for question posts: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Make sure your post title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @jsx97, I've updated your post title to better fit our guidelines for question posts: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nMake sure your post title is a question you'd ask to a friend about Typst. :wink:",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 36.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:55:49.332717"
}