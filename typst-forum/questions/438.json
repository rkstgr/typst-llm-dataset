{
  "topic_metadata": {
    "id": 438,
    "title": "Why does my heading label errors with \"cannot reference text\"?",
    "slug": "why-does-my-heading-label-errors-with-cannot-reference-text",
    "posts_count": 3,
    "created_at": "2024-09-18T07:19:28.105Z",
    "last_posted_at": "2024-09-18T08:40:40.720Z",
    "views": 378,
    "like_count": 6,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "quachpas",
    "tags": [],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 139
  },
  "posts": [
    {
      "id": 1720,
      "post_number": 1,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-18T07:19:28.214Z",
      "updated_at": "2024-09-18T07:19:28.214Z",
      "cooked": "<p>If you have a programatic labelled heading, i.e., your label is contained in a typst variable</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let lab= label(\"asdf\")\n= asdf #lab\n</code></pre>\n<p>you may have encountered the error</p>\n<pre data-code-wrap=\"shell\"><code class=\"lang-shell\">error: cannot reference text\n@asdf // error: cannot reference text\n</code></pre>",
      "raw": "If you have a programatic labelled heading, i.e., your label is contained in a typst variable \n```typ\n#let lab= label(\"asdf\")\n= asdf #lab\n```\nyou may have encountered the error \n```shell\nerror: cannot reference text\n@asdf // error: cannot reference text\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 52,
      "score": 1805.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 1722,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-18T07:19:37.784Z",
      "updated_at": "2024-09-18T07:20:46.618Z",
      "cooked": "<p>You should write instead,</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">= asdf\n#lab\n</code></pre>\n<h2><a name=\"p-1722-why-does-this-happen-1\" class=\"anchor\" href=\"#p-1722-why-does-this-happen-1\"></a>Why does this happen?</h2>\n<p>This occurs because your code is not parsed as</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#heading(level: 1, [asdf]) #asdf\n</code></pre>\n<p>but</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#heading(level: 1, [asdf #asdf])\n</code></pre>\n<p>See [1] and [2] for details.</p>\n<p>[1] <a href=\"https://github.com/typst/typst/issues/3512\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Programmatic label placed on the same line with heading is confusing · Issue #3512 · typst/typst · GitHub</a><br>\n[2] <a href=\"https://github.com/typst/typst/discussions/4043\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">How to reference a composite variable label? · typst/typst · Discussion #4043 · GitHub</a></p>",
      "raw": "You should write instead,\n```typ\n= asdf\n#lab\n```\n\n## Why does this happen?\n\nThis occurs because your code is not parsed as\n```typ\n#heading(level: 1, [asdf]) #asdf\n```\nbut\n```typ\n#heading(level: 1, [asdf #asdf])\n```\n\nSee [1] and [2] for details.\n\n[1] https://github.com/typst/typst/issues/3512\n[2] https://github.com/typst/typst/discussions/4043",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 4,
      "reads": 52,
      "score": 165.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 1745,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2024-09-18T08:40:40.720Z",
      "updated_at": "2024-09-18T08:40:40.720Z",
      "cooked": "<p>Another way to get the same behavior, if you should prefer the heading on one line, is this:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#[= asdf] #lab\n</code></pre>\n<p>honestly I find your solution nicer though: it keeps the <code>= </code> at the beginning of the line and thus seems more readable to me.</p>",
      "raw": "Another way to get the same behavior, if you should prefer the heading on one line, is this:\n\n```typ\n#[= asdf] #lab\n```\n\nhonestly I find your solution nicer though: it keeps the `= ` at the beginning of the line and thus seems more readable to me.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 47,
      "score": 29.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:58:46.635320"
}