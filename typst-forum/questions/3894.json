{
  "topic_metadata": {
    "id": 3894,
    "title": "Hide or ignore? ToC structure issue",
    "slug": "hide-or-ignore-toc-structure-issue",
    "posts_count": 5,
    "created_at": "2025-05-01T09:10:36.956Z",
    "last_posted_at": "2025-05-02T21:53:25.073Z",
    "views": 116,
    "like_count": 5,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "bluss",
    "tags": [
      "outline"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 387
  },
  "posts": [
    {
      "id": 11850,
      "post_number": 1,
      "username": "Maxwell",
      "name": "Maxwell",
      "created_at": "2025-05-01T09:10:37.141Z",
      "updated_at": "2025-05-01T09:10:37.141Z",
      "cooked": "<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/f/fc5503f145fa59533f83a10e81e1e30c313f062e.png\" data-download-href=\"https://forum.typst.app/uploads/default/fc5503f145fa59533f83a10e81e1e30c313f062e\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/f/fc5503f145fa59533f83a10e81e1e30c313f062e_2_685x500.png\" alt=\"image\" data-base62-sha1=\"A0esXWNUTgh2xTlcLakuYOhn1NQ\" width=\"685\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/f/fc5503f145fa59533f83a10e81e1e30c313f062e_2_685x500.png, https://forum.typst.app/uploads/default/original/2X/f/fc5503f145fa59533f83a10e81e1e30c313f062e.png 1.5x, https://forum.typst.app/uploads/default/original/2X/f/fc5503f145fa59533f83a10e81e1e30c313f062e.png 2x\" data-dominant-color=\"E8E8CD\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">705×514 52.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>As you can see in the picture above, <a href=\"https://github.com/typst/typst/discussions/2681#discussioncomment-7621511\" rel=\"noopener nofollow ugc\">hide height to 0pt</a> is not the right way to ignore headings, and the <code>PDF bookmark</code> is <a href=\"https://github.com/typst/typst/issues/1422\" rel=\"noopener nofollow ugc\">different</a> from the <code>outline()</code>.<br>\nThe script is:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// heading_ignore(heading, level) \n#let hi(h, l) = {heading(outlined:false, bookmarked:false, level:l)[#h]}\n\n#outline()\n\n= Markdown\n\n== CommonMark\n\n#table(columns:3, align:left+horizon,\n[#hi([Heading 1], 1)], [\\# Heading 1], [Heading 1\\ \\=\\=\\=],\n[#hi([Heading 2], 2)], [\\#\\# Heading 2], [Heading 2\\ \\-\\-\\-],\n[#hi([Heading 3 (up to 6)], 3)], [\\#\\#\\# Heading 3 (up to 6)], [],)\n\n== GitHub Markup\n\n== JupyterBook MyST\n\n</code></pre>\n<p>A workaround is:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// heading_fake(heading, level)\n#let hf(h, l) = {text(1.6em-l*0.2em, weight:\"bold\")[#h]}\n</code></pre>",
      "raw": "![image|685x500](upload://A0esXWNUTgh2xTlcLakuYOhn1NQ.png)\n\nAs you can see in the picture above, [hide height to 0pt](https://github.com/typst/typst/discussions/2681#discussioncomment-7621511) is not the right way to ignore headings, and the `PDF bookmark` is [different](https://github.com/typst/typst/issues/1422) from the `outline()`. \nThe script is:\n```typ\n// heading_ignore(heading, level) \n#let hi(h, l) = {heading(outlined:false, bookmarked:false, level:l)[#h]}\n\n#outline()\n\n= Markdown\n\n== CommonMark\n\n#table(columns:3, align:left+horizon,\n[#hi([Heading 1], 1)], [\\# Heading 1], [Heading 1\\ \\=\\=\\=],\n[#hi([Heading 2], 2)], [\\#\\# Heading 2], [Heading 2\\ \\-\\-\\-],\n[#hi([Heading 3 (up to 6)], 3)], [\\#\\#\\# Heading 3 (up to 6)], [],)\n\n== GitHub Markup\n\n== JupyterBook MyST\n\n```\nA workaround is:\n```typ\n// heading_fake(heading, level)\n#let hf(h, l) = {text(1.6em-l*0.2em, weight:\"bold\")[#h]}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 86.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1424
    },
    {
      "id": 11852,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2025-05-01T09:50:05.463Z",
      "updated_at": "2025-05-01T09:50:29.099Z",
      "cooked": "<p>The Typst output is what I would expect: you have headings such as <code>= Markdown</code> and <code>== Commonmark</code> which you don’t configure in any way so they end up in the table of contents.</p>\n<p>Could you include an image of the output you expect?</p>",
      "raw": "The Typst output is what I would expect: you have headings such as `= Markdown` and `== Commonmark` which you don't configure in any way so they end up in the table of contents.\n\nCould you include an image of the output you expect?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 31.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 11854,
      "post_number": 3,
      "username": "bluss",
      "name": "Ulrik",
      "created_at": "2025-05-01T11:41:39.943Z",
      "updated_at": "2025-05-01T11:41:39.943Z",
      "cooked": "<p>I think this is maybe the same bug as the one reported here? <a href=\"https://github.com/typst/typst/issues/5615\" class=\"inline-onebox\">Bookmarks are displaying at the correct depth only in the Typst app but not in other PDF readers. · Issue #5615 · typst/typst · GitHub</a></p>",
      "raw": "I think this is maybe the same bug as the one reported here? https://github.com/typst/typst/issues/5615",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 29,
      "score": 80.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 1272
    },
    {
      "id": 11875,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-01T21:13:58.392Z",
      "updated_at": "2025-05-03T01:57:00.375Z",
      "cooked": "<p>BTW, you don’t need <code>{}</code> when defining a one-line function/variable. You can also simplify many other things:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show raw: set text(11pt)\n\n// heading-ignore(heading, level)\n#let hi(l, h) = heading(outlined: false, bookmarked: false, level: l)[#h]\n#let hi(l, h) = text(1.6em - l * 0.2em, weight: \"bold\")[#h]\n\n#outline()\n\n= Markdown\n== CommonMark\n#table(\n  columns: 3,\n  align: left + horizon,\n  hi(1)[Heading 1], `# Heading 1`, `= Heading 1`,\n  hi(2)[Heading 2], `## Heading 2`, `== Heading 2`,\n  hi(3)[Heading 3 (up to 6)], `### Heading 3 (up to 6)`, `=== Heading 3 (infinite)`,\n)\n\n== GitHub Markup\n== JupyterBook MyST\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/a/ab754123b0e791856aeb603b32ede70bebdfdc50.png\" alt=\"image\" data-base62-sha1=\"osMRz1gMzRzxKzPc4vmYwus3l0k\" width=\"577\" height=\"311\"></p>\n<p>Though specifics depend on exact guidelines.</p>\n<p>With</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show table.cell.where(x: 1): set raw(lang: \"md\")\n#show table.cell.where(x: 2): set raw(lang: \"typ\")\n</code></pre>\n<p>you can spice up the output with syntax highlighting:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/0/0a1ab3ae0d1037a42dac860ffbd021ac1dcc7e31.png\" data-download-href=\"https://forum.typst.app/uploads/default/0a1ab3ae0d1037a42dac860ffbd021ac1dcc7e31\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/0/0a1ab3ae0d1037a42dac860ffbd021ac1dcc7e31_2_517x80.png\" alt=\"image\" data-base62-sha1=\"1rnYXrJkQXz8ys6asAq69re2Dg5\" width=\"517\" height=\"80\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/0/0a1ab3ae0d1037a42dac860ffbd021ac1dcc7e31_2_517x80.png, https://forum.typst.app/uploads/default/original/2X/0/0a1ab3ae0d1037a42dac860ffbd021ac1dcc7e31.png 1.5x, https://forum.typst.app/uploads/default/original/2X/0/0a1ab3ae0d1037a42dac860ffbd021ac1dcc7e31.png 2x\" data-dominant-color=\"1F2023\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">726×113 23.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "BTW, you don't need `{}` when defining a one-line function/variable. You can also simplify many other things:\n\n```typ\n#show raw: set text(11pt)\n\n// heading-ignore(heading, level)\n#let hi(l, h) = heading(outlined: false, bookmarked: false, level: l)[#h]\n#let hi(l, h) = text(1.6em - l * 0.2em, weight: \"bold\")[#h]\n\n#outline()\n\n= Markdown\n== CommonMark\n#table(\n  columns: 3,\n  align: left + horizon,\n  hi(1)[Heading 1], `# Heading 1`, `= Heading 1`,\n  hi(2)[Heading 2], `## Heading 2`, `== Heading 2`,\n  hi(3)[Heading 3 (up to 6)], `### Heading 3 (up to 6)`, `=== Heading 3 (infinite)`,\n)\n\n== GitHub Markup\n== JupyterBook MyST\n```\n\n![image|577x311](upload://osMRz1gMzRzxKzPc4vmYwus3l0k.png)\n\nThough specifics depend on exact guidelines.\n\nWith\n\n```typ\n#show table.cell.where(x: 1): set raw(lang: \"md\")\n#show table.cell.where(x: 2): set raw(lang: \"typ\")\n```\n\nyou can spice up the output with syntax highlighting:\n\n![image|690x107, 75%](upload://1rnYXrJkQXz8ys6asAq69re2Dg5.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 25,
      "score": 20.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 11912,
      "post_number": 5,
      "username": "Maxwell",
      "name": "Maxwell",
      "created_at": "2025-05-02T21:53:25.073Z",
      "updated_at": "2025-05-02T21:53:25.073Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/sijo\">@sijo</a> open the pdf with Web browser Firefox (<strong>PDF.js</strong> library), the outline is broken! I marked a yellow area in picture to compare the two outlines (<code>PDF.js</code> and <code>typ outline()</code>), you could see the differences.<br>\n<a class=\"mention\" href=\"/u/andrew\">@Andrew</a> Thank you for code style addvices, help me a lot!</p>",
      "raw": "@sijo open the pdf with Web browser Firefox (**PDF.js** library), the outline is broken! I marked a yellow area in picture to compare the two outlines (`PDF.js` and ```typ outline()```), you could see the differences.\\\n@Andrew Thank you for code style addvices, help me a lot!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 19.2,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1424
    }
  ],
  "scraped_at": "2025-06-10T09:48:25.898525"
}