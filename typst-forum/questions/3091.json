{
  "topic_metadata": {
    "id": 3091,
    "title": "How to customize the body of an outline entry?",
    "slug": "how-to-customize-the-body-of-an-outline-entry",
    "posts_count": 4,
    "created_at": "2025-03-03T19:42:02.480Z",
    "last_posted_at": "2025-03-09T13:44:02.506Z",
    "views": 217,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "outline"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 410
  },
  "posts": [
    {
      "id": 9340,
      "post_number": 1,
      "username": "jkunimune",
      "name": "Justin Kunimune",
      "created_at": "2025-03-03T19:42:02.580Z",
      "updated_at": "2025-03-16T08:47:43.844Z",
      "cooked": "<p>Hello, I’m using Typst to write my thesis.  I’m currently trying to customize my lists of figures.  I’d like to write a show rule that changes the body of each outline entry without affecting the indentation, prefix, fill, or page number.</p>\n<p>Here’s two things I’ve tried so far.  In these examples I’m trying to rebuild the outline entry without modifying its appearance at all (if this works then I’ll replace <code>it.body()</code> with something else).  They’re both based on <a href=\"https://typst.app/docs/reference/model/outline/#definitions-entry-definitions\">this page on the website</a>, but with <code>it.inner()</code> broken up into its components.  As you can see, simply concatenating <code>it.body()</code> with <code>it.fill</code> and <code>it.page()</code> puts undesirable line breaks between all of them.  I thought I could fix this by putting them in a horizontal <code>grid</code>, but then the fill isn’t long enough when the body is multiple lines long.</p>\n<details>\n<summary>\nMinimum working example</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/9/96d5f84763a6a04eb5ae0d326ba83de6df318445.png\" data-download-href=\"https://forum.typst.app/uploads/default/96d5f84763a6a04eb5ae0d326ba83de6df318445\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/9/96d5f84763a6a04eb5ae0d326ba83de6df318445_2_690x450.png\" alt=\"image\" data-base62-sha1=\"lwm31ItdehEcdQKyAVlwB3GiQv3\" width=\"690\" height=\"450\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/9/96d5f84763a6a04eb5ae0d326ba83de6df318445_2_690x450.png, https://forum.typst.app/uploads/default/original/2X/9/96d5f84763a6a04eb5ae0d326ba83de6df318445.png 1.5x, https://forum.typst.app/uploads/default/original/2X/9/96d5f84763a6a04eb5ae0d326ba83de6df318445.png 2x\" data-dominant-color=\"F9F8F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">952×621 100 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show outline.entry: it =&gt; link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n    it.body() + it.fill + it.page(),\n  ),\n)\n\n#outline()\n\n#show outline.entry: it =&gt; link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n    grid(columns: (auto, 1fr, auto), align: bottom, it.body(), it.fill, it.page()),\n  ),\n)\n\n#outline()\n\n= a really really really long loooooooooooooooooooooooooooooooooong maaaaaaaaaaaaaaaaaaaaaaaaan\n</code></pre>\n</details>\n<p>Is there a way to put these three things together in-line rather than as paragraphs or as columns in a grid?  How does <code>outline.entry.inner()</code> do it?</p>",
      "raw": "Hello, I'm using Typst to write my thesis.  I'm currently trying to customize my lists of figures.  I'd like to write a show rule that changes the body of each outline entry without affecting the indentation, prefix, fill, or page number.\n\nHere's two things I've tried so far.  In these examples I'm trying to rebuild the outline entry without modifying its appearance at all (if this works then I'll replace `it.body()` with something else).  They're both based on [this page on the website](https://typst.app/docs/reference/model/outline/#definitions-entry-definitions), but with `it.inner()` broken up into its components.  As you can see, simply concatenating `it.body()` with `it.fill` and `it.page()` puts undesirable line breaks between all of them.  I thought I could fix this by putting them in a horizontal `grid`, but then the fill isn't long enough when the body is multiple lines long.\n\n[details=\"Minimum working example\"]\n\n![image|690x450](upload://lwm31ItdehEcdQKyAVlwB3GiQv3.png)\n\n```typst\n#show outline.entry: it => link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n    it.body() + it.fill + it.page(),\n  ),\n)\n\n#outline()\n\n#show outline.entry: it => link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n    grid(columns: (auto, 1fr, auto), align: bottom, it.body(), it.fill, it.page()),\n  ),\n)\n\n#outline()\n\n= a really really really long loooooooooooooooooooooooooooooooooong maaaaaaaaaaaaaaaaaaaaaaaaan\n```\n\n[/details]\n\n\nIs there a way to put these three things together in-line rather than as paragraphs or as columns in a grid?  How does `outline.entry.inner()` do it?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 678.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 23
    },
    {
      "id": 9342,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-03-03T20:50:28.129Z",
      "updated_at": "2025-03-03T20:50:28.129Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/jkunimune\">@jkunimune</a>,</p>\n<p>the problem is <code>it.fill</code>, which is a <a href=\"https://typst.app/docs/reference/layout/repeat/\"><code>repeat</code></a> element and takes the full space. You can restrict it with <code>box(width: 1fr, it.fill)</code> to the available space on the line.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#outline(title: [Default Contents])\n\n#show outline.entry: it =&gt; link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n    it.body() + sym.space + box(width: 1fr, it.fill) + sym.space + sym.wj + it.page()\n  ),\n)\n\n#outline(title: [Imitated Contents])\n\n= a really really really long loooooooooooooooooooooooooooooooooong maaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaanaa\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/8/82fd055d7668c8c323115508af42478165fbc1ba.png\" data-download-href=\"https://forum.typst.app/uploads/default/82fd055d7668c8c323115508af42478165fbc1ba\" title=\"test\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/8/82fd055d7668c8c323115508af42478165fbc1ba_2_690x238.png\" alt=\"test\" data-base62-sha1=\"iGMaikC3qqmGdFMGYLIRmjPqY7o\" width=\"690\" height=\"238\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/8/82fd055d7668c8c323115508af42478165fbc1ba_2_690x238.png, https://forum.typst.app/uploads/default/optimized/2X/8/82fd055d7668c8c323115508af42478165fbc1ba_2_1035x357.png 1.5x, https://forum.typst.app/uploads/default/original/2X/8/82fd055d7668c8c323115508af42478165fbc1ba.png 2x\" data-dominant-color=\"F0F0F0\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">test</span><span class=\"informations\">1191×412 220 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I added <code>sym.wj</code> to prevent the page number from standing alone in a newline.</p>",
      "raw": "Hi @jkunimune,\n\nthe problem is `it.fill`, which is a [`repeat`](https://typst.app/docs/reference/layout/repeat/) element and takes the full space. You can restrict it with `box(width: 1fr, it.fill)` to the available space on the line.\n\n```typst\n#outline(title: [Default Contents])\n\n#show outline.entry: it => link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n    it.body() + sym.space + box(width: 1fr, it.fill) + sym.space + sym.wj + it.page()\n  ),\n)\n\n#outline(title: [Imitated Contents])\n\n= a really really really long loooooooooooooooooooooooooooooooooong maaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaanaa\n```\n![test|690x238](upload://iGMaikC3qqmGdFMGYLIRmjPqY7o.png)\n\nI added `sym.wj` to prevent the page number from standing alone in a newline.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 32.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9371,
      "post_number": 3,
      "username": "jkunimune",
      "name": "Justin Kunimune",
      "created_at": "2025-03-04T13:52:04.567Z",
      "updated_at": "2025-03-04T13:52:04.567Z",
      "cooked": "<p>Ah, perfect, I understand now.  Thank you!</p>",
      "raw": "Ah, perfect, I understand now.  Thank you!",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 11.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 23
    },
    {
      "id": 9517,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-03-09T13:44:02.506Z",
      "updated_at": "2025-03-15T22:32:16.242Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/jkunimune\">@jkunimune</a>, thanks for your question! If you feel the response you got has sufficiently answered your question, be sure to give it a checkmark <img src=\"https://forum.typst.app/images/emoji/apple/ballot_box_with_check.png?v=12\" title=\":ballot_box_with_check:\" class=\"emoji\" alt=\":ballot_box_with_check:\" loading=\"lazy\" width=\"20\" height=\"20\">. This will help others find the solution in the future. Thanks!</p>\n<p>Edit: I have marked a response as the solution.</p>",
      "raw": "Hi @jkunimune, thanks for your question! If you feel the response you got has sufficiently answered your question, be sure to give it a checkmark :ballot_box_with_check:. This will help others find the solution in the future. Thanks!\n\nEdit: I have marked a response as the solution.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 10.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:50:48.138464"
}