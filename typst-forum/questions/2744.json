{
  "topic_metadata": {
    "id": 2744,
    "title": "How Can I Create Image Examples Like In The Documentation Within a Typst Document?",
    "slug": "how-can-i-create-image-examples-like-in-the-documentation-within-a-typst-document",
    "posts_count": 8,
    "created_at": "2025-02-10T05:05:55.802Z",
    "last_posted_at": "2025-02-11T13:15:48.279Z",
    "views": 165,
    "like_count": 1,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 8,
    "accepted_answer_username": "Alan",
    "tags": [],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 805
  },
  "posts": [
    {
      "id": 8409,
      "post_number": 1,
      "username": "Alan",
      "name": "Alan",
      "created_at": "2025-02-10T05:05:55.971Z",
      "updated_at": "2025-02-10T15:02:32.863Z",
      "cooked": "<p>I’m making my own collection of typst samples in a document. I’d like to generate images to show with the samples the same way the documentation does. I saw a post from 2023 in the discord that sounded like the code to do that was closed source. Is that still the case?</p>\n<p>(I’ve also seen the tidy package but that has a lot more output than I’m looking for. I’d like to have what amounts to an image of a single page with the output from the example source)</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/c/c2e9ce504948c31751d559c8c203d6d4863bed6d.png\" data-download-href=\"https://forum.typst.app/uploads/default/c2e9ce504948c31751d559c8c203d6d4863bed6d\" title=\"Screenshot 2025-02-09 at 11.54.44 PM\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/c/c2e9ce504948c31751d559c8c203d6d4863bed6d_2_522x499.png\" alt=\"Screenshot 2025-02-09 at 11.54.44 PM\" data-base62-sha1=\"rOhytK3d6LOPMAnQqi4CkLravil\" width=\"522\" height=\"499\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/c/c2e9ce504948c31751d559c8c203d6d4863bed6d_2_522x499.png, https://forum.typst.app/uploads/default/optimized/2X/c/c2e9ce504948c31751d559c8c203d6d4863bed6d_2_783x748.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/c/c2e9ce504948c31751d559c8c203d6d4863bed6d_2_1044x998.png 2x\" data-dominant-color=\"EFEFF1\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-02-09 at 11.54.44 PM</span><span class=\"informations\">1184×1132 224 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "I'm making my own collection of typst samples in a document. I'd like to generate images to show with the samples the same way the documentation does. I saw a post from 2023 in the discord that sounded like the code to do that was closed source. Is that still the case?\n\n(I've also seen the tidy package but that has a lot more output than I'm looking for. I'd like to have what amounts to an image of a single page with the output from the example source)\n\n![Screenshot 2025-02-09 at 11.54.44 PM|522x499](upload://rOhytK3d6LOPMAnQqi4CkLravil.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 327.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1164
    },
    {
      "id": 8420,
      "post_number": 2,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-02-10T09:37:21.533Z",
      "updated_at": "2025-02-10T09:37:21.533Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/alan\">@Alan</a> and welcome!<br>\nI have changed your post to <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a>, don’t hesitate to also add relevant tags!</p>\n<p>For the image, it is more or less reproducible like this</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 8cm, height: auto, margin: .5cm)\n#set heading(numbering: \"I.\")\n#set text(font: \"New Computer Modern\")\n\n= Introduction\nWith set rules, you can style your document.\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/3/328be274297389c96c7d4c5714784b3b84d09b25.png\" alt=\"image\" data-base62-sha1=\"7d9zDM5vsCMq6hKXblr3RrAigEB\" width=\"452\" height=\"140\"></p>",
      "raw": "Hello @Alan and welcome!\nI have changed your post to #questions, don't hesitate to also add relevant tags!\n\nFor the image, it is more or less reproducible like this\n\n```typ\n#set page(width: 8cm, height: auto, margin: .5cm)\n#set heading(numbering: \"I.\")\n#set text(font: \"New Computer Modern\")\n\n= Introduction\nWith set rules, you can style your document.\n```\n![image|452x140](upload://7d9zDM5vsCMq6hKXblr3RrAigEB.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 7.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 8426,
      "post_number": 3,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-10T11:18:16.618Z",
      "updated_at": "2025-02-10T11:18:16.618Z",
      "cooked": "<p>If you’re looking for a way to show both the code and the output automatically within a typst document, you can do so like this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">\n#let makedocs(dic) = context [\n  #let b1 = block(stroke: 1pt + luma(220), outset: 3pt, radius: 5pt)[\n    #dic\n  ]  \n  #let b2 = block(stroke: 5pt + luma(220), outset: 5pt)[\n    #eval(dic.text, mode: \"markup\")\n  ]\n  #let s1 = measure(b1).width\n  #let s2 = measure(b2).width\n\n  #set block(width: calc.max(s1, s2))\n  \n  #b1\n  #b2\n]\n\n\n\n#makedocs(```typst\n#set text(fill: blue)\nI am blue!\n```)\n\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/a/a13eaccceea3bb556a0b0e88741d0d77f761b04b.png\" alt=\"image\" data-base62-sha1=\"n0r9vldlvil9ROM5W8vX4kjJDwD\" width=\"216\" height=\"112\"></p>",
      "raw": "If you're looking for a way to show both the code and the output automatically within a typst document, you can do so like this:\n\n```typst\n\n#let makedocs(dic) = context [\n  #let b1 = block(stroke: 1pt + luma(220), outset: 3pt, radius: 5pt)[\n    #dic\n  ]  \n  #let b2 = block(stroke: 5pt + luma(220), outset: 5pt)[\n    #eval(dic.text, mode: \"markup\")\n  ]\n  #let s1 = measure(b1).width\n  #let s2 = measure(b2).width\n\n  #set block(width: calc.max(s1, s2))\n  \n  #b1\n  #b2\n]\n\n\n\n#makedocs(```typst\n#set text(fill: blue)\nI am blue!\n```)\n\n```\n\n\n![image|216x112](upload://n0r9vldlvil9ROM5W8vX4kjJDwD.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 37,
      "score": 27.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 8431,
      "post_number": 4,
      "username": "Alan",
      "name": "Alan",
      "created_at": "2025-02-10T13:57:47.634Z",
      "updated_at": "2025-02-21T22:07:16.807Z",
      "cooked": "<p>This is great!</p>\n<p>Can this also do things like show examples of adding page headers. (For example, like the “Add headers and footers” of <a href=\"https://typst.app/docs/guides/page-setup-guide/\">the page setup guide</a>)</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/0/0cf52fc40aba5fb307958b5c1df8f01ca31915e8.png\" data-download-href=\"https://forum.typst.app/uploads/default/0cf52fc40aba5fb307958b5c1df8f01ca31915e8\" title=\"Screenshot 2025-02-10 at 8.57.22 AM\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/0/0cf52fc40aba5fb307958b5c1df8f01ca31915e8_2_529x500.png\" alt=\"Screenshot 2025-02-10 at 8.57.22 AM\" data-base62-sha1=\"1QD2rLuMuIkoQZ7zEawtC8pj3AI\" width=\"529\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/0/0cf52fc40aba5fb307958b5c1df8f01ca31915e8_2_529x500.png, https://forum.typst.app/uploads/default/optimized/2X/0/0cf52fc40aba5fb307958b5c1df8f01ca31915e8_2_793x750.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/0/0cf52fc40aba5fb307958b5c1df8f01ca31915e8_2_1058x1000.png 2x\" data-dominant-color=\"5F6060\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-02-10 at 8.57.22 AM</span><span class=\"informations\">1290×1218 294 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I currently get a page configuration is not allowed inside containers error if I try that. For example, this</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#makedocs(```typst\n#set page(header: [Here i am])\n#set text(fill: blue)\n= DO I SHOW UP IN THE OUTLINE\nI am blue!\n```)\n</code></pre>\n<p>Results in this:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/7/7450f4edebb6361eabb905a65ec4165c06026685.png\" data-download-href=\"https://forum.typst.app/uploads/default/7450f4edebb6361eabb905a65ec4165c06026685\" title=\"Screenshot 2025-02-10 at 9.04.14 AM\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/7/7450f4edebb6361eabb905a65ec4165c06026685_2_690x298.png\" alt=\"Screenshot 2025-02-10 at 9.04.14 AM\" data-base62-sha1=\"gAYPO7M8Ywgk2pEnrPPPaQChlbL\" width=\"690\" height=\"298\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/7/7450f4edebb6361eabb905a65ec4165c06026685_2_690x298.png, https://forum.typst.app/uploads/default/optimized/2X/7/7450f4edebb6361eabb905a65ec4165c06026685_2_1035x447.png 1.5x, https://forum.typst.app/uploads/default/original/2X/7/7450f4edebb6361eabb905a65ec4165c06026685.png 2x\" data-dominant-color=\"201F20\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-02-10 at 9.04.14 AM</span><span class=\"informations\">1318×570 313 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "This is great!\n\nCan this also do things like show examples of adding page headers. (For example, like the \"Add headers and footers\" of [the page setup guide](https://typst.app/docs/guides/page-setup-guide/))\n\n![Screenshot 2025-02-10 at 8.57.22 AM|529x500](upload://1QD2rLuMuIkoQZ7zEawtC8pj3AI.png)\n\nI currently get a page configuration is not allowed inside containers error if I try that. For example, this\n\n````typ\n#makedocs(```typst\n#set page(header: [Here i am])\n#set text(fill: blue)\n= DO I SHOW UP IN THE OUTLINE\nI am blue!\n```)\n````\nResults in this:\n\n![Screenshot 2025-02-10 at 9.04.14 AM|690x298](upload://gAYPO7M8Ywgk2pEnrPPPaQChlbL.png)",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 12.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1164
    },
    {
      "id": 8432,
      "post_number": 5,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-10T14:59:00.790Z",
      "updated_at": "2025-02-10T14:59:00.790Z",
      "cooked": "<p>Yeah this is a bit trickier. AFAIK, Typst doesn’t really support nesting pages inside a document, so the only way to display the entire page is to render it in a new page.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let makedocs(dic) = context [\n  #if \"#set page\" in dic.text [\n    #let b1 = block(stroke: 1pt + luma(220), outset: 3pt, radius: 5pt)[\n      #dic\n    ]\n    #let b2 = eval(dic.text, mode: \"markup\")\n    #b1\n    #set page(paper: \"a5\") // comment out if you want\n    #b2\n    #return\n  ]\n  // else\n  #let b1 = block(stroke: 1pt + luma(220), outset: 3pt, radius: 5pt)[\n    #dic\n  ]  \n  \n  #let b2 = block(stroke: 5pt + luma(220), outset: 5pt)[\n    #eval(dic.text, mode: \"markup\")\n  ]\n  #let s1 = measure(b1).width\n  #let s2 = measure(b2).width\n\n  #set block(width: calc.max(s1, s2))\n  \n  #b1\n  #b2\n  \n]\n\n#makedocs(```typst\n#set page(header: [Here i am])\n#set text(fill: blue)\n= DO I SHOW UP IN THE OUTLINE\nI am blue!\n```)\n\n\n#makedocs(```typst\n#set text(fill: blue)\nI am blue!\n```)\n```\n\nMaybe someone else can come up with a more elegant solution</code></pre>",
      "raw": "Yeah this is a bit trickier. AFAIK, Typst doesn't really support nesting pages inside a document, so the only way to display the entire page is to render it in a new page. \n\n````typst\n#let makedocs(dic) = context [\n  #if \"#set page\" in dic.text [\n    #let b1 = block(stroke: 1pt + luma(220), outset: 3pt, radius: 5pt)[\n      #dic\n    ]\n    #let b2 = eval(dic.text, mode: \"markup\")\n    #b1\n    #set page(paper: \"a5\") // comment out if you want\n    #b2\n    #return\n  ]\n  // else\n  #let b1 = block(stroke: 1pt + luma(220), outset: 3pt, radius: 5pt)[\n    #dic\n  ]  \n  \n  #let b2 = block(stroke: 5pt + luma(220), outset: 5pt)[\n    #eval(dic.text, mode: \"markup\")\n  ]\n  #let s1 = measure(b1).width\n  #let s2 = measure(b2).width\n\n  #set block(width: calc.max(s1, s2))\n  \n  #b1\n  #b2\n  \n]\n\n#makedocs(```typst\n#set page(header: [Here i am])\n#set text(fill: blue)\n= DO I SHOW UP IN THE OUTLINE\nI am blue!\n```)\n\n\n#makedocs(```typst\n#set text(fill: blue)\nI am blue!\n```)\n```\n\nMaybe someone else can come up with a more elegant solution",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 16.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 8438,
      "post_number": 6,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-10T15:40:06.881Z",
      "updated_at": "2025-02-10T15:40:06.881Z",
      "cooked": "<p>There are two projects I know of that allow compiling Typst inside Typst. They are not available on Typst Universe due to their size. Unfortunately, I don’t know how easy they are to use or their current state.</p>\n<p>One project by <a class=\"mention\" href=\"/u/myriad-dreamin\">@Myriad-Dreamin</a> was showcased on Discord <a href=\"https://discord.com/channels/1054443721975922748/1202501035592261632\">here</a> and is used to write a <a href=\"https://github.com/typst-doc-cn/tutorial/tree/main\">Chinese Typst tutorial</a>. There are <a href=\"https://github.com/typst-doc-cn/tutorial-artifacts/tree/v0.1.0\">precompiled files</a> available, as well as the <a href=\"https://github.com/typst-doc-cn/tutorial/tree/main/crates/embedded-typst\">source</a>.</p>\n<p>The other project is <a href=\"https://github.com/freundTech/typst-matryoshka\">typst-matryoshka</a> which was also showcased on Discord <a href=\"https://discord.com/channels/1054443721975922748/1257747003111379034\">here</a>.</p>",
      "raw": "There are two projects I know of that allow compiling Typst inside Typst. They are not available on Typst Universe due to their size. Unfortunately, I don't know how easy they are to use or their current state.\n\nOne project by @Myriad-Dreamin was showcased on Discord [here](https://discord.com/channels/1054443721975922748/1202501035592261632) and is used to write a [Chinese Typst tutorial](https://github.com/typst-doc-cn/tutorial/tree/main). There are [precompiled files](https://github.com/typst-doc-cn/tutorial-artifacts/tree/v0.1.0) available, as well as the [source](https://github.com/typst-doc-cn/tutorial/tree/main/crates/embedded-typst). \n\nThe other project is [typst-matryoshka](https://github.com/freundTech/typst-matryoshka) which was also showcased on Discord [here](https://discord.com/channels/1054443721975922748/1257747003111379034).",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 16.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 8443,
      "post_number": 7,
      "username": "Alan",
      "name": "Alan",
      "created_at": "2025-02-10T18:05:19.186Z",
      "updated_at": "2025-02-10T18:05:19.186Z",
      "cooked": "<p>right on. I’ll check those out.</p>\n<p>thanks!</p>",
      "raw": "right on. I'll check those out. \n\nthanks!",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 6.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1164
    },
    {
      "id": 8467,
      "post_number": 8,
      "username": "Alan",
      "name": "Alan",
      "created_at": "2025-02-11T13:15:48.279Z",
      "updated_at": "2025-02-11T13:15:48.279Z",
      "cooked": "<p>As a follow up, the approach I’m moving to looks like this:</p>\n<ul>\n<li>write the snippets I’d like to show in their own files</li>\n<li>set up an external process to watch those files and output them to png whenever the change</li>\n<li>write a typst function that lets me include the original text and the png in my main document with a single call</li>\n</ul>\n<p>for the process that outputs the pngs I expect I’ll end up adding a way to apply some styling to the snippet that isn’t displayed in the text output in the main file. I’ll do this by adding a comment line that let’s me split the text so I can put any formatting above it and then only show what’s below it in the output.</p>",
      "raw": "As a follow up, the approach I'm moving to looks like this:\n\n- write the snippets I'd like to show in their own files\n- set up an external process to watch those files and output them to png whenever the change\n- write a typst function that lets me include the original text and the png in my main document with a single call\n\nfor the process that outputs the pngs I expect I'll end up adding a way to apply some styling to the snippet that isn't displayed in the text output in the main file. I'll do this by adding a comment line that let's me split the text so I can put any formatting above it and then only show what's below it in the output.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 9.2,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 1164
    }
  ],
  "scraped_at": "2025-06-10T09:51:52.518966"
}