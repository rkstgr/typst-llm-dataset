{
  "topic_metadata": {
    "id": 2572,
    "title": "Numbering: how can I avoid subsections becoming 0.1, and how can I number examples?",
    "slug": "numbering-how-can-i-avoid-subsections-becoming-0-1-and-how-can-i-number-examples",
    "posts_count": 7,
    "created_at": "2025-01-28T08:29:56.930Z",
    "last_posted_at": "2025-01-29T17:23:51.852Z",
    "views": 241,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "flokl",
    "tags": [
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 807
  },
  "posts": [
    {
      "id": 7951,
      "post_number": 1,
      "username": "Andrew_van_der_Spuy",
      "name": "Andrew van der Spuy",
      "created_at": "2025-01-28T08:29:57.181Z",
      "updated_at": "2025-01-29T22:22:03.492Z",
      "cooked": "<p>I’ve now nearly completed the mark-up on my first document, an academic article. Typst is amazing! Much, much easier to use than LaTeX.</p>\n<p>First question:<br>\nI’ve inserted the instruction '<span class=\"hashtag-raw\">#set</span> heading(numbering: “1.”).  I first put it right at the beginning of my document, and as a result the section numbers came out as “1.1”, “1.2”,  etc. Then I moved it after the main heading and before the Introduction. The numbers came out as “0.1”, 0.2\", etc. I want the main sections to be simply numbered “1”, “2”, etc. How do I do this?</p>\n<p>Second question: how can I number examples automatically? I see there’s a way of numbering maths equations, but my examples are not equations. I’d like them to be simply numbered “1”, “2”, etc., and when referenced, they should just appear as a number in parenthesis, as in this example: “See (23)”;  not “See Example (23)”.</p>",
      "raw": "I've now nearly completed the mark-up on my first document, an academic article. Typst is amazing! Much, much easier to use than LaTeX. \n\nFirst question:\nI've inserted the instruction '#set heading(numbering: \"1.\").  I first put it right at the beginning of my document, and as a result the section numbers came out as \"1.1\", \"1.2\",  etc. Then I moved it after the main heading and before the Introduction. The numbers came out as \"0.1\", 0.2\", etc. I want the main sections to be simply numbered \"1\", \"2\", etc. How do I do this?\n\nSecond question: how can I number examples automatically? I see there's a way of numbering maths equations, but my examples are not equations. I'd like them to be simply numbered \"1\", \"2\", etc., and when referenced, they should just appear as a number in parenthesis, as in this example: \"See (23)\";  not \"See Example (23)\".",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 763.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1093
    },
    {
      "id": 7973,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-01-28T21:04:10.146Z",
      "updated_at": "2025-01-28T21:04:10.146Z",
      "cooked": "<p>for question 1, if i’ve understood correctly you should set heading numbering to <code>numbering: \"1.1\"</code>. If you want something more complex, you can also set it to your own function, <code>numbering((..nums) =&gt; {...})</code></p>\n<p>For question 2, you can follow the advice from the <a href=\"https://typst.app/docs/reference/model/ref/\">docs</a>, \" To create a custom referenceable element like a theorem, you can create a figure of a custom <a href=\"https://typst.app/docs/reference/model/figure/#parameters-kind\"><code>kind</code></a> and write a show rule for it. In the future, there might be a more direct way to define a custom referenceable element.\"</p>\n<p>So for example, something like this</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let example(content) = figure(kind: \"example\", supplement: \"Example\", numbering: \"1\")[\n  #content\n]\n\n#show figure.where(kind: \"example\"): it =&gt; context [\n  #set align(left)\n  #it.supplement #counter(figure.where(kind: \"example\")).display(it.numbering): #it.body\n]\n</code></pre>\n<p>and use it like so</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#example[let $a = 5$. Then $f(a) &lt; 10$ if $f(x) = x$]&lt;example&gt;\n\nas seen in @example,... \n</code></pre>",
      "raw": "for question 1, if i've understood correctly you should set heading numbering to `numbering: \"1.1\"`. If you want something more complex, you can also set it to your own function, `numbering((..nums) => {...})`\n\nFor question 2, you can follow the advice from the [docs](https://typst.app/docs/reference/model/ref/), \" To create a custom referenceable element like a theorem, you can create a figure of a custom [`kind`](https://typst.app/docs/reference/model/figure/#parameters-kind) and write a show rule for it. In the future, there might be a more direct way to define a custom referenceable element.\"\n\nSo for example, something like this\n\n```typst\n#let example(content) = figure(kind: \"example\", supplement: \"Example\", numbering: \"1\")[\n  #content\n]\n\n#show figure.where(kind: \"example\"): it => context [\n  #set align(left)\n  #it.supplement #counter(figure.where(kind: \"example\")).display(it.numbering): #it.body\n]\n```\n\nand use it like so\n```typst\n#example[let $a = 5$. Then $f(a) < 10$ if $f(x) = x$]<example>\n\nas seen in @example,... \n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 18.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 7983,
      "post_number": 3,
      "username": "Andrew_van_der_Spuy",
      "name": "Andrew van der Spuy",
      "created_at": "2025-01-29T08:43:58.613Z",
      "updated_at": "2025-01-29T08:43:58.613Z",
      "cooked": "<p>Thanks, aarnent!<br>\nYour answer to question 1 unfortunately doesn’t work. I’m still getting “Section 0.1, Section 0.2” instead of “Section 1, Section 2”.<br>\nYour answer to question 2 works nicely except for one problem: the Example numbering comes out as “Example 1”, “Example 2”, etc., and the references are like that too. What I’m wanting is just “(1), (2)”, etc.,  without the word “Example”. Can this be done?<br>\nThanks again for your help so far!</p>",
      "raw": "Thanks, aarnent! \nYour answer to question 1 unfortunately doesn't work. I'm still getting \"Section 0.1, Section 0.2\" instead of \"Section 1, Section 2\".\nYour answer to question 2 works nicely except for one problem: the Example numbering comes out as \"Example 1\", \"Example 2\", etc., and the references are like that too. What I'm wanting is just \"(1), (2)\", etc.,  without the word \"Example\". Can this be done?\nThanks again for your help so far!",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 32,
      "score": 21.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1093
    },
    {
      "id": 7984,
      "post_number": 4,
      "username": "flokl",
      "name": "",
      "created_at": "2025-01-29T08:54:24.998Z",
      "updated_at": "2025-01-29T09:04:57.355Z",
      "cooked": "<p>1: Do you mean by “main heading” the title of the document? If yes use <code>#text(size: 123pt)[Document Title]</code> and <code>= Section</code> for your chapters/sections.<br>\n2: You have to modify how the reference gets displayed:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show ref: it =&gt; {\n let el = it.element\n if el != none and el.func() == figure and el.kind == \"example\" {\n   // Override example figure\n   link(el.location(),\n     numbering(\n       \"(1)\",\n       ..counter(figure.where(kind: \"example\")).at(el.location())\n     )\n   )\n } else {\n   // Other references as usual.\n   it\n }\n}\n</code></pre>",
      "raw": "1: Do you mean by \"main heading\" the title of the document? If yes use `#text(size: 123pt)[Document Title]` and `= Section` for your chapters/sections.\n2: You have to modify how the reference gets displayed:\n ```typ\n#show ref: it => {\n  let el = it.element\n  if el != none and el.func() == figure and el.kind == \"example\" {\n    // Override example figure\n    link(el.location(),\n      numbering(\n        \"(1)\",\n        ..counter(figure.where(kind: \"example\")).at(el.location())\n      )\n    )\n  } else {\n    // Other references as usual.\n    it\n  }\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 31,
      "score": 6.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 7997,
      "post_number": 5,
      "username": "Andrew_van_der_Spuy",
      "name": "Andrew van der Spuy",
      "created_at": "2025-01-29T15:36:36.613Z",
      "updated_at": "2025-01-29T15:38:30.551Z",
      "cooked": "<p>Hi flokl, thanks for your help. Your solution to my first question works perfectly, but unfortunately the following is happening with your solution to question 2:</p>\n<p>The “<span class=\"mention\">@label</span>” tags are coming out numbered correctly, and in the correct format (Example “see (2) above”, but the numbers are not appearing next to the actual examples; and also, the examples are being centered, whereas they should ideally be in a 'hanging indent format against the left margin, e.g.:</p>\n<p>(7)  <em>…dat hij Cecilia een boom hielp vellen</em><br>\n… that he Cecilia a tree helped cut.down<br>\n“that he helped Cecilia cut down a tree”</p>\n<p>Is there a way of achieving this?<br>\nThanks!</p>\n<p>I see the post won’t accept my formatting:<br>\nthe first line of the example should be against the left margin, but the second and third lines should start under the “_…dat”</p>",
      "raw": "Hi flokl, thanks for your help. Your solution to my first question works perfectly, but unfortunately the following is happening with your solution to question 2:\n\nThe \"@label\" tags are coming out numbered correctly, and in the correct format (Example \"see (2) above\", but the numbers are not appearing next to the actual examples; and also, the examples are being centered, whereas they should ideally be in a 'hanging indent format against the left margin, e.g.:\n\n(7)  _…dat hij Cecilia een boom hielp vellen_  \n      … that he Cecilia a tree helped cut.down \n      “that he helped Cecilia cut down a tree”\n\nIs there a way of achieving this?\nThanks!\n\nI see the post won't accept my formatting:\nthe first line of the example should be against the left margin, but the second and third lines should start under the \"_...dat\"",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 5.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1093
    },
    {
      "id": 7999,
      "post_number": 6,
      "username": "flokl",
      "name": "",
      "created_at": "2025-01-29T17:10:37.230Z",
      "updated_at": "2025-01-29T17:11:55.661Z",
      "cooked": "<p>Okay, my brain skipped half of the second question. So if you want both the numbering of your example and the reference to it in the same format “(1)” there is no need for my <code>#show ref:</code> posted above.<br>\nWith <a class=\"mention\" href=\"/u/aarnent\">@aarnent</a>’s code the examples should be left aligned and the numbering in the correct spot, here is a full example with the modified code from <a class=\"mention\" href=\"/u/aarnent\">@aarnent</a> :</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let example(content) = figure(\n  kind: \"example\", \n  supplement: none, \n  numbering: (num) =&gt; numbering(\"(1)\", num), \n  content\n)\n\n#show figure.where(kind: \"example\"): it =&gt; align(left,{\n  grid(columns: 2, \n    {\n      it.supplement\n      sym.space\n      counter(figure.where(kind:\"example\")).display(it.numbering)\n      sym.space\n    },\n    it.body\n  )\n})\n\n#example[\n…dat hij Cecilia een boom hielp vellen\\\n…that he Cecilia a tree helped cut.down\\\n“that he helped Cecilia cut down a tree”\n]&lt;example&gt;\n\n#example[And another\\\nexample\n]&lt;example2&gt;\n\nas seen in @example and @example2\n</code></pre>\n<details>\n<summary>\nOutput</summary>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/e/ec78178178349daf4851e0374e10b011397a31ce.png\" data-download-href=\"https://forum.typst.app/uploads/default/ec78178178349daf4851e0374e10b011397a31ce\" title=\"test\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/e/ec78178178349daf4851e0374e10b011397a31ce_2_690x171.png\" alt=\"test\" data-base62-sha1=\"xJTYFALHTPF9V13k2XysItiD0LA\" width=\"690\" height=\"171\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/e/ec78178178349daf4851e0374e10b011397a31ce_2_690x171.png, https://forum.typst.app/uploads/default/optimized/2X/e/ec78178178349daf4851e0374e10b011397a31ce_2_1035x256.png 1.5x, https://forum.typst.app/uploads/default/original/2X/e/ec78178178349daf4851e0374e10b011397a31ce.png 2x\" data-dominant-color=\"FBFBFB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">test</span><span class=\"informations\">1191×296 58.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<p>If this is not the output you want, please provide an example (e.g. screenshot) of the output you want.</p>",
      "raw": "Okay, my brain skipped half of the second question. So if you want both the numbering of your example and the reference to it in the same format \"(1)\" there is no need for my `#show ref:` posted above.\nWith @aarnent's code the examples should be left aligned and the numbering in the correct spot, here is a full example with the modified code from @aarnent :\n```typ\n#let example(content) = figure(\n  kind: \"example\", \n  supplement: none, \n  numbering: (num) => numbering(\"(1)\", num), \n  content\n)\n\n#show figure.where(kind: \"example\"): it => align(left,{\n  grid(columns: 2, \n    {\n      it.supplement\n      sym.space\n      counter(figure.where(kind:\"example\")).display(it.numbering)\n      sym.space\n    },\n    it.body\n  )\n})\n\n#example[\n…dat hij Cecilia een boom hielp vellen\\\n…that he Cecilia a tree helped cut.down\\\n“that he helped Cecilia cut down a tree”\n]<example>\n\n#example[And another\\\nexample\n]<example2>\n\nas seen in @example and @example2\n```\n\n[details=\"Output\"]\n![test|690x171](upload://xJTYFALHTPF9V13k2XysItiD0LA.png)\n[/details]\nIf this is not the output you want, please provide an example (e.g. screenshot) of the output you want.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 80.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 8000,
      "post_number": 7,
      "username": "Andrew_van_der_Spuy",
      "name": "Andrew van der Spuy",
      "created_at": "2025-01-29T17:23:51.852Z",
      "updated_at": "2025-01-29T17:23:51.852Z",
      "cooked": "<p>Tank you flokl! It is now working exactly as it should!</p>",
      "raw": "Tank you flokl! It is now working exactly as it should!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 4.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1093
    }
  ],
  "scraped_at": "2025-06-10T09:52:25.009870"
}