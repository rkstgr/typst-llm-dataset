{
  "topic_metadata": {
    "id": 4306,
    "title": "How to draw a decorative frame (rect with concave corners) around text?",
    "slug": "how-to-draw-a-decorative-frame-rect-with-concave-corners-around-text",
    "posts_count": 10,
    "created_at": "2025-05-26T18:54:33.408Z",
    "last_posted_at": "2025-05-28T12:52:49.110Z",
    "views": 135,
    "like_count": 4,
    "reply_count": 8,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Andrew",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 1775
  },
  "posts": [
    {
      "id": 13190,
      "post_number": 1,
      "username": "svat",
      "name": "",
      "created_at": "2025-05-26T18:54:33.477Z",
      "updated_at": "2025-05-26T18:54:33.477Z",
      "cooked": "<p>I’m trying to replicate in Typst an existing book design (created in InDesign) that has decorative frames around certain text (quotes), with <em>concave</em> rounded corners and double-stroked borders (bold outer frame, and with a small padding, a less bold inner frame). It looks as in the image below (text blurred out to redact it):</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/5be21b6f43ce1c1d242c2a9e1d61d3d0b1e2150d.png\" data-download-href=\"https://forum.typst.app/uploads/default/5be21b6f43ce1c1d242c2a9e1d61d3d0b1e2150d\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/5be21b6f43ce1c1d242c2a9e1d61d3d0b1e2150d_2_690x352.png\" alt=\"image\" data-base62-sha1=\"d6PSH6q6JuUAmOn45Zxnfcs2gKV\" width=\"690\" height=\"352\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/5be21b6f43ce1c1d242c2a9e1d61d3d0b1e2150d_2_690x352.png, https://forum.typst.app/uploads/default/original/2X/5/5be21b6f43ce1c1d242c2a9e1d61d3d0b1e2150d.png 1.5x, https://forum.typst.app/uploads/default/original/2X/5/5be21b6f43ce1c1d242c2a9e1d61d3d0b1e2150d.png 2x\" data-dominant-color=\"EEEEEE\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">936×478 16.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>How can this be done in Typst? The frames are always the full width of the text block, but height should resize to that of the text contents (as <code>#rect</code> does by default).</p>",
      "raw": "I'm trying to replicate in Typst an existing book design (created in InDesign) that has decorative frames around certain text (quotes), with *concave* rounded corners and double-stroked borders (bold outer frame, and with a small padding, a less bold inner frame). It looks as in the image below (text blurred out to redact it):\n\n![image|690x352](upload://d6PSH6q6JuUAmOn45Zxnfcs2gKV.png)\n\nHow can this be done in Typst? The frames are always the full width of the text block, but height should resize to that of the text contents (as `#rect` does by default).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 38,
      "score": 47.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1659
    },
    {
      "id": 13193,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-26T21:31:19.724Z",
      "updated_at": "2025-05-26T21:35:24.487Z",
      "cooked": "<p>Hello.</p>\n<p>IMO, if you are <em>trying</em> to do something, then it means you have some progress or something that you’ve tried, therefore this should be present in the post. So far you’ve only described and showed how it should look like and how can this be done. This sends conflicting signals, as if you are trying, but actually you didn’t try anything, which is not great. Perhaps a wrong verb was chosen.</p>\n<p>Here is something that looks like what you want, not sure about corner specifics:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let frame-shape(width: 10cm, height: 5cm, radius: 15pt, a: 0pt, ..args) = {\n  set curve.quad(relative: true)\n  set curve.line(relative: true)\n  curve(\n    ..args,\n    curve.move((0pt, radius)),\n    curve.line((0pt, height - radius * 2)), // Left\n    curve.quad((-a + radius, a), (radius, radius)), // Bottom-left\n    curve.line((width - radius * 2, 0pt)), // Bottom\n    curve.quad((a, a - radius), (radius, 0pt - radius)), // Bottom-right\n    curve.line((0pt, -height + radius * 2)), // Right\n    curve.quad((a - radius, -a), (-radius, -radius)), // Top-right\n    curve.line((-width + radius * 2, 0pt)), // Top edge\n    curve.quad((-a, -a + radius), (-radius, radius)), // Top-left\n  )\n}\n\n#let frame(\n  width: 10cm,\n  height: auto,\n  radius: 15pt,\n  inner: 2pt,\n  stroke: 1pt,\n  inner-stroke: 0.5pt,\n  body,\n) = {\n  layout(size =&gt; {\n    let body-block = block.with(width: width, inset: radius + inner)\n    let (height, body) = if height != auto {\n      (height, body-block(height: height, body))\n    } else {\n      let body = body-block(body)\n      (measure(body, ..size).height, body)\n    }\n    place(frame-shape(\n      width: width,\n      height: height,\n      radius: radius,\n      stroke: stroke,\n    ))\n    place(dx: inner, dy: inner, frame-shape(\n      width: width - inner * 2,\n      height: height - inner * 2,\n      radius: radius,\n      stroke: inner-stroke,\n      a: inner / 2,\n    ))\n    body\n  })\n}\n\n#set par(justify: true)\n\n#frame(lorem(25))\n\n#frame(width: 13cm)[\n  #align(center, lorem(5))\n\n  #align(center, lorem(7))\n\n  #lorem(59)\n\n  #lorem(6)\n]\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/5549199cc843157d604a1e41508dc01d320e1f4d.png\" data-download-href=\"https://forum.typst.app/uploads/default/5549199cc843157d604a1e41508dc01d320e1f4d\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/original/2X/5/5549199cc843157d604a1e41508dc01d320e1f4d.png\" alt=\"image\" data-base62-sha1=\"catct6vc5lLl01PfyYZWy06SrzT\" width=\"637\" height=\"479\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">637×479 78.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<hr>\n<p>About redacting. I don’t see why you can’t just remove the text and only leave the clean empty frame. Why going half-way and bother blurring if it’s not important anyway and can be stripped completely. A rule of thumb is to always avoid blurring, if you really don’t want to share the content, or it’s not important/relevant (it’s shape, etc).</p>",
      "raw": "Hello.\n\nIMO, if you are _trying_ to do something, then it means you have some progress or something that you've tried, therefore this should be present in the post. So far you've only described and showed how it should look like and how can this be done. This sends conflicting signals, as if you are trying, but actually you didn't try anything, which is not great. Perhaps a wrong verb was chosen.\n\nHere is something that looks like what you want, not sure about corner specifics:\n\n```typ\n#let frame-shape(width: 10cm, height: 5cm, radius: 15pt, a: 0pt, ..args) = {\n  set curve.quad(relative: true)\n  set curve.line(relative: true)\n  curve(\n    ..args,\n    curve.move((0pt, radius)),\n    curve.line((0pt, height - radius * 2)), // Left\n    curve.quad((-a + radius, a), (radius, radius)), // Bottom-left\n    curve.line((width - radius * 2, 0pt)), // Bottom\n    curve.quad((a, a - radius), (radius, 0pt - radius)), // Bottom-right\n    curve.line((0pt, -height + radius * 2)), // Right\n    curve.quad((a - radius, -a), (-radius, -radius)), // Top-right\n    curve.line((-width + radius * 2, 0pt)), // Top edge\n    curve.quad((-a, -a + radius), (-radius, radius)), // Top-left\n  )\n}\n\n#let frame(\n  width: 10cm,\n  height: auto,\n  radius: 15pt,\n  inner: 2pt,\n  stroke: 1pt,\n  inner-stroke: 0.5pt,\n  body,\n) = {\n  layout(size => {\n    let body-block = block.with(width: width, inset: radius + inner)\n    let (height, body) = if height != auto {\n      (height, body-block(height: height, body))\n    } else {\n      let body = body-block(body)\n      (measure(body, ..size).height, body)\n    }\n    place(frame-shape(\n      width: width,\n      height: height,\n      radius: radius,\n      stroke: stroke,\n    ))\n    place(dx: inner, dy: inner, frame-shape(\n      width: width - inner * 2,\n      height: height - inner * 2,\n      radius: radius,\n      stroke: inner-stroke,\n      a: inner / 2,\n    ))\n    body\n  })\n}\n\n#set par(justify: true)\n\n#frame(lorem(25))\n\n#frame(width: 13cm)[\n  #align(center, lorem(5))\n\n  #align(center, lorem(7))\n\n  #lorem(59)\n\n  #lorem(6)\n]\n```\n\n![image|637x479](upload://catct6vc5lLl01PfyYZWy06SrzT.png)\n\n---\n\nAbout redacting. I don't see why you can't just remove the text and only leave the clean empty frame. Why going half-way and bother blurring if it's not important anyway and can be stripped completely. A rule of thumb is to always avoid blurring, if you really don't want to share the content, or it's not important/relevant (it's shape, etc).",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 33,
      "score": 46.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 13199,
      "post_number": 3,
      "username": "svat",
      "name": "",
      "created_at": "2025-05-26T23:13:55.526Z",
      "updated_at": "2025-05-26T23:15:41.715Z",
      "cooked": "<p>Thank you; that’s very helpful and informative!</p>\n<p>The only thing I’d like to be different is for the frame to have the same full width as other text blocks, without having to manually specifying a width. Here’s an example of what I mean (screenshot of output from this project: <a href=\"https://typst.app/project/rb5dNVT6kxOk8EwZawp0iN\" class=\"inline-onebox\">Typst</a> ):</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/6/6d8469a3ba60c63e1299829f2577d8c538f45797.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/6d8469a3ba60c63e1299829f2577d8c538f45797\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/6/6d8469a3ba60c63e1299829f2577d8c538f45797_2_358x500.jpeg\" alt=\"image\" data-base62-sha1=\"fCPJHluXuMEGzhpUMxiYPNTbeQf\" width=\"358\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/6/6d8469a3ba60c63e1299829f2577d8c538f45797_2_358x500.jpeg, https://forum.typst.app/uploads/default/optimized/2X/6/6d8469a3ba60c63e1299829f2577d8c538f45797_2_537x750.jpeg 1.5x, https://forum.typst.app/uploads/default/optimized/2X/6/6d8469a3ba60c63e1299829f2577d8c538f45797_2_716x1000.jpeg 2x\" data-dominant-color=\"EFEEEF\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">988×1378 181 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>As you can see, on the left the frame starts at the same x-coordinate as the text, but on the right the width is different — I guess I could measure the earlier blocks’ width and specify that, but wondering if there’s a way to specify the inner width (of the text) by subtracting the relevant amounts from the “current” width, then measure the height, then draw the frame with the relevant width and height.</p>\n<p>(About the earlier question: true, I said “trying” but included no code; I should have said I’m exploring whether it’s feasible to use Typst for this use-case; I’m still currently on page 3, and all I had for this specific issue was a <code>#rect</code> with rounded corners, which I thought wasn’t worth sharing. There are other issues I’m encountering like <a href=\"https://forum.typst.app/t/paragraph-indentation-seems-to-be-buggy/4308\" class=\"inline-onebox\">Paragraph indentation seems to be buggy</a> which may mean I have to give up on Typst, so it’s still in the early stages of exploration. Also the screenshot tool I used to take a screenshot of the original PDF didn’t allow redacting with black bars which would have been better, but only allowed blurring, which I agree is a weird choice! There is actually something relevant about the shape, namely placing the last line indented a bit to fit into the frame, but I’m willing to forgo that.)</p>",
      "raw": "Thank you; that's very helpful and informative!\n\nThe only thing I'd like to be different is for the frame to have the same full width as other text blocks, without having to manually specifying a width. Here's an example of what I mean (screenshot of output from this project: https://typst.app/project/rb5dNVT6kxOk8EwZawp0iN ):\n\n![image|358x500](upload://fCPJHluXuMEGzhpUMxiYPNTbeQf.jpeg)\n\nAs you can see, on the left the frame starts at the same x-coordinate as the text, but on the right the width is different — I guess I could measure the earlier blocks' width and specify that, but wondering if there's a way to specify the inner width (of the text) by subtracting the relevant amounts from the \"current\" width, then measure the height, then draw the frame with the relevant width and height.\n\n(About the earlier question: true, I said “trying” but included no code; I should have said I'm exploring whether it's feasible to use Typst for this use-case; I'm still currently on page 3, and all I had for this specific issue was a `#rect` with rounded corners, which I thought wasn't worth sharing. There are other issues I'm encountering like https://forum.typst.app/t/paragraph-indentation-seems-to-be-buggy/4308 which may mean I have to give up on Typst, so it's still in the early stages of exploration. Also the screenshot tool I used to take a screenshot of the original PDF didn't allow redacting with black bars which would have been better, but only allowed blurring, which I agree is a weird choice! There is actually something relevant about the shape, namely placing the last line indented a bit to fit into the frame, but I'm willing to forgo that.)",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 10.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1659
    },
    {
      "id": 13211,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-27T02:41:24.998Z",
      "updated_at": "2025-05-27T02:41:24.998Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let frame-shape(width: 10cm, height: 5cm, radius: 15pt, a: 0pt, ..args) = {\n  set curve.quad(relative: true)\n  set curve.line(relative: true)\n  curve(\n    ..args,\n    curve.move((0pt, radius)),\n    curve.line((0pt, height - radius * 2)), // Left\n    curve.quad((-a + radius, a), (radius, radius)), // Bottom-left\n    curve.line((width - radius * 2, 0pt)), // Bottom\n    curve.quad((a, a - radius), (radius, 0pt - radius)), // Bottom-right\n    curve.line((0pt, -height + radius * 2)), // Right\n    curve.quad((a - radius, -a), (-radius, -radius)), // Top-right\n    curve.line((-width + radius * 2, 0pt)), // Top edge\n    curve.quad((-a, -a + radius), (-radius, radius)), // Top-left\n  )\n}\n\n#let frame(\n  width: 100%,\n  height: auto,\n  radius: 15pt,\n  inner: 2pt,\n  stroke: 1pt,\n  inner-stroke: 0.5pt,\n  body,\n) = {\n  layout(size =&gt; {\n    let body-block = block.with(width: width, inset: radius + inner)\n    let (height, body) = if height != auto {\n      (height, body-block(height: height, body))\n    } else {\n      let body = body-block(body)\n      (measure(body, ..size).height, body)\n    }\n    place(frame-shape(\n      width: width,\n      height: height,\n      radius: radius,\n      stroke: stroke,\n    ))\n    place(dx: inner, dy: inner, frame-shape(\n      width: width - inner * 2,\n      height: height - inner * 2,\n      radius: radius,\n      stroke: inner-stroke,\n      a: inner / 2,\n    ))\n    body\n  })\n}\n\n#set par(justify: true)\n\n#place(rect(width: 100%, height: 100%))\n#frame(lorem(50))\n#lorem(50)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/a/ac8cabcd23ad5c02454d1b5c01867ac11171e39e.png\" data-download-href=\"https://forum.typst.app/uploads/default/ac8cabcd23ad5c02454d1b5c01867ac11171e39e\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/a/ac8cabcd23ad5c02454d1b5c01867ac11171e39e_2_690x254.png\" alt=\"image\" data-base62-sha1=\"oCrvHECAmdWGDR9ICNJaIePsgnY\" width=\"690\" height=\"254\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/a/ac8cabcd23ad5c02454d1b5c01867ac11171e39e_2_690x254.png, https://forum.typst.app/uploads/default/original/2X/a/ac8cabcd23ad5c02454d1b5c01867ac11171e39e.png 1.5x, https://forum.typst.app/uploads/default/original/2X/a/ac8cabcd23ad5c02454d1b5c01867ac11171e39e.png 2x\" data-dominant-color=\"262626\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">822×303 70.3 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "```typ\n#let frame-shape(width: 10cm, height: 5cm, radius: 15pt, a: 0pt, ..args) = {\n  set curve.quad(relative: true)\n  set curve.line(relative: true)\n  curve(\n    ..args,\n    curve.move((0pt, radius)),\n    curve.line((0pt, height - radius * 2)), // Left\n    curve.quad((-a + radius, a), (radius, radius)), // Bottom-left\n    curve.line((width - radius * 2, 0pt)), // Bottom\n    curve.quad((a, a - radius), (radius, 0pt - radius)), // Bottom-right\n    curve.line((0pt, -height + radius * 2)), // Right\n    curve.quad((a - radius, -a), (-radius, -radius)), // Top-right\n    curve.line((-width + radius * 2, 0pt)), // Top edge\n    curve.quad((-a, -a + radius), (-radius, radius)), // Top-left\n  )\n}\n\n#let frame(\n  width: 100%,\n  height: auto,\n  radius: 15pt,\n  inner: 2pt,\n  stroke: 1pt,\n  inner-stroke: 0.5pt,\n  body,\n) = {\n  layout(size => {\n    let body-block = block.with(width: width, inset: radius + inner)\n    let (height, body) = if height != auto {\n      (height, body-block(height: height, body))\n    } else {\n      let body = body-block(body)\n      (measure(body, ..size).height, body)\n    }\n    place(frame-shape(\n      width: width,\n      height: height,\n      radius: radius,\n      stroke: stroke,\n    ))\n    place(dx: inner, dy: inner, frame-shape(\n      width: width - inner * 2,\n      height: height - inner * 2,\n      radius: radius,\n      stroke: inner-stroke,\n      a: inner / 2,\n    ))\n    body\n  })\n}\n\n#set par(justify: true)\n\n#place(rect(width: 100%, height: 100%))\n#frame(lorem(50))\n#lorem(50)\n```\n\n![image|690x254](upload://oCrvHECAmdWGDR9ICNJaIePsgnY.png)",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 26.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 13213,
      "post_number": 5,
      "username": "svat",
      "name": "",
      "created_at": "2025-05-27T02:53:46.622Z",
      "updated_at": "2025-05-27T02:53:46.622Z",
      "cooked": "<p>Ah <code>width: 100%</code> was what I was missing; thank you!</p>\n<p>(Now I recall seeing example of such relative widths in the tutorial e.g. <a href=\"https://typst.app/docs/tutorial/formatting/\" class=\"inline-onebox\">Formatting – Typst Documentation</a> but I’m not sure where it’s documented more formally what <code>100%</code> means in a given context: does it always mean the width of the text block on the page? I guess it’s the current width being used to break lines in the current place, kind of like TeX’s current value of <code>\\hsize</code>.)</p>",
      "raw": "Ah `width: 100%` was what I was missing; thank you!\n\n(Now I recall seeing example of such relative widths in the tutorial e.g. https://typst.app/docs/tutorial/formatting/ but I'm not sure where it's documented more formally what `100%` means in a given context: does it always mean the width of the text block on the page? I guess it's the current width being used to break lines in the current place, kind of like TeX's current value of `\\hsize`.)",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 16.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1659
    },
    {
      "id": 13215,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-27T03:11:49.539Z",
      "updated_at": "2025-05-27T03:11:49.539Z",
      "cooked": "<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/docs/reference/layout/relative/\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/docs/reference/layout/relative/\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/docs/reference/layout/relative/\" target=\"_blank\" rel=\"noopener\">Relative Length Type – Typst Documentation</a></h3>\n\n  <p>Documentation for the Relative Length type.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L11-L68\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L11-L68\" target=\"_blank\" rel=\"noopener\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L11-L68\" target=\"_blank\" rel=\"noopener\">crates/typst-library/src/layout/rel.rs?plain=1</a></h4>\n\n<div class=\"git-blob-info\">\n  <a href=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L11-L68\" rel=\"noopener\"><code>2f1865743</code></a>\n</div>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-rs?plain=1\">\n      <ol class=\"start lines\" start=\"11\" style=\"counter-reset: li-counter 10 ;\">\n          <li>/// A length in relation to some known length.</li>\n          <li>///</li>\n          <li>/// This type is a combination of a [length] with a [ratio]. It results from</li>\n          <li>/// addition and subtraction of a length and a ratio. Wherever a relative length</li>\n          <li>/// is expected, you can also use a bare length or ratio.</li>\n          <li>///</li>\n          <li>/// # Relative to the page</li>\n          <li>/// A common use case is setting the width or height of a layout element (e.g.,</li>\n          <li>/// [block], [rect], etc.) as a certain percentage of the width of the page.</li>\n          <li>/// Here, the rectangle's width is set to `{25%}`, so it takes up one fourth of</li>\n          <li>/// the page's _inner_ width (the width minus margins).</li>\n          <li>///</li>\n          <li>/// ```example</li>\n          <li>/// #rect(width: 25%)</li>\n          <li>/// ```</li>\n          <li>///</li>\n          <li>/// Bare lengths or ratios are always valid where relative lengths are expected,</li>\n          <li>/// but the two can also be freely mixed:</li>\n          <li>/// ```example</li>\n          <li>/// #rect(width: 25% + 1cm)</li>\n      </ol>\n    </code></pre>\n\n\n  This file has been truncated. <a href=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L11-L68\" target=\"_blank\" rel=\"noopener\">show original</a>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "https://typst.app/docs/reference/layout/relative/\n\nhttps://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L11-L68",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 29,
      "score": 35.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 13277,
      "post_number": 7,
      "username": "svat",
      "name": "",
      "created_at": "2025-05-27T13:55:15.783Z",
      "updated_at": "2025-05-27T13:55:15.783Z",
      "cooked": "<p><em>(Apologies if this is getting offtopic; I can start a new question or ask elsewhere if suggested…)</em></p>\n<p>Thank you; I’d read the documentation on relative lengths, but my question is more about: relative to what? For example, the source code link above suggests that often <code>25%</code>, <code>100%</code> etc are relative to “the width of the page”, but it also seems to make a distinction between that and “the page’s <em>full</em> width” (so the former apparently doesn’t include the margins). Is this documented anywhere? Also, as it says, in general these relative lengths are “relative to the container”, but how to figure out what the container is, i.e. what is the layout model? For example, in TeX: the page is a vbox made of a vertical list of hboxes (and glue), each of which was typically formed by breaking a horizontal list of boxes-and-glue (the paragraph). In Typst it appears there are different block-level elements: inline elements are collected into <a href=\"https://typst.app/docs/reference/model/par/\">paragraphs</a> but there are also <a href=\"https://typst.app/docs/reference/layout/block/\">block</a>, <a href=\"https://typst.app/docs/reference/visualize/rect/\">rect</a>, <a href=\"https://typst.app/docs/reference/layout/place/\">place</a>, etc — is there a full list of these elements somewhere? It would be useful for building a correct mental model of what’s going on, on a typical page.</p>",
      "raw": "*(Apologies if this is getting offtopic; I can start a new question or ask elsewhere if suggested…)*\n\nThank you; I'd read the documentation on relative lengths, but my question is more about: relative to what? For example, the source code link above suggests that often `25%`, `100%` etc are relative to “the width of the page”, but it also seems to make a distinction between that and “the page's _full_ width” (so the former apparently doesn't include the margins). Is this documented anywhere? Also, as it says, in general these relative lengths are “relative to the container”, but how to figure out what the container is, i.e. what is the layout model? For example, in TeX: the page is a vbox made of a vertical list of hboxes (and glue), each of which was typically formed by breaking a horizontal list of boxes-and-glue (the paragraph). In Typst it appears there are different block-level elements: inline elements are collected into [paragraphs](https://typst.app/docs/reference/model/par/) but there are also [block](https://typst.app/docs/reference/layout/block/), [rect](https://typst.app/docs/reference/visualize/rect/), [place](https://typst.app/docs/reference/layout/place/), etc — is there a full list of these elements somewhere? It would be useful for building a correct mental model of what's going on, on a typical page.",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 10.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1659
    },
    {
      "id": 13296,
      "post_number": 8,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-27T17:28:35.959Z",
      "updated_at": "2025-05-27T17:29:41.559Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"svat\" data-post=\"7\" data-topic=\"4306\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/svat/48/3123_2.png\" class=\"avatar\"> svat:</div>\n<blockquote>\n<p>I’d read the documentation on relative lengths, but my question is more about: relative to what?</p>\n</blockquote>\n</aside>\n<p>Doesn’t the documentation answers this?</p>\n<aside class=\"quote no-group\" data-username=\"svat\" data-post=\"7\" data-topic=\"4306\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/svat/48/3123_2.png\" class=\"avatar\"> svat:</div>\n<blockquote>\n<p>how to figure out what the container is</p>\n</blockquote>\n</aside>\n<p>Anything that creates a new region: rect, block, box, pad, etc. And default page/header/footer body.</p>\n<aside class=\"quote no-group\" data-username=\"svat\" data-post=\"7\" data-topic=\"4306\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/svat/48/3123_2.png\" class=\"avatar\"> svat:</div>\n<blockquote>\n<p>is there a full list of these elements somewhere?</p>\n</blockquote>\n</aside>\n<p>No, but you can request it.</p>",
      "raw": "[quote=\"svat, post:7, topic:4306\"]\nI’d read the documentation on relative lengths, but my question is more about: relative to what?\n[/quote]\n\nDoesn't the documentation answers this?\n\n[quote=\"svat, post:7, topic:4306\"]\nhow to figure out what the container is\n[/quote]\n\nAnything that creates a new region: rect, block, box, pad, etc. And default page/header/footer body.\n\n[quote=\"svat, post:7, topic:4306\"]\nis there a full list of these elements somewhere?\n[/quote]\n\nNo, but you can request it.",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 26,
      "score": 10.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 13319,
      "post_number": 9,
      "username": "svat",
      "name": "",
      "created_at": "2025-05-27T23:06:38.759Z",
      "updated_at": "2025-05-27T23:06:38.759Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"8\" data-topic=\"4306\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>Doesn’t the documentation answers this?</p>\n</blockquote>\n</aside>\n<p>No, it just says “A length in relation to some known length” when the crucial question is <em>what</em> the known length is. Is there some other page I should be looking at?</p>\n<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"8\" data-topic=\"4306\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>Anything that creates a new region: rect, block, box, pad, etc. And default page/header/footer body.</p>\n</blockquote>\n</aside>\n<p>Ah thanks, “region” is another term new to me that seems important to understand; what does it mean / where can I learn more about it? And what’s the difference between “page” and “body”, given that (for widths) “100% of the page” also seems to mean “100% of the body”?</p>\n<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"8\" data-topic=\"4306\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>No, but you can request it.</p>\n</blockquote>\n</aside>\n<p>Yes thanks that would be useful; where can I request this?</p>",
      "raw": "[quote=\"Andrew, post:8, topic:4306, full:true\"]\nDoesn’t the documentation answers this?\n[/quote]\n\nNo, it just says “A length in relation to some known length” when the crucial question is *what* the known length is. Is there some other page I should be looking at?\n\n[quote=\"Andrew, post:8, topic:4306, full:true\"]\nAnything that creates a new region: rect, block, box, pad, etc. And default page/header/footer body.\n[/quote]\n\nAh thanks, “region” is another term new to me that seems important to understand; what does it mean / where can I learn more about it? And what's the difference between “page” and “body”, given that (for widths) “100% of the page” also seems to mean “100% of the body”?\n\n[quote=\"Andrew, post:8, topic:4306, full:true\"]\nNo, but you can request it.\n[/quote]\n\nYes thanks that would be useful; where can I request this?",
      "reply_to_post_number": 8,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1659
    },
    {
      "id": 13352,
      "post_number": 10,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-28T12:52:49.110Z",
      "updated_at": "2025-05-28T12:52:49.110Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"svat\" data-post=\"9\" data-topic=\"4306\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/svat/48/3123_2.png\" class=\"avatar\"> svat:</div>\n<blockquote>\n<p>No, it just says “A length in relation to some known length” when the crucial question is <em>what</em> the known length is.</p>\n</blockquote>\n</aside>\n<p>This is a quote from the very first paragraph. There are 2 distinct sections that describe <em>what</em> the known length is.</p>\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L17\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L17\" target=\"_blank\" rel=\"noopener\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L17\" target=\"_blank\" rel=\"noopener\">crates/typst-library/src/layout/rel.rs?plain=1</a></h4>\n\n<div class=\"git-blob-info\">\n  <a href=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L17\" rel=\"noopener\"><code>2f1865743</code></a>\n</div>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-rs?plain=1\">\n      <ol class=\"start lines\" start=\"7\" style=\"counter-reset: li-counter 6 ;\">\n          <li></li>\n          <li>use crate::foundations::{cast, ty, Fold, Repr, Resolve, StyleChain};</li>\n          <li>use crate::layout::{Abs, Em, Length, Ratio};</li>\n          <li></li>\n          <li>/// A length in relation to some known length.</li>\n          <li>///</li>\n          <li>/// This type is a combination of a [length] with a [ratio]. It results from</li>\n          <li>/// addition and subtraction of a length and a ratio. Wherever a relative length</li>\n          <li>/// is expected, you can also use a bare length or ratio.</li>\n          <li>///</li>\n          <li class=\"selected\">/// # Relative to the page</li>\n          <li>/// A common use case is setting the width or height of a layout element (e.g.,</li>\n          <li>/// [block], [rect], etc.) as a certain percentage of the width of the page.</li>\n          <li>/// Here, the rectangle's width is set to `{25%}`, so it takes up one fourth of</li>\n          <li>/// the page's _inner_ width (the width minus margins).</li>\n          <li>///</li>\n          <li>/// ```example</li>\n          <li>/// #rect(width: 25%)</li>\n          <li>/// ```</li>\n          <li>///</li>\n          <li>/// Bare lengths or ratios are always valid where relative lengths are expected,</li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L44\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L44\" target=\"_blank\" rel=\"noopener\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L44\" target=\"_blank\" rel=\"noopener\">crates/typst-library/src/layout/rel.rs?plain=1</a></h4>\n\n<div class=\"git-blob-info\">\n  <a href=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L44\" rel=\"noopener\"><code>2f1865743</code></a>\n</div>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-rs?plain=1\">\n      <ol class=\"start lines\" start=\"34\" style=\"counter-reset: li-counter 33 ;\">\n          <li>/// width, you have a few options (this highly depends on your exact use case):</li>\n          <li>///</li>\n          <li>/// 1. Set page margins to `{0pt}` (`[#set page(margin: 0pt)]`)</li>\n          <li>/// 2. Multiply the ratio by the known full page width (`{21cm * 69%}`)</li>\n          <li>/// 3. Use padding which will negate the margins (`[#pad(x: -2.5cm, ...)]`)</li>\n          <li>/// 4. Use the page [background](page.background) or</li>\n          <li>///    [foreground](page.foreground) field as those don't take margins into</li>\n          <li>///    account (note that it will render the content outside of the document</li>\n          <li>///    flow, see [place] to control the content position)</li>\n          <li>///</li>\n          <li class=\"selected\">/// # Relative to a container</li>\n          <li>/// When a layout element (e.g. a [rect]) is nested in another layout container</li>\n          <li>/// (e.g. a [block]) instead of being a direct descendant of the page, relative</li>\n          <li>/// widths become relative to the container:</li>\n          <li>///</li>\n          <li>/// ```example</li>\n          <li>/// #block(</li>\n          <li>///   width: 100pt,</li>\n          <li>///   fill: aqua,</li>\n          <li>///   rect(width: 50%),</li>\n          <li>/// )</li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<aside class=\"quote no-group\" data-username=\"svat\" data-post=\"9\" data-topic=\"4306\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/svat/48/3123_2.png\" class=\"avatar\"> svat:</div>\n<blockquote>\n<p>“region” is another term new to me that seems important to understand; what does it mean / where can I learn more about it?</p>\n</blockquote>\n</aside>\n<p>From reading the Typst source code.</p>\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/regions.rs?plain=1#L5-L13\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/regions.rs?plain=1#L5-L13\" target=\"_blank\" rel=\"noopener\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/regions.rs?plain=1#L5-L13\" target=\"_blank\" rel=\"noopener\">crates/typst-library/src/layout/regions.rs?plain=1</a></h4>\n\n<div class=\"git-blob-info\">\n  <a href=\"https://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/regions.rs?plain=1#L5-L13\" rel=\"noopener\"><code>2f1865743</code></a>\n</div>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-rs?plain=1\">\n      <ol class=\"start lines\" start=\"5\" style=\"counter-reset: li-counter 4 ;\">\n          <li>/// A single region to layout into.</li>\n          <li>#[derive(Debug, Copy, Clone, Hash)]</li>\n          <li>pub struct Region {</li>\n          <li>    /// The size of the region.</li>\n          <li>    pub size: Size,</li>\n          <li>    /// Whether elements should expand to fill the regions instead of shrinking</li>\n          <li>    /// to fit the content.</li>\n          <li>    pub expand: Axes&lt;bool&gt;,</li>\n          <li>}</li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>I think the new docs should be enough for practical use. If not, then create a new issue.</p>\n<aside class=\"quote no-group\" data-username=\"svat\" data-post=\"9\" data-topic=\"4306\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/svat/48/3123_2.png\" class=\"avatar\"> svat:</div>\n<blockquote>\n<p>And what’s the difference between “page” and “body”, given that (for widths) “100% of the page” also seems to mean “100% of the body”?</p>\n</blockquote>\n</aside>\n<p>“Body” is a contextual term, page isn’t. Page’s body/footer/header have the same width of <code>page.width - page.margin.left - page.margin.right</code>.</p>\n<aside class=\"quote no-group\" data-username=\"svat\" data-post=\"9\" data-topic=\"4306\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/svat/48/3123_2.png\" class=\"avatar\"> svat:</div>\n<blockquote>\n<p>where can I request this?</p>\n</blockquote>\n</aside>\n<p><a href=\"https://github.com/typst/typst/issues/new?template=3-docs.yml\">https://github.com/typst/typst/issues/new?template=3-docs.yml</a></p>",
      "raw": "[quote=\"svat, post:9, topic:4306\"]\nNo, it just says “A length in relation to some known length” when the crucial question is *what* the known length is.\n[/quote]\n\nThis is a quote from the very first paragraph. There are 2 distinct sections that describe *what* the known length is.\n\nhttps://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L17\n\nhttps://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/rel.rs?plain=1#L44\n\n[quote=\"svat, post:9, topic:4306\"]\n“region” is another term new to me that seems important to understand; what does it mean / where can I learn more about it?\n[/quote]\n\nFrom reading the Typst source code.\n\nhttps://github.com/typst/typst/blob/2f1865743fc162682d324548da9d385a1686215f/crates/typst-library/src/layout/regions.rs?plain=1#L5-L13\n\nI think the new docs should be enough for practical use. If not, then create a new issue.\n\n[quote=\"svat, post:9, topic:4306\"]\nAnd what’s the difference between “page” and “body”, given that (for widths) “100% of the page” also seems to mean “100% of the body”?\n[/quote]\n\n\"Body\" is a contextual term, page isn't. Page's body/footer/header have the same width of `page.width - page.margin.left - page.margin.right`.\n\n[quote=\"svat, post:9, topic:4306\"]\nwhere can I request this?\n[/quote]\n\n<https://github.com/typst/typst/issues/new?template=3-docs.yml>",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:14.995894"
}