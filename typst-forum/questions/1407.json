{
  "topic_metadata": {
    "id": 1407,
    "title": "Problems with code blocks in @preview/problemst:0.1.0",
    "slug": "problems-with-code-blocks-in-preview-problemst-0-1-0",
    "posts_count": 4,
    "created_at": "2024-10-29T04:16:27.680Z",
    "last_posted_at": "2024-10-29T06:10:59.483Z",
    "views": 275,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "maucejo",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 367
  },
  "posts": [
    {
      "id": 4793,
      "post_number": 1,
      "username": "infinitymdm",
      "name": "Marcus Mellor",
      "created_at": "2024-10-29T04:16:27.825Z",
      "updated_at": "2024-10-29T04:19:33.384Z",
      "cooked": "<p>Hi folks, I’m pretty new to typst. Currently using it to make my homework assignments readable. I’ve just updated to 0.12.0.</p>\n<p>I’ve run into an issue with code blocks when using the problemst template. At first, I thought it was because I was trying to use a <code>raw()</code> with <code>lang: \"typc\"</code>, but now that I’m including matlab code blocks as well I see it error out there as well. Any advice on how to get code blocks working again?</p>\n<p>Here’s the error I’m seeing:</p>\n<pre><code class=\"lang-auto\">$ typst c example.typ\nerror: can only be used when context is known\n   ┌─ @preview/problemst:0.1.0/pset.typ:55:18\n   │\n55 │         box(width:measure([#it.lines.last().count]).width, align(right, text(fill: luma(50%))[#l.number]))                                                                     \n   │                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   │\n= hint: try wrapping this in a `context` expression\n= hint: the `context` expression should wrap everything that depends on this function\nhelp: error occurred while applying show rule to this line\n   ┌─ example.typ:17:0\n   │\n17 │ // Subroutine code:\n   │ ^^^^^^^^^^^^^^^^^^^                                                                                                                                                            \n</code></pre>\n<p>and here’s a reproducible example file: <a href=\"https://bpa.st/6J732\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">View paste 6J732</a></p>\n<p>Anybody got tips on how to fix?</p>",
      "raw": "Hi folks, I'm pretty new to typst. Currently using it to make my homework assignments readable. I've just updated to 0.12.0.\n\nI've run into an issue with code blocks when using the problemst template. At first, I thought it was because I was trying to use a `raw()` with `lang: \"typc\"`, but now that I'm including matlab code blocks as well I see it error out there as well. Any advice on how to get code blocks working again?\n\nHere's the error I'm seeing:\n\n```\n$ typst c example.typ\nerror: can only be used when context is known\n   ┌─ @preview/problemst:0.1.0/pset.typ:55:18\n   │\n55 │         box(width:measure([#it.lines.last().count]).width, align(right, text(fill: luma(50%))[#l.number]))                                                                     \n   │                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   │\n= hint: try wrapping this in a `context` expression\n= hint: the `context` expression should wrap everything that depends on this function\nhelp: error occurred while applying show rule to this line\n   ┌─ example.typ:17:0\n   │\n17 │ // Subroutine code:\n   │ ^^^^^^^^^^^^^^^^^^^                                                                                                                                                            \n```\n\nand here's a reproducible example file: https://bpa.st/6J732\n\nAnybody got tips on how to fix?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 1444.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 408
    },
    {
      "id": 4794,
      "post_number": 2,
      "username": "infinitymdm",
      "name": "Marcus Mellor",
      "created_at": "2024-10-29T04:58:12.532Z",
      "updated_at": "2024-10-29T04:58:12.532Z",
      "cooked": "<p>Another discovery: this appears to be a regression introduced with Typst 0.12.0. Switching back to 0.11.1 fixes the issue, though I lose access to <code>sym.crossmark</code> :(</p>",
      "raw": "Another discovery: this appears to be a regression introduced with Typst 0.12.0. Switching back to 0.11.1 fixes the issue, though I lose access to `sym.crossmark` :(",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 39.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 408
    },
    {
      "id": 4795,
      "post_number": 3,
      "username": "maucejo",
      "name": "Mathieu Aucejo",
      "created_at": "2024-10-29T05:41:20.393Z",
      "updated_at": "2024-10-29T05:41:20.393Z",
      "cooked": "<p>Actually, it is not a regression. It is the expected behavior and the error explains what to do at the level package.</p>\n<p>I think you should post an issue on the Github repo of the package. The error is easy to correct, since it seems that a <code>context</code> is missing.</p>",
      "raw": "Actually, it is not a regression. It is the expected behavior and the error explains what to do at the level package.\n\nI think you should post an issue on the Github repo of the package. The error is easy to correct, since it seems that a `context` is missing.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 94.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 125
    },
    {
      "id": 4796,
      "post_number": 4,
      "username": "infinitymdm",
      "name": "Marcus Mellor",
      "created_at": "2024-10-29T06:10:59.483Z",
      "updated_at": "2024-10-29T06:10:59.483Z",
      "cooked": "<p>Thanks for clarifying. I’ve posted an issue <a href=\"https://github.com/carreter/problemst/issues/2\" rel=\"noopener nofollow ugc\">here</a>. Hopefully that’s the right place.</p>\n<p><s>Until the author responds, got any advice for me on how to fix this? I’m happy to fork the template and tinker, I just haven’t figured out <code>context</code> yet. I’ve read through the docs page about 3 times, but it’s still Greek to me.</s></p>\n<p>I now see that <a href=\"https://github.com/carreter/problemst/pull/1\" rel=\"noopener nofollow ugc\">there’s already a PR up for this</a>. Guess I just needed to find the right place to look. Thanks!</p>",
      "raw": "Thanks for clarifying. I've posted an issue [here](https://github.com/carreter/problemst/issues/2). Hopefully that's the right place.\n\n~~Until the author responds, got any advice for me on how to fix this? I'm happy to fork the template and tinker, I just haven't figured out `context` yet. I've read through the docs page about 3 times, but it's still Greek to me.~~\n\nI now see that [there's already a PR up for this](https://github.com/carreter/problemst/pull/1). Guess I just needed to find the right place to look. Thanks!",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 21,
      "score": 54.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 408
    }
  ],
  "scraped_at": "2025-06-10T09:55:48.612757"
}