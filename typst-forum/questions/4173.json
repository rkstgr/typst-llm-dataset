{
  "topic_metadata": {
    "id": 4173,
    "title": "How to create 2nd level numbering for figures?",
    "slug": "how-to-create-2nd-level-numbering-for-figures",
    "posts_count": 3,
    "created_at": "2025-05-19T23:45:57.081Z",
    "last_posted_at": "2025-05-20T11:09:29.065Z",
    "views": 46,
    "like_count": 0,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Andrew",
    "tags": [],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 295
  },
  "posts": [
    {
      "id": 12790,
      "post_number": 1,
      "username": "Freddy",
      "name": "Freddy",
      "created_at": "2025-05-19T23:45:57.181Z",
      "updated_at": "2025-05-19T23:45:57.181Z",
      "cooked": "<p>Hey,<br>\nI have a problem with multi level numbering in figures. This is what the result should look like.</p>\n<ul>\n<li>1</li>\n<li>2.a</li>\n<li>2.b</li>\n<li>3</li>\n</ul>\n<p>Here is my current code:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// normally step on level 1\n#show figure : it =&gt; {\n  counter(\"fig\").step(level: 1)\n  context {\n    let numb = numbering(\"1.a\",..counter(\"fig\").get())\n    set figure(numbering: n =&gt; numb)\n    context it // here the set rule from above should apply \n  }\n}\n\n\n// if in subBlock step on level 2\n#let subFigs(doc) = {\n  counter(\"fig\").step(level: 1)\n\n  show figure : it =&gt; {\n    counter(\"fig\").step(level: 2)\n    context {\n      let numb = numbering(\"1.a\",..counter(\"fig\").get())\n      set figure(numbering: n =&gt; numb)\n      context it // here is the same problem\n    }\n  }\n\n  doc\n}\n\n#figure(image(\"meme.jpg\", width: 50%),\n  caption: [First meme],\n)\n\n#[\n  #show: subFigs\n\n  #context figure(image(\"meme.jpg\", width: 50%),\n    caption: [Second (2.a) meme],\n  )\n\n  #context figure(image(\"meme.jpg\", width: 50%),\n    caption: [Second(2.b) meme],\n  ) &lt;sub2&gt;\n]\n\n#figure(image(\"meme.jpg\", width: 50%),\n  caption: [Third meme],\n)\n\n</code></pre>\n<p>If there is a more elegant way to make this work, please let me know.</p>\n<p>I use my own counter because I found no way to stop the figure function from stepping the figure-counter on level 1.</p>\n<p>Currently the main problem is that the set rule does not apply to the row below it. I have no idea why…</p>\n<p>Thank you for your support :)</p>",
      "raw": "Hey, \nI have a problem with multi level numbering in figures. This is what the result should look like.\n\n- 1\n- 2.a\n- 2.b\n- 3\n\nHere is my current code:\n```typ\n// normally step on level 1\n#show figure : it => {\n  counter(\"fig\").step(level: 1)\n  context {\n    let numb = numbering(\"1.a\",..counter(\"fig\").get())\n    set figure(numbering: n => numb)\n    context it // here the set rule from above should apply \n  }\n}\n\n\n// if in subBlock step on level 2\n#let subFigs(doc) = {\n  counter(\"fig\").step(level: 1)\n\n  show figure : it => {\n    counter(\"fig\").step(level: 2)\n    context {\n      let numb = numbering(\"1.a\",..counter(\"fig\").get())\n      set figure(numbering: n => numb)\n      context it // here is the same problem\n    }\n  }\n\n  doc\n}\n\n#figure(image(\"meme.jpg\", width: 50%),\n  caption: [First meme],\n)\n\n#[\n  #show: subFigs\n\n  #context figure(image(\"meme.jpg\", width: 50%),\n    caption: [Second (2.a) meme],\n  )\n\n  #context figure(image(\"meme.jpg\", width: 50%),\n    caption: [Second(2.b) meme],\n  ) <sub2>\n]\n\n#figure(image(\"meme.jpg\", width: 50%),\n  caption: [Third meme],\n)\n\n```\n\nIf there is a more elegant way to make this work, please let me know.\n\nI use my own counter because I found no way to stop the figure function from stepping the figure-counter on level 1.\n\nCurrently the main problem is that the set rule does not apply to the row below it. I have no idea why...\n\nThank you for your support :)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 54.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1621
    },
    {
      "id": 12799,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-20T11:01:04.923Z",
      "updated_at": "2025-05-20T11:01:04.923Z",
      "cooked": "<p>Hey. Your code does not compile. See <a href=\"https://sscce.org\">https://sscce.org</a>. Usually for figures you can use <code>[]</code> or <code>rect()</code>.</p>",
      "raw": "Hey. Your code does not compile. See https://sscce.org. Usually for figures you can use `[]` or `rect()`.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 3.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12801,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-20T11:09:29.065Z",
      "updated_at": "2025-05-20T11:09:29.065Z",
      "cooked": "<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/subpar:0.2.2\"\n\n#figure(rect(), caption: \"First\")\n\n#subpar.grid(\n  figure(rect(), caption: [Second a]),\n  figure(rect(), caption: [Second b]),\n  numbering-sub: \"(1.a)\",\n  show-sub-caption: (num, it) =&gt; [#it.supplement #num#it.separator #it.body],\n)\n\n#figure(rect(), caption: \"Third\")\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/e/ec6919660a0385c0ad557c5ce8930904a64a6d2e.png\" data-download-href=\"https://forum.typst.app/uploads/default/ec6919660a0385c0ad557c5ce8930904a64a6d2e\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/e/ec6919660a0385c0ad557c5ce8930904a64a6d2e_2_690x377.png\" alt=\"image\" data-base62-sha1=\"xJnR8vseELqLoavBSkpeovKKKsu\" width=\"690\" height=\"377\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/e/ec6919660a0385c0ad557c5ce8930904a64a6d2e_2_690x377.png, https://forum.typst.app/uploads/default/original/2X/e/ec6919660a0385c0ad557c5ce8930904a64a6d2e.png 1.5x, https://forum.typst.app/uploads/default/original/2X/e/ec6919660a0385c0ad557c5ce8930904a64a6d2e.png 2x\" data-dominant-color=\"101010\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">737×403 13.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://typst.app/universe/package/subpar\">\n  <header class=\"source\">\n      <img src=\"https://forum.typst.app/uploads/default/original/1X/098187a593d51c4db99324614e2baeeb1bb355cc.png\" class=\"site-icon\" data-dominant-color=\"3CA8B6\" width=\"32\" height=\"32\">\n\n      <a href=\"https://typst.app/universe/package/subpar\" target=\"_blank\" rel=\"noopener\">Typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"aspect-image\" style=\"--aspect-ratio:690/361;\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/db1c18ed802fe6841bee62606931f352da10ed09_2_690x362.png\" class=\"thumbnail\" data-dominant-color=\"7CC2C5\" width=\"690\" height=\"362\"></div>\n\n<h3><a href=\"https://typst.app/universe/package/subpar\" target=\"_blank\" rel=\"noopener\">subpar – Typst Universe</a></h3>\n\n  <p>Create sub figures easily.</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "```typ\n#import \"@preview/subpar:0.2.2\"\n\n#figure(rect(), caption: \"First\")\n\n#subpar.grid(\n  figure(rect(), caption: [Second a]),\n  figure(rect(), caption: [Second b]),\n  numbering-sub: \"(1.a)\",\n  show-sub-caption: (num, it) => [#it.supplement #num#it.separator #it.body],\n)\n\n#figure(rect(), caption: \"Third\")\n```\n\n![image|690x377](upload://xJnR8vseELqLoavBSkpeovKKKsu.png)\n\nhttps://typst.app/universe/package/subpar",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 3.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:37.404952"
}