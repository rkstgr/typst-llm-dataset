{
  "topic_metadata": {
    "id": 818,
    "title": "How can I remove parens around specific citations?",
    "slug": "how-can-i-remove-parens-around-specific-citations",
    "posts_count": 14,
    "created_at": "2024-09-30T17:23:27.333Z",
    "last_posted_at": "2024-10-02T15:50:42.220Z",
    "views": 263,
    "like_count": 12,
    "reply_count": 11,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "xkevio",
    "tags": [
      "citation"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 692
  },
  "posts": [
    {
      "id": 3037,
      "post_number": 1,
      "username": "kescobo",
      "name": "Kevin Bonham",
      "created_at": "2024-09-30T17:23:27.453Z",
      "updated_at": "2024-10-03T19:19:53.594Z",
      "cooked": "<p>I’ve got a document using <a href=\"https://github.com/citation-style-language/styles/blob/master/biological-psychiatry.csl\" rel=\"noopener nofollow ugc\">this citation style</a>, which has references in parentheses. eg:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/d76329359f5b1b12bf7dadd33a802812d6c9328d.png\" data-download-href=\"https://forum.typst.app/uploads/default/d76329359f5b1b12bf7dadd33a802812d6c9328d\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/d76329359f5b1b12bf7dadd33a802812d6c9328d_2_690x58.png\" alt=\"image\" data-base62-sha1=\"uJp6FrfJqZgi5srxu8dskDjW08t\" width=\"690\" height=\"58\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/d76329359f5b1b12bf7dadd33a802812d6c9328d_2_690x58.png, https://forum.typst.app/uploads/default/optimized/1X/d76329359f5b1b12bf7dadd33a802812d6c9328d_2_1035x87.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/d76329359f5b1b12bf7dadd33a802812d6c9328d_2_1380x116.png 2x\" data-dominant-color=\"DDDDDD\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1491×126 43.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>But sometimes, when citations are within existing parentheses, I’d prefer to not add additional parentheses, eg</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/cb109ecda83a191c8326c22f468c42be03264d17.png\" data-download-href=\"https://forum.typst.app/uploads/default/cb109ecda83a191c8326c22f468c42be03264d17\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/cb109ecda83a191c8326c22f468c42be03264d17_2_690x62.png\" alt=\"image\" data-base62-sha1=\"sYoxc171zAsaHgpDYl4vK0TixYH\" width=\"690\" height=\"62\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/cb109ecda83a191c8326c22f468c42be03264d17_2_690x62.png, https://forum.typst.app/uploads/default/optimized/1X/cb109ecda83a191c8326c22f468c42be03264d17_2_1035x93.png 1.5x, https://forum.typst.app/uploads/default/optimized/1X/cb109ecda83a191c8326c22f468c42be03264d17_2_1380x124.png 2x\" data-dominant-color=\"DDDBDB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1470×133 51.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Is there a way to accomplish this? I thought there might be a way to hijack the <code>supplement</code> argument to put the other text (eg “as reviewed in”), but couldn’t figure it out.</p>",
      "raw": "I've got a document using [this citation style](https://github.com/citation-style-language/styles/blob/master/biological-psychiatry.csl), which has references in parentheses. eg:\n\n![image|690x58](upload://uJp6FrfJqZgi5srxu8dskDjW08t.png)\n\nBut sometimes, when citations are within existing parentheses, I'd prefer to not add additional parentheses, eg\n\n![image|690x62](upload://sYoxc171zAsaHgpDYl4vK0TixYH.png)\n\nIs there a way to accomplish this? I thought there might be a way to hijack the `supplement` argument to put the other text (eg \"as reviewed in\"), but couldn't figure it out.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 49,
      "score": 719.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 508
    },
    {
      "id": 3039,
      "post_number": 2,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-09-30T17:31:08.050Z",
      "updated_at": "2024-09-30T17:31:08.050Z",
      "cooked": "<p>Usually one the <code>form</code> parameters of <code>#cite()</code> could achieve this but it seems not with this particular style. The easiest way right now then would be wrapping the normal citation in a function and remove the parentheses with a regex.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let no-paren-cite(label) = {\n  show regex(\"\\(|\\)\"): none\n  cite(label, form: \"normal\") \n}\n\nSee @xyz (reviewed in #no-paren-cite(&lt;abc&gt;)\n#no-paren-cite(&lt;def&gt;))\n</code></pre>",
      "raw": "Usually one the `form` parameters of `#cite()` could achieve this but it seems not with this particular style. The easiest way right now then would be wrapping the normal citation in a function and remove the parentheses with a regex.\n\n```typ\n#let no-paren-cite(label) = {\n  show regex(\"\\(|\\)\"): none\n  cite(label, form: \"normal\") \n}\n\nSee @xyz (reviewed in #no-paren-cite(<abc>)\n#no-paren-cite(<def>))\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 49,
      "score": 59.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 3101,
      "post_number": 3,
      "username": "kescobo",
      "name": "Kevin Bonham",
      "created_at": "2024-10-01T15:17:02.912Z",
      "updated_at": "2024-10-01T15:17:02.912Z",
      "cooked": "<p>Ooh, clever idea, but it doesn’t seem to work. I wonder if the outer parens are getting added after the regex processing (I’m on the development version if that matters - I need the new line numbers functionality).</p>\n<p>I also tried</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let no-paren-cite(cites) = {\n  show regex(\"\\(|\\)\"): none\n  for c in cites {\n    cite(c, form: \"normal\")\n  }\n}\n</code></pre>\n<p>and then cited as <code>no-paren-cite((&lt;abc&gt;, &lt;def&gt;))</code><br>\njust to see if it was something about the combination, but I’m still getting the same result.</p>",
      "raw": "Ooh, clever idea, but it doesn't seem to work. I wonder if the outer parens are getting added after the regex processing (I'm on the development version if that matters - I need the new line numbers functionality).\n\nI also tried\n\n```typst\n#let no-paren-cite(cites) = {\n  show regex(\"\\(|\\)\"): none\n  for c in cites {\n    cite(c, form: \"normal\")\n  }\n}\n```\nand then cited as `no-paren-cite((<abc>, <def>))`\njust to see if it was something about the combination, but I'm still getting the same result.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 18.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 508
    },
    {
      "id": 3103,
      "post_number": 4,
      "username": "kescobo",
      "name": "Kevin Bonham",
      "created_at": "2024-10-01T15:33:26.566Z",
      "updated_at": "2024-10-02T12:44:17.597Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"kescobo\" data-post=\"3\" data-topic=\"818\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/k/19798D/48.png\" class=\"avatar\"> kescobo:</div>\n<blockquote>\n<p>I’m on the development version if that matters</p>\n</blockquote>\n</aside>\n<p>Hmm - actually this does seem to matter. I just tried it on <s>0.10.1</s> 0.11.1 and it works (both your version and my loop).</p>\n<p>Edit: On the development version, even putting <code>#show regex(\"\\(|\\)\"): none</code> outside a function removes all of the manually entered parens, but all of the citation parens remain intact.</p>",
      "raw": "[quote=\"kescobo, post:3, topic:818\"]\nI’m on the development version if that matters\n[/quote]\n\nHmm - actually this does seem to matter. I just tried it on ~~0.10.1~~ 0.11.1 and it works (both your version and my loop).\n\nEdit: On the development version, even putting `#show regex(\"\\(|\\)\"): none` outside a function removes all of the manually entered parens, but all of the citation parens remain intact.",
      "reply_to_post_number": 3,
      "reply_count": 2,
      "quote_count": 1,
      "like_count": 0,
      "reads": 40,
      "score": 18.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 508
    },
    {
      "id": 3106,
      "post_number": 5,
      "username": "Sinthoras",
      "name": "",
      "created_at": "2024-10-01T16:19:29.069Z",
      "updated_at": "2024-10-01T16:19:29.069Z",
      "cooked": "<p>Is this a known issue?</p>",
      "raw": "Is this a known issue?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 13.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 511
    },
    {
      "id": 3109,
      "post_number": 6,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-01T16:37:16.760Z",
      "updated_at": "2024-10-01T16:37:16.760Z",
      "cooked": "<p>Yeah I could’ve told you that it’s a new issue since I tested it before answering ^^ It is suspicious though and a million things could be the reason for it. New text show rules, internal layout reworks and citation group changes — probably best to create an issue.</p>",
      "raw": "Yeah I could've told you that it's a new issue since I tested it before answering ^^ It is suspicious though and a million things could be the reason for it. New text show rules, internal layout reworks and citation group changes — probably best to create an issue.",
      "reply_to_post_number": 4,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 40,
      "score": 43.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 3110,
      "post_number": 7,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-10-01T16:47:42.316Z",
      "updated_at": "2024-10-01T16:47:42.316Z",
      "cooked": "<p>Looks like a bug with the new text show rule processing. Minimized:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show \"[\": none\n@netwok A\n#bibliography(\"works.bib\")\n</code></pre>",
      "raw": "Looks like a bug with the new text show rule processing. Minimized:\n```typ\n#show \"[\": none\n@netwok A\n#bibliography(\"works.bib\")\n```",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 37,
      "score": 52.4,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 3111,
      "post_number": 8,
      "username": "laurmaedje",
      "name": "Laurenz Mädje",
      "created_at": "2024-10-01T16:49:28.869Z",
      "updated_at": "2024-10-01T16:49:28.869Z",
      "cooked": "<p>I’ve opened <a href=\"https://github.com/typst/typst/issues/5090\" class=\"inline-onebox\">Text show rules on citations are broken · Issue #5090 · typst/typst · GitHub</a></p>",
      "raw": "I've opened https://github.com/typst/typst/issues/5090",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 36,
      "score": 47.2,
      "accepted_answer": false,
      "trust_level": 4,
      "user_id": 2
    },
    {
      "id": 3115,
      "post_number": 9,
      "username": "kescobo",
      "name": "Kevin Bonham",
      "created_at": "2024-10-01T17:45:43.673Z",
      "updated_at": "2024-10-01T17:45:43.673Z",
      "cooked": "<p>Amazing, thanks! This is an initial submission, so i think I can live with the doubled up parentheses while this gets worked out. Thank you!</p>\n<aside class=\"quote no-group\" data-username=\"xkevio\" data-post=\"6\" data-topic=\"818\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/xkevio/48/37_2.png\" class=\"avatar\"> xkevio:</div>\n<blockquote>\n<p>Yeah I could’ve told you that it’s a new issue since I tested it before answering ^^</p>\n</blockquote>\n</aside>\n<p>That’s probably me projecting - I have not infrequently answered questions on similar forums, certain I know how something should behave and being wrong about it <img src=\"https://forum.typst.app/images/emoji/apple/smile.png?v=12\" title=\":smile:\" class=\"emoji\" alt=\":smile:\" loading=\"lazy\" width=\"20\" height=\"20\">. Appreciate the help!</p>",
      "raw": "Amazing, thanks! This is an initial submission, so i think I can live with the doubled up parentheses while this gets worked out. Thank you!\n\n[quote=\"xkevio, post:6, topic:818\"]\nYeah I could’ve told you that it’s a new issue since I tested it before answering ^^\n[/quote]\n\nThat's probably me projecting - I have not infrequently answered questions on similar forums, certain I know how something should behave and being wrong about it :smile:. Appreciate the help!",
      "reply_to_post_number": 8,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 33,
      "score": 31.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 508
    },
    {
      "id": 3138,
      "post_number": 10,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-01T20:58:30.186Z",
      "updated_at": "2024-10-01T20:58:30.186Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"kescobo\" data-post=\"4\" data-topic=\"818\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/k/19798D/48.png\" class=\"avatar\"> kescobo:</div>\n<blockquote>\n<p>I just tried it on 0.10.1</p>\n</blockquote>\n</aside>\n<p>Typst doesn’t have a 0.10.1 version, only 0.10, 0.11, 0.11.1. This is probably a typo for 0.11.1.</p>",
      "raw": "[quote=\"kescobo, post:4, topic:818\"]\nI just tried it on 0.10.1\n[/quote]\n\nTypst doesn't have a 0.10.1 version, only 0.10, 0.11, 0.11.1. This is probably a typo for 0.11.1.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 33,
      "score": 26.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 3204,
      "post_number": 11,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-02T12:11:18.479Z",
      "updated_at": "2024-10-02T12:11:18.479Z",
      "cooked": "<p>There is now a fix for this issue in the most recent development version.</p>",
      "raw": "There is now a fix for this issue in the most recent development version.",
      "reply_to_post_number": 9,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 28,
      "score": 45.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 3208,
      "post_number": 12,
      "username": "kescobo",
      "name": "Kevin Bonham",
      "created_at": "2024-10-02T12:45:01.257Z",
      "updated_at": "2024-10-03T19:18:18.762Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Andrew\" data-post=\"10\" data-topic=\"818\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/andrew/48/62_2.png\" class=\"avatar\"> Andrew:</div>\n<blockquote>\n<p>This is probably a typo for 0.11.1.</p>\n</blockquote>\n</aside>\n<p>Correct, edited.</p>\n<aside class=\"quote no-group\" data-username=\"xkevio\" data-post=\"11\" data-topic=\"818\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/xkevio/48/37_2.png\" class=\"avatar\"> xkevio:</div>\n<blockquote>\n<p>There is now a fix</p>\n</blockquote>\n</aside>\n<p>Amazing, thanks for the rapid response everyone!</p>\n<p>Edit: confirming that <a class=\"mention\" href=\"/u/xkevio\">@xkevio</a> 's original answer now works on the latest development version <img src=\"https://forum.typst.app/images/emoji/apple/pray.png?v=12\" title=\":pray:\" class=\"emoji\" alt=\":pray:\" loading=\"lazy\" width=\"20\" height=\"20\">. There doesn’t seem to be a way to mark an answer as <code>answer</code> like there is on some discourse forums - is that because I asked in <a class=\"hashtag-cooked\" href=\"/c/general/4\" data-type=\"category\" data-slug=\"general\" data-id=\"4\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>General</span></a> instead of <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a>, or is that feature just not enabled?</p>",
      "raw": "[quote=\"Andrew, post:10, topic:818\"]\nThis is probably a typo for 0.11.1.\n[/quote]\n\nCorrect, edited. \n\n[quote=\"xkevio, post:11, topic:818\"]\nThere is now a fix\n[/quote]\n\nAmazing, thanks for the rapid response everyone!\n\nEdit: confirming that @xkevio 's original answer now works on the latest development version :pray:. There doesn't seem to be a way to mark an answer as `answer` like there is on some discourse forums - is that because I asked in #general instead of #questions, or is that feature just not enabled?",
      "reply_to_post_number": 10,
      "reply_count": 2,
      "quote_count": 2,
      "like_count": 0,
      "reads": 28,
      "score": 15.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 508
    },
    {
      "id": 3231,
      "post_number": 13,
      "username": "xkevio",
      "name": "Kevio",
      "created_at": "2024-10-02T15:43:35.757Z",
      "updated_at": "2024-10-02T15:43:35.757Z",
      "cooked": "<p>There should be a way to mark an answer as a Solution as you can see in the Questions category but yeah maybe it’s because of the category this is in — this thread should probably be moved anyway.</p>",
      "raw": "There should be a way to mark an answer as a Solution as you can see in the Questions category but yeah maybe it's because of the category this is in — this thread should probably be moved anyway.",
      "reply_to_post_number": 12,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 24,
      "score": 19.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 21
    },
    {
      "id": 3234,
      "post_number": 14,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-02T15:50:42.220Z",
      "updated_at": "2024-10-02T15:50:42.220Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"kescobo\" data-post=\"12\" data-topic=\"818\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/k/19798D/48.png\" class=\"avatar\"> kescobo:</div>\n<blockquote>\n<p>is that because I asked in <a class=\"hashtag-cooked\" href=\"/c/general/4\" data-type=\"category\" data-slug=\"general\" data-id=\"4\" data-ref=\"general::category\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>General</span></a> instead of <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\" data-ref=\"questions::category\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a>, or is that feature just not enabled?</p>\n</blockquote>\n</aside>\n<p>Because the topic is in the <a class=\"hashtag-cooked\" href=\"/c/general/4\" data-type=\"category\" data-slug=\"general\" data-id=\"4\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>General</span></a> category.</p>",
      "raw": "[quote=\"kescobo, post:12, topic:818\"]\nis that because I asked in #general::category instead of #questions::category, or is that feature just not enabled?\n[/quote]\n\nBecause the topic is in the #general category.",
      "reply_to_post_number": 12,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 26,
      "score": 20.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:57:45.415084"
}