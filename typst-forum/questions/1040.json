{
  "topic_metadata": {
    "id": 1040,
    "title": "How can I change the heading numbering for headings of different levels differently?",
    "slug": "how-can-i-change-the-heading-numbering-for-headings-of-different-levels-differently",
    "posts_count": 4,
    "created_at": "2024-10-11T22:09:49.408Z",
    "last_posted_at": "2024-10-13T11:52:50.310Z",
    "views": 990,
    "like_count": 4,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "mkorje",
    "tags": [
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 379
  },
  "posts": [
    {
      "id": 3731,
      "post_number": 1,
      "username": "Sinthoras",
      "name": "",
      "created_at": "2024-10-11T22:09:49.812Z",
      "updated_at": "2024-10-12T08:41:17.199Z",
      "cooked": "<p>I want my top levels headings be numbered like this “TOP 1: First Name”, “TOP 2: Second name”, but my second level headings just “1.1 first subsection”, “1.2 second subsection”.</p>\n<p>If I set my numbering e.g. with</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set heading(numbering: \"TOP 1.1\")\n</code></pre>\n<p>then the result is<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/6b2e365f102d5ae6dd054c0587a49e187b8330e8.png\" alt=\"image\" data-base62-sha1=\"fia68g4MgaEaB4X7KzCsBO3XGoo\" width=\"311\" height=\"131\"><br>\nwhich totally makes sense. I think for this I need a <code>show</code> rule, but the naive</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#show heading.where(\n  level: 1\n): it =&gt; {\n  \"TOP\" + it\n}\n</code></pre>\n<p>returns<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/150d420bb2fc65f84d7ee194639366e74c7c8722.png\" alt=\"image\" data-base62-sha1=\"30eqMAj6HWVZg0Eku8r5ZQ8iraq\" width=\"311\" height=\"156\"><br>\nwhich ist again not, what I want.</p>",
      "raw": "I want my top levels headings be numbered like this \"TOP 1: First Name\", \"TOP 2: Second name\", but my second level headings just \"1.1 first subsection\", \"1.2 second subsection\".\n\nIf I set my numbering e.g. with \n```typst \n#set heading(numbering: \"TOP 1.1\")\n```\nthen the result is \n![image|415x175, 75%](upload://fia68g4MgaEaB4X7KzCsBO3XGoo.png)\nwhich totally makes sense. I think for this I need a `show` rule, but the naive \n```typst\n#show heading.where(\n  level: 1\n): it => {\n  \"TOP\" + it\n}\n``` \nreturns \n![image|415x209, 75%](upload://30eqMAj6HWVZg0Eku8r5ZQ8iraq.png)\nwhich ist again not, what I want.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 62,
      "score": 4572.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 511
    },
    {
      "id": 3735,
      "post_number": 2,
      "username": "mkorje",
      "name": "Max",
      "created_at": "2024-10-12T08:06:25.871Z",
      "updated_at": "2024-10-12T10:27:55.144Z",
      "cooked": "<p>The numbering parameter can also take a custom function. This is what you want to use in this case. I wrote an example below with some comments on what is happening. I hope that it all makes sense!</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set page(width: 5cm, height: auto)\n\n// The function is passed a variable\n// number of arguments (e.g. 1, 1, 2).\n// The `..nums` is an argument sink,\n// which collects all excess arguments\n// in `nums`.\n#set heading(numbering: (..nums) =&gt; {\n   // We want the positional arguments\n   // from `nums`.\n   // `numbers` is now an array of ints\n   // e.g. a level one heading `= ...`  could be (1,)\n   // e.g. a level two heading `== ...` could be (2, 1)\n   // e.g. a level three heading `=== ...` could be (1, 0, 2)\n   let numbers = nums.pos()\n   // Top level (level 1) headings will have a single\n   // int like (1,), as mentioned above. So we check\n   // if the array's length is 1 for level one headings.\n   if numbers.len() == 1 {\n      numbering(\"TOP 1:\", ..numbers)\n   } else {\n      // Everything else\n      numbering(\"1.1\", ..numbers) \n   }\n})\n\n= Test\n== Test\n=== Test\n== Test\n== Test\n= Test\n=== Test\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/72bebcef342f7a47d041be3230075b3ba115131a.png\" alt=\"test\" data-base62-sha1=\"gn55krRomEeZNljJOmI1pevGKUO\" width=\"283\" height=\"385\"></p>",
      "raw": "The numbering parameter can also take a custom function. This is what you want to use in this case. I wrote an example below with some comments on what is happening. I hope that it all makes sense!\n\n```typ\n#set page(width: 5cm, height: auto)\n\n// The function is passed a variable\n// number of arguments (e.g. 1, 1, 2).\n// The `..nums` is an argument sink,\n// which collects all excess arguments\n// in `nums`.\n#set heading(numbering: (..nums) => {\n   // We want the positional arguments\n   // from `nums`.\n   // `numbers` is now an array of ints\n   // e.g. a level one heading `= ...`  could be (1,)\n   // e.g. a level two heading `== ...` could be (2, 1)\n   // e.g. a level three heading `=== ...` could be (1, 0, 2)\n   let numbers = nums.pos()\n   // Top level (level 1) headings will have a single\n   // int like (1,), as mentioned above. So we check\n   // if the array's length is 1 for level one headings.\n   if numbers.len() == 1 {\n      numbering(\"TOP 1:\", ..numbers)\n   } else {\n      // Everything else\n      numbering(\"1.1\", ..numbers) \n   }\n})\n\n= Test\n== Test\n=== Test\n== Test\n== Test\n= Test\n=== Test\n```\n\n![test|283x385](upload://gn55krRomEeZNljJOmI1pevGKUO.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 62,
      "score": 262.4,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 76
    },
    {
      "id": 3744,
      "post_number": 3,
      "username": "ParaN3xus",
      "name": "ParaN3xus",
      "created_at": "2024-10-12T15:14:45.894Z",
      "updated_at": "2024-10-12T15:14:45.894Z",
      "cooked": "<p>Use <a href=\"https://typst.app/universe/package/numbly\">numbly</a>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/numbly:0.1.0\": numbly\n#set heading(\n  numbering: numbly(\n    \"Top {1}:\",\n    \"{1}.{2}.\",\n  ),\n)\n\n= First section\n== Unterpunkt\n== Zweiter Unterpunkt\n</code></pre>\n<p>gives</p>\n<pre><code class=\"lang-auto\">Top 1: First section\n1.1. Unterpunkt\n1.2. Zweiter Unterpunkt\n</code></pre>",
      "raw": "Use [numbly](https://typst.app/universe/package/numbly).\n```typ\n#import \"@preview/numbly:0.1.0\": numbly\n#set heading(\n  numbering: numbly(\n    \"Top {1}:\",\n    \"{1}.{2}.\",\n  ),\n)\n\n= First section\n== Unterpunkt\n== Zweiter Unterpunkt\n```\ngives\n```\nTop 1: First section\n1.1. Unterpunkt\n1.2. Zweiter Unterpunkt\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 53,
      "score": 365.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 14
    },
    {
      "id": 3786,
      "post_number": 4,
      "username": "Sinthoras",
      "name": "",
      "created_at": "2024-10-13T11:52:50.310Z",
      "updated_at": "2024-10-13T11:52:50.310Z",
      "cooked": "<p>Thank you both for answering! :)</p>\n<p>I am going to use numbly, because it feels much nicer and cleaner, so thank you for suggesting it, but I chose <a class=\"mention\" href=\"/u/mkorje\">@mkorje</a>’s answer as the <code>solution</code>, because it explains how it works in more detail and only with that knowledge I understand what exactly numbly does, why it works and how to use it exactly.</p>",
      "raw": "Thank you both for answering! :) \n\nI am going to use numbly, because it feels much nicer and cleaner, so thank you for suggesting it, but I chose @mkorje's answer as the `solution`, because it explains how it works in more detail and only with that knowledge I understand what exactly numbly does, why it works and how to use it exactly.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 48,
      "score": 29.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 511
    }
  ],
  "scraped_at": "2025-06-10T09:57:03.073872"
}