{
  "topic_metadata": {
    "id": 1172,
    "title": "How to add an empty heading to the PDF outline?",
    "slug": "how-to-add-an-empty-heading-to-the-pdf-outline",
    "posts_count": 7,
    "created_at": "2024-10-17T19:57:06.199Z",
    "last_posted_at": "2024-10-19T14:58:32.361Z",
    "views": 195,
    "like_count": 3,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 6,
    "accepted_answer_username": "sijo",
    "tags": [
      "outline",
      "pdf"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 1062
  },
  "posts": [
    {
      "id": 4115,
      "post_number": 1,
      "username": "flgrubm",
      "name": "",
      "created_at": "2024-10-17T19:57:06.295Z",
      "updated_at": "2024-10-23T13:10:18.785Z",
      "cooked": "<p>I am writing a template for my homework submissions. For this, I would like to give each (sub-)section a corresponding heading like “Exercise n” or “Part x”, but since the individual homework problems do not (usually) have any titles per se, my current approach is to create empty headings in the following sense:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">=\nThis is the first exercise\n\n==\nThis is Part (a) of the first exercise\n\n= An actually named exercise\nThis is the second exercise\n</code></pre>\n<p>In my current setup, this produces something like</p>\n<blockquote>\n<p><strong>Exercise 1.</strong></p>\n<p>This is the first exercise</p>\n<p><strong>a.</strong></p>\n<p>This is Part (a) of the first exercise</p>\n<p><strong>Exercise 2. An actually named exercise</strong></p>\n<p>This is the second exercise</p>\n</blockquote>\n<p>The only problem with this is that neither Exercise 1 nor Part (a) are added to the PDF outline, which would enable me to quickly jump to a particular exercise or part by clicking on the side bar of my PDF viewer. My question now is how, if even, I can add the exercises and parts to the outline as “Exercise n” or “Part x”.</p>\n<p>I know that it would probably be easier to e.g. define an <code>exercise</code>-function and calling it with <code>#exercise[]</code>, but I would prefer the empty-heading approach if possible.</p>",
      "raw": "I am writing a template for my homework submissions. For this, I would like to give each (sub-)section a corresponding heading like \"Exercise n\" or \"Part x\", but since the individual homework problems do not (usually) have any titles per se, my current approach is to create empty headings in the following sense:\n```typ\n=\nThis is the first exercise\n\n==\nThis is Part (a) of the first exercise\n\n= An actually named exercise\nThis is the second exercise\n```\nIn my current setup, this produces something like\n\n> **Exercise 1.**\n> \n> This is the first exercise\n> \n> **a.**\n> \n> This is Part (a) of the first exercise\n> \n> **Exercise 2. An actually named exercise**\n>\n> This is the second exercise\n\nThe only problem with this is that neither Exercise 1 nor Part (a) are added to the PDF outline, which would enable me to quickly jump to a particular exercise or part by clicking on the side bar of my PDF viewer. My question now is how, if even, I can add the exercises and parts to the outline as \"Exercise n\" or \"Part x\".\n\nI know that it would probably be easier to e.g. define an `exercise`-function and calling it with `#exercise[]`, but I would prefer the empty-heading approach if possible.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 45,
      "score": 469.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 615
    },
    {
      "id": 4135,
      "post_number": 2,
      "username": "alimgyeniyt",
      "name": "Alimgyehr Uuhniyt",
      "created_at": "2024-10-17T20:14:17.050Z",
      "updated_at": "2024-10-17T20:30:56.437Z",
      "cooked": "<p>I have something set up similar to yours and it show in the outline.</p>\n<p>try to experiment with this :</p>\n<pre data-code-wrap=\"typm\"><code class=\"lang-typm\">#set outline(indent: 1em)\n\n#outline()\n#show heading.where(level: 1) : set heading(numbering: (.., i) =&gt; [Exercise #i.])\n#show heading.where(level: 2) : set heading(numbering: (.., i) =&gt; numbering(\"a.\", i))\n\n= &lt;exercise-1-label&gt;\n\n== &lt;question-1.1-label&gt;\n== &lt;question-1.2-label&gt;\n== &lt;question-1.3-label&gt;\n\n= &lt;exercise-2-label&gt;\n\n== &lt;question-2.1-label&gt;\n== &lt;question-2.2-label&gt;\n== &lt;question-2.3-label&gt;\n</code></pre>\n<p>you can share the part of your template that deals with this if you want.<br>\nyou should also check if there are <code>heading(outlined: false)</code> this will prevent them from showing.</p>\n<p>also, the show heading rule, if you put it in a template, will likely break your outline title (of if the show rule is set before the outline is called), there is a <a href=\"https://forum.typst.app/t/how-to-create-a-pagebreak-before-every-depth-1-heading-except-for-the-outline/904\">solved question</a> on the forum on how to fix it.</p>",
      "raw": "I have something set up similar to yours and it show in the outline.\n\ntry to experiment with this :\n```typm\n#set outline(indent: 1em)\n\n#outline()\n#show heading.where(level: 1) : set heading(numbering: (.., i) => [Exercise #i.])\n#show heading.where(level: 2) : set heading(numbering: (.., i) => numbering(\"a.\", i))\n\n= <exercise-1-label>\n\n== <question-1.1-label>\n== <question-1.2-label>\n== <question-1.3-label>\n\n= <exercise-2-label>\n\n== <question-2.1-label>\n== <question-2.2-label>\n== <question-2.3-label>\n```\nyou can share the part of your template that deals with this if you want.\nyou should also check if there are `heading(outlined: false)` this will prevent them from showing.\n\nalso, the show heading rule, if you put it in a template, will likely break your outline title (of if the show rule is set before the outline is called), there is a [solved question](https://forum.typst.app/t/how-to-create-a-pagebreak-before-every-depth-1-heading-except-for-the-outline/904) on the forum on how to fix it.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 43.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 605
    },
    {
      "id": 4137,
      "post_number": 3,
      "username": "flgrubm",
      "name": "",
      "created_at": "2024-10-17T21:54:42.143Z",
      "updated_at": "2024-10-17T22:02:12.920Z",
      "cooked": "<p>Thank you for your reply.</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"alimgyeniyt\" data-post=\"2\" data-topic=\"1172\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/alimgyeniyt/48/901_2.png\" class=\"avatar\"> alimgyeniyt:</div>\n<blockquote>\n<p>[…] and it show in the outline.</p>\n</blockquote>\n</aside>\n<p>I’m sorry if I wasn’t clear enough. Actually I don’t want to have an outline/table of contents (in the sense of <code>#outline()</code>), but I want to have the PDF metadata included that allows my PDF reader to suggest me to jump quickly to the particular heading. The code that I pasted above gives me the following in the Evince PDF viewer:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/25ae5ee41d55cbf8a7f5712a31805dd9185f9dda.png\" data-download-href=\"https://forum.typst.app/uploads/default/25ae5ee41d55cbf8a7f5712a31805dd9185f9dda\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/25ae5ee41d55cbf8a7f5712a31805dd9185f9dda_2_690x370.png\" alt=\"image\" data-base62-sha1=\"5nlfJLgJieCWwM740Oqy135n4hQ\" width=\"690\" height=\"370\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/25ae5ee41d55cbf8a7f5712a31805dd9185f9dda_2_690x370.png, https://forum.typst.app/uploads/default/original/1X/25ae5ee41d55cbf8a7f5712a31805dd9185f9dda.png 1.5x, https://forum.typst.app/uploads/default/original/1X/25ae5ee41d55cbf8a7f5712a31805dd9185f9dda.png 2x\" data-dominant-color=\"B9BABB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1031×554 51.2 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div><br>\nAs you can see, the only heading that appears in the side bar to the left is the one of the second exercise, which is non-empty. I would like to have the sidebar look something like this:<br>\n<img src=\"https://forum.typst.app/uploads/default/original/1X/85512a0bd6d7210f35997846df6db712a4ba5e6d.png\" alt=\"image\" data-base62-sha1=\"j1noCG2eqt7IGvh1t9S9DTrICSh\" width=\"316\" height=\"100\"></p>\n<p>And the thing is that having this PDF outline appear works flawlessly for non-empty headings, but somehow not (out-of-the-box) for empty headings as in my use case. I also tested this in the Okular PDF viewer with the same result.</p>\n<p>By the way, your code snippet produces an empty PDF metadata outline, but I assume that the fact that the only named heading “Contents” is not in the PDF outline is not a bug but a feature in this case. Anyway, the outline/table of contents works fine as expected, but not the PDF metadata outline.</p>",
      "raw": "Thank you for your reply.\n\n[quote=\"alimgyeniyt, post:2, topic:1172\"]\n[...] and it show in the outline.\n[/quote]\n\nI'm sorry if I wasn't clear enough. Actually I don't want to have an outline/table of contents (in the sense of `#outline()`), but I want to have the PDF metadata included that allows my PDF reader to suggest me to jump quickly to the particular heading. The code that I pasted above gives me the following in the Evince PDF viewer:\n![image|690x370, 100%](upload://5nlfJLgJieCWwM740Oqy135n4hQ.png)\nAs you can see, the only heading that appears in the side bar to the left is the one of the second exercise, which is non-empty. I would like to have the sidebar look something like this:\n![image|316x100, 100%](upload://j1noCG2eqt7IGvh1t9S9DTrICSh.png)\n\nAnd the thing is that having this PDF outline appear works flawlessly for non-empty headings, but somehow not (out-of-the-box) for empty headings as in my use case. I also tested this in the Okular PDF viewer with the same result.\n\nBy the way, your code snippet produces an empty PDF metadata outline, but I assume that the fact that the only named heading \"Contents\" is not in the PDF outline is not a bug but a feature in this case. Anyway, the outline/table of contents works fine as expected, but not the PDF metadata outline.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 37,
      "score": 12.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 615
    },
    {
      "id": 4140,
      "post_number": 4,
      "username": "alimgyeniyt",
      "name": "Alimgyehr Uuhniyt",
      "created_at": "2024-10-17T23:05:57.461Z",
      "updated_at": "2024-10-17T23:07:06.659Z",
      "cooked": "<p>hello, I’m responding from my phone and I just realised that the pdf bookmarks do not work in the same way the outline function does. from the limited googling and the adobe docs bookmarks need a title and an action associated with them.</p>\n<p>My <em>guess</em> is that the title that typst reports is the body of the heading, not including the numbering.</p>\n<p>I advice you to use this approach instead for empty headings, make a show rule for the different heading levels and only show the numbering, in your main, name your heading with whatever you want to appear in the bookmarks.</p>\n<p>as, Im on my phone and am unable to use typst on it to test this i can only hint that you can display the numbering using something along the lines</p>\n<pre data-code-wrap=\"typm\"><code class=\"lang-typm\">// possible faulty code\n\n#show heading: it =&gt; {\nif it.level == 1 {\ncontext counter(heading.where(level:1)).display(it.numbering)\n}\n// define behavior for the rest of the levels or use .where selector\n}\n</code></pre>\n<p>don’t mark my replay as answer if it doesn’t work, if you manage to get it to work you can post the correct code and mark it as an answer.</p>",
      "raw": "hello, I'm responding from my phone and I just realised that the pdf bookmarks do not work in the same way the outline function does. from the limited googling and the adobe docs bookmarks need a title and an action associated with them. \n\nMy *guess* is that the title that typst reports is the body of the heading, not including the numbering.\n\nI advice you to use this approach instead for empty headings, make a show rule for the different heading levels and only show the numbering, in your main, name your heading with whatever you want to appear in the bookmarks.\n\nas, Im on my phone and am unable to use typst on it to test this i can only hint that you can display the numbering using something along the lines\n\n```typm\n// possible faulty code\n\n#show heading: it => {\nif it.level == 1 {\ncontext counter(heading.where(level:1)).display(it.numbering)\n}\n// define behavior for the rest of the levels or use .where selector\n}\n```\n\ndon't mark my replay as answer if it doesn't work, if you manage to get it to work you can post the correct code and mark it as an answer.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 34,
      "score": 31.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 605
    },
    {
      "id": 4155,
      "post_number": 5,
      "username": "flgrubm",
      "name": "",
      "created_at": "2024-10-18T08:13:48.739Z",
      "updated_at": "2024-10-18T08:13:48.739Z",
      "cooked": "<p>Thanks again. But unfortunately the code snippet is not doing anything different for me, i.e. the empty headings still don’t show up in the PDF outline/bookmarks.</p>\n<p>Maybe it’s just not (yet) possible to set the PDF outline/bookmarks in that way.</p>",
      "raw": "Thanks again. But unfortunately the code snippet is not doing anything different for me, i.e. the empty headings still don't show up in the PDF outline/bookmarks.\n\nMaybe it's just not (yet) possible to set the PDF outline/bookmarks in that way.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 10.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 615
    },
    {
      "id": 4160,
      "post_number": 6,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-18T09:33:44.935Z",
      "updated_at": "2024-10-18T09:33:52.313Z",
      "cooked": "<p>It would help if you provided a minimal working example that includes the way you make headings show as “Exercise 1.”, etc. But maybe the following works for you or can be adapted to your needs:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#set heading(bookmarked: false, numbering: \"1.\")\n#show heading.where(level: 1, bookmarked: false): it =&gt; heading(\n  bookmarked: true,\n  numbering: none,\n  [Exercise #counter(heading).display() #it.body],\n)\n#show heading.where(level: 2, bookmarked: false): it =&gt; heading(\n  level: 2,\n  bookmarked: true,\n  numbering: none,\n  [#numbering(\"a.\", counter(heading).get().at(1)) #it.body],\n)\n</code></pre>\n<p>If your document is more complex, e.g. with level 1 headings that are not only for Exercises, you might need to add more complex conditions in the show rules to transform only the correct headings.</p>",
      "raw": "It would help if you provided a minimal working example that includes the way you make headings show as \"Exercise 1.\", etc. But maybe the following works for you or can be adapted to your needs:\n\n```typ\n#set heading(bookmarked: false, numbering: \"1.\")\n#show heading.where(level: 1, bookmarked: false): it => heading(\n  bookmarked: true,\n  numbering: none,\n  [Exercise #counter(heading).display() #it.body],\n)\n#show heading.where(level: 2, bookmarked: false): it => heading(\n  level: 2,\n  bookmarked: true,\n  numbering: none,\n  [#numbering(\"a.\", counter(heading).get().at(1)) #it.body],\n)\n```\n\nIf your document is more complex, e.g. with level 1 headings that are not only for Exercises, you might need to add more complex conditions in the show rules to transform only the correct headings.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 27,
      "score": 40.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 4260,
      "post_number": 7,
      "username": "flgrubm",
      "name": "",
      "created_at": "2024-10-19T14:58:32.361Z",
      "updated_at": "2024-10-19T14:58:32.361Z",
      "cooked": "<p>Okay, thank you. It looks a bit hacky, but this is essentially the solution that I’ve been looking for. The empty headings show up in the PDF outline/bookmarks as “Exercise 1” and “a.” now and they still display correctly within the document.</p>\n<p>As for my previous solution, it was basically the same as</p>\n<aside class=\"quote no-group\" data-username=\"alimgyeniyt\" data-post=\"2\" data-topic=\"1172\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/alimgyeniyt/48/901_2.png\" class=\"avatar\"> alimgyeniyt:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">#show heading.where(level: 1) : set heading(numbering: (.., i) =&gt; [Exercise #i.])\n#show heading.where(level: 2) : set heading(numbering: (.., i) =&gt; numbering(\"a.\", i))\n</code></pre>\n</blockquote>\n</aside>",
      "raw": "Okay, thank you. It looks a bit hacky, but this is essentially the solution that I've been looking for. The empty headings show up in the PDF outline/bookmarks as \"Exercise 1\" and \"a.\" now and they still display correctly within the document.\n\nAs for my previous solution, it was basically the same as \n[quote=\"alimgyeniyt, post:2, topic:1172\"]\n```\n#show heading.where(level: 1) : set heading(numbering: (.., i) => [Exercise #i.])\n#show heading.where(level: 2) : set heading(numbering: (.., i) => numbering(\"a.\", i))\n```\n[/quote]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 24,
      "score": 4.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 615
    }
  ],
  "scraped_at": "2025-06-10T09:56:36.423405"
}