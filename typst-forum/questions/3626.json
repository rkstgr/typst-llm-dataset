{
  "topic_metadata": {
    "id": 3626,
    "title": "Why does incollection write the booktitle twice in the bibliography using the APA style?",
    "slug": "why-does-incollection-write-the-booktitle-twice-in-the-bibliography-using-the-apa-style",
    "posts_count": 4,
    "created_at": "2025-04-12T16:38:57.498Z",
    "last_posted_at": "2025-04-16T15:46:55.952Z",
    "views": 52,
    "like_count": 1,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Eric",
    "tags": [
      "bibtex"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 420
  },
  "posts": [
    {
      "id": 10964,
      "post_number": 1,
      "username": "Racso",
      "name": "Racso",
      "created_at": "2025-04-12T16:38:57.664Z",
      "updated_at": "2025-04-12T17:52:40.220Z",
      "cooked": "<p>I’ve tried several citation styles but this is the only one with the problem. This is the bib file:</p>\n<pre data-code-wrap=\"tex\"><code class=\"lang-tex\">@incollection{silva18,\n  author={Silva, Fabio Laurindo and Pinho, Luiz Carlos and Wiedenbrug, Sofia},\n  title     = {Chironomidae},\n  booktitle = {Freshwater Invertebrates},\n  editor    = {Neusa Hamada and James H. Thorp},\n  pages     = {661--700},\n  year      = {2018},\n  publisher = {Academic Press},\n}\n</code></pre>\n<p>And this is the minimal working example on typst:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">cita @silva18. \n\n#bibliography(\"refs.bib\", style: \"apa\")\n</code></pre>\n<p>The output file produces double booktitle (Freshwater Invertebrates):</p>\n<p>cita (Silva et al., 2018).<br>\nBibliography<br>\nSilva, F. L., Pinho, L. C., &amp; Wiedenbrug, S. (2018). Chironomidae. In N. Hamada &amp; J. H. Thorp (Eds.), Freshwater Invertebrates: Freshwater Invertebrates (pp. 661–700). Academic Press.</p>\n<p>Would you recomend to download another CSL file for APA style? maybe I can use APA6 instead of 7 or something like that to fix this problem</p>",
      "raw": "I've tried several citation styles but this is the only one with the problem. This is the bib file:\n```tex\n@incollection{silva18,\n  author={Silva, Fabio Laurindo and Pinho, Luiz Carlos and Wiedenbrug, Sofia},\n  title     = {Chironomidae},\n  booktitle = {Freshwater Invertebrates},\n  editor    = {Neusa Hamada and James H. Thorp},\n  pages     = {661--700},\n  year      = {2018},\n  publisher = {Academic Press},\n}\n```\n\nAnd this is the minimal working example on typst:\n\n```typ\ncita @silva18. \n\n#bibliography(\"refs.bib\", style: \"apa\")\n```\nThe output file produces double booktitle (Freshwater Invertebrates):\n\ncita (Silva et al., 2018).\n Bibliography\n Silva, F. L., Pinho, L. C., & Wiedenbrug, S. (2018). Chironomidae. In N. Hamada & J. H. Thorp (Eds.), Freshwater Invertebrates: Freshwater Invertebrates (pp. 661–700). Academic Press.\n\n\nWould you recomend to download another CSL file for APA style? maybe I can use APA6 instead of 7 or something like that to fix this problem",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 34.0,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 833
    },
    {
      "id": 10968,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-04-12T18:41:06.271Z",
      "updated_at": "2025-04-12T18:41:06.271Z",
      "cooked": "<p>The simplest fix would be to change <code>@incollection</code> to <code>@inbook</code>.</p>\n<p><strong>Some context as to what’s happening here:</strong><br>\nWhen using the <code>@incollection</code> type, Typst converts it to a hayagriva entry of type <code>anthos</code> with a parent of type <code>anthology</code>, but when using the <code>@inbook</code> type, Typst converts to it an entry of type <code>chapter</code> with a parent of type <code>book</code> <em>(read more about hayagriva types <a href=\"https://github.com/typst/hayagriva/blob/main/docs/file-format.md#entry-type\" rel=\"noopener nofollow ugc\">here</a></em>).</p>\n<p>The APA CSL style defines that the title of a “book-like container” should be displayed as</p>\n<blockquote>\n<p><code>{container-title}: {volume-title}</code></p>\n</blockquote>\n<p>where Typst substitutes the corresponding values. The <code>container-title</code> variable is in both cases correctly set to the book or collection’s title. However, for the anthos-in-anthology case, the <code>volume-title</code> variable is <a href=\"https://github.com/typst/hayagriva/blob/0b32dca41966f267cbd4efbfe42fbf8da3e5e7a3/src/csl/taxonomy.rs#L371\" rel=\"noopener nofollow ugc\">also set to that value</a>, while for the chapter-in-book case, it is left empty.</p>\n<p>Now, I’m not well versed in the terminology of anthology, book, volume, and so on, so I can’t tell whether the conversions are working as intended or if there is something that can be improved.</p>",
      "raw": "The simplest fix would be to change `@incollection` to `@inbook`.\n\n**Some context as to what's happening here:**\nWhen using the `@incollection` type, Typst converts it to a hayagriva entry of type `anthos` with a parent of type `anthology`, but when using the `@inbook` type, Typst converts to it an entry of type `chapter` with a parent of type `book` _(read more about hayagriva types [here](https://github.com/typst/hayagriva/blob/main/docs/file-format.md#entry-type)_).\n\nThe APA CSL style defines that the title of a \"book-like container\" should be displayed as\n> `{container-title}: {volume-title}`\n\nwhere Typst substitutes the corresponding values. The `container-title` variable is in both cases correctly set to the book or collection's title. However, for the anthos-in-anthology case, the `volume-title` variable is [also set to that value](https://github.com/typst/hayagriva/blob/0b32dca41966f267cbd4efbfe42fbf8da3e5e7a3/src/csl/taxonomy.rs#L371), while for the chapter-in-book case, it is left empty.\n\nNow, I'm not well versed in the terminology of anthology, book, volume, and so on, so I can't tell whether the conversions are working as intended or if there is something that can be improved.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 19,
      "score": 58.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 10983,
      "post_number": 3,
      "username": "Racso",
      "name": "Racso",
      "created_at": "2025-04-13T12:57:08.583Z",
      "updated_at": "2025-04-13T12:57:08.583Z",
      "cooked": "<p>thank you! it works just fine.<br>\nCan I add Container Title and volume title through bibtex?  This book from the example happens to have a title for the Volume as well. But is is not necessary.</p>",
      "raw": "thank you! it works just fine. \nCan I add Container Title and volume title through bibtex?  This book from the example happens to have a title for the Volume as well. But is is not necessary.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 8.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 833
    },
    {
      "id": 11172,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-04-16T15:46:55.952Z",
      "updated_at": "2025-04-16T15:47:47.950Z",
      "cooked": "<p>You should ask this in <a href=\"https://github.com/typst/hayagriva\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">GitHub - typst/hayagriva: Rusty bibliography management.</a>, since this is what Typst uses. For BibLaTeX that project uses <a href=\"https://github.com/typst/citationberg\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">GitHub - typst/citationberg: A library for parsing CSL styles.</a>.</p>\n<p>Also, all up-to-date CSL styles can be found at <a href=\"https://github.com/citation-style-language/styles\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">GitHub - citation-style-language/styles: Official repository for Citation Style Language (CSL) citation styles.</a>.</p>",
      "raw": "You should ask this in https://github.com/typst/hayagriva, since this is what Typst uses. For BibLaTeX that project uses https://github.com/typst/citationberg.\n\nAlso, all up-to-date CSL styles can be found at https://github.com/citation-style-language/styles.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 14,
      "score": 2.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:49:21.706598"
}