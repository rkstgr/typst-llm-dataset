{
  "topic_metadata": {
    "id": 2290,
    "title": "How to Define a Dictionary with Default Values for Missing Keys in Typst?",
    "slug": "how-to-define-a-dictionary-with-default-values-for-missing-keys-in-typst",
    "posts_count": 5,
    "created_at": "2025-01-03T13:16:11.162Z",
    "last_posted_at": "2025-01-03T21:16:45.928Z",
    "views": 210,
    "like_count": 2,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 356
  },
  "posts": [
    {
      "id": 7175,
      "post_number": 1,
      "username": "Alex",
      "name": "Alex",
      "created_at": "2025-01-03T13:16:11.291Z",
      "updated_at": "2025-01-03T21:20:07.224Z",
      "cooked": "<p>Hello,<br>\nFor a project i declared a custom function like this :</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let formatable_song(\n  title,\n  body_list,\n  body_list_format,\n  header : (\n    tune : none,\n    author : none,\n    lyrics : none,\n    pseudo : none, \n    comments : none),\n) = {...}\n</code></pre>\n<p>I want to be able to “instantiate” formatable_song with header dictionary that have not all the keys like this  instead of manually setting blank value to <code>none</code> :</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let Gaudeamus = formatable_song(\n  \"Gaudeamus\",\n  (couplet1, couplet2, couplet3, couplet4, couplet5, couplet6, couplet7),\n  (\"c\",\"c\",\"c\",\"c\",\"c\",\"c\",\"c\"),\n  header : (\n    comments : \"Les couplets marqué en gras sont ceux faits en cantus\"\n  )\n)\n// instead of this : \n#let Gaudeamus = formatable_song(\n  \"Gaudeamus\",\n  (couplet1, couplet2, couplet3, couplet4, couplet5, couplet6, couplet7),\n  (\"c\",\"c\",\"c\",\"c\",\"c\",\"c\",\"c\"),\n  header : (\n    tune : none,\n    author : none,\n    lyrics : none,\n    pseudo : none,\n    comments : \"Les couplets marqué en gras sont ceux faits en cantus\"\n  )\n)\n</code></pre>\n<p>Before using dict i was using default value parameter but i find this solution “less” elegant.<br>\nIs there a proper way to do this ?<br>\nThank you in advance for your responses</p>",
      "raw": "Hello, \nFor a project i declared a custom function like this : \n```typst \n#let formatable_song(\n  title,\n  body_list,\n  body_list_format,\n  header : (\n    tune : none,\n    author : none,\n    lyrics : none,\n    pseudo : none, \n    comments : none),\n) = {...}\n```\n\nI want to be able to \"instantiate\" formatable_song with header dictionary that have not all the keys like this  instead of manually setting blank value to `none` : \n```typst\n#let Gaudeamus = formatable_song(\n  \"Gaudeamus\",\n  (couplet1, couplet2, couplet3, couplet4, couplet5, couplet6, couplet7),\n  (\"c\",\"c\",\"c\",\"c\",\"c\",\"c\",\"c\"),\n  header : (\n    comments : \"Les couplets marqué en gras sont ceux faits en cantus\"\n  )\n)\n// instead of this : \n#let Gaudeamus = formatable_song(\n  \"Gaudeamus\",\n  (couplet1, couplet2, couplet3, couplet4, couplet5, couplet6, couplet7),\n  (\"c\",\"c\",\"c\",\"c\",\"c\",\"c\",\"c\"),\n  header : (\n    tune : none,\n    author : none,\n    lyrics : none,\n    pseudo : none,\n    comments : \"Les couplets marqué en gras sont ceux faits en cantus\"\n  )\n)\n```\nBefore using dict i was using default value parameter but i find this solution \"less\" elegant. \nIs there a proper way to do this ? \nThank you in advance for your responses",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 857.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 987
    },
    {
      "id": 7176,
      "post_number": 2,
      "username": "maucejo",
      "name": "Mathieu Aucejo",
      "created_at": "2025-01-03T13:48:04.419Z",
      "updated_at": "2025-01-03T13:48:04.419Z",
      "cooked": "<p>For this case, I generally define the following function:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// Merge two dictionaries\n#let create_dict(default-dict, user-dict) = {\n  let new-dict = default-dict\n    for (key, value) in user-dict {\n      if key in default-dict.keys() {\n        new-dict.insert(key, value)\n      }\n    }\n</code></pre>\n<p>The default dictionary contains the default values, while the user dictionary only contains the values you want to change.</p>",
      "raw": "For this case, I generally define the following function:\n```typ\n// Merge two dictionaries\n#let create_dict(default-dict, user-dict) = {\n  let new-dict = default-dict\n    for (key, value) in user-dict {\n      if key in default-dict.keys() {\n        new-dict.insert(key, value)\n      }\n    }\n```\n\nThe default dictionary contains the default values, while the user dictionary only contains the values you want to change.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 31.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 125
    },
    {
      "id": 7177,
      "post_number": 3,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-01-03T14:40:49.324Z",
      "updated_at": "2025-01-03T14:42:22.159Z",
      "cooked": "<p>Or a <em>tiny</em> bit easier: <code>default-dict + user-dict</code> <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>The function declaration would then change in this way:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let formatable_song(..., header: (:)) = {\n  let header = (\n    tune: none,\n    author: none,\n    lyrics: none,\n    pseudo: none, \n    comments: none,\n  ) + header\n  ...\n}\n</code></pre>\n<p>(you could also write <code>header: none</code> but I find <code>header: (:)</code> a bit clearer, as it suggests – to me at least – that there are no headers being set, but headers are still used)</p>",
      "raw": "Or a _tiny_ bit easier: `default-dict + user-dict` :slight_smile: \n\nThe function declaration would then change in this way:\n```typ\n#let formatable_song(..., header: (:)) = {\n  let header = (\n    tune: none,\n    author: none,\n    lyrics: none,\n    pseudo: none, \n    comments: none,\n  ) + header\n  ...\n}\n```\n\n(you could also write `header: none` but I find `header: (:)` a bit clearer, as it suggests -- to me at least -- that there are no headers being set, but headers are still used)",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 56.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 7178,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-01-03T14:43:28.814Z",
      "updated_at": "2025-01-03T14:43:28.814Z",
      "cooked": "<p>PS: <a class=\"mention\" href=\"/u/alex\">@Alex</a>, could you maybe try to revise your post’s title to be a complete question as per the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a>:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n<p>We hope by adhering to this, we make the information in this forum easy to find in the future. Thanks!</p>",
      "raw": "PS: @Alex, could you maybe try to revise your post’s title to be a complete question as per the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11):\n\n> **Good titles are questions you would ask your friend about Typst.**\n\nWe hope by adhering to this, we make the information in this forum easy to find in the future. Thanks!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 32,
      "score": 31.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 7185,
      "post_number": 5,
      "username": "Alex",
      "name": "Alex",
      "created_at": "2025-01-03T21:16:45.928Z",
      "updated_at": "2025-01-03T21:16:45.928Z",
      "cooked": "<p>Understandable,<br>\nworking on it ;)</p>",
      "raw": "Understandable,\nworking on it ;)",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 29,
      "score": 50.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 987
    }
  ],
  "scraped_at": "2025-06-10T09:53:11.320969"
}