{
  "topic_metadata": {
    "id": 1790,
    "title": "Why does using layout() mess with the spacing between paragraphs, and how do i prevent this?",
    "slug": "why-does-using-layout-mess-with-the-spacing-between-paragraphs-and-how-do-i-prevent-this",
    "posts_count": 3,
    "created_at": "2024-11-19T09:16:44.665Z",
    "last_posted_at": "2024-11-19T10:26:53.065Z",
    "views": 52,
    "like_count": 3,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "sijo",
    "tags": [
      "scripting",
      "layout"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 282
  },
  "posts": [
    {
      "id": 5821,
      "post_number": 1,
      "username": "Marco",
      "name": "Marco",
      "created_at": "2024-11-19T09:16:44.821Z",
      "updated_at": "2024-11-19T09:24:06.125Z",
      "cooked": "<p>Hi all,</p>\n<p>I’m trying to create a function that requires the use of the <a href=\"https://typst.app/docs/reference/layout/layout/\">layout</a> function.</p>\n<p>In my specific document i want to remove the space between two paragraphs. This I can do using the above and below parameters of block.</p>\n<p>When i use these blocks without layout this gives the expected result.</p>\n<p>When i add a function call that uses <code>layout(size =&gt; {body})</code> it adds space between the 2 blocks.</p>\n<p>See the entire code below:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let simple-function1(body) = layout(size =&gt; {body})\n#let simple-function2(body) = layout(size =&gt; {body})\n\n#let my-background = rgb(\"#099CACAA\")\n#let my-title-block = block(below: 0pt,inset:(y:1em,left:0pt,right:1em),fill:my-background,text(fill:white,\"Profile\"))\n#let my-profile-content = block(above: 0pt,inset:(y:1em,x:0pt),fill:my-background,stroke:0pt,text(fill:white,lorem(60)))\n\n\n#my-title-block\n#my-profile-content\n\n#simple-function1(my-title-block)\n#simple-function2(my-profile-content)\n</code></pre>\n<p>this results in:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/c/c9c99bc8be0001643249259c46555b85b3a5c9ae.png\" data-download-href=\"https://forum.typst.app/uploads/default/c9c99bc8be0001643249259c46555b85b3a5c9ae\" title=\"example1\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/c/c9c99bc8be0001643249259c46555b85b3a5c9ae_2_353x499.png\" alt=\"example1\" data-base62-sha1=\"sN5UMw7WvzgRCoVsmdv74eBxKF0\" width=\"353\" height=\"499\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/c/c9c99bc8be0001643249259c46555b85b3a5c9ae_2_353x499.png, https://forum.typst.app/uploads/default/optimized/2X/c/c9c99bc8be0001643249259c46555b85b3a5c9ae_2_529x748.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/c/c9c99bc8be0001643249259c46555b85b3a5c9ae_2_706x998.png 2x\" data-dominant-color=\"E5F4F6\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">example1</span><span class=\"informations\">1488×2105 246 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>How can i use layout and still be able to remove the space between my-title-block and my-profile-content?</p>\n<p>Any help is appreciated.</p>",
      "raw": "Hi all,\n\nI'm trying to create a function that requires the use of the [layout](https://typst.app/docs/reference/layout/layout/) function.\n\nIn my specific document i want to remove the space between two paragraphs. This I can do using the above and below parameters of block.\n\nWhen i use these blocks without layout this gives the expected result.\n\nWhen i add a function call that uses ```layout(size => {body})``` it adds space between the 2 blocks.\n\nSee the entire code below:\n\n```typst\n#let simple-function1(body) = layout(size => {body})\n#let simple-function2(body) = layout(size => {body})\n\n#let my-background = rgb(\"#099CACAA\")\n#let my-title-block = block(below: 0pt,inset:(y:1em,left:0pt,right:1em),fill:my-background,text(fill:white,\"Profile\"))\n#let my-profile-content = block(above: 0pt,inset:(y:1em,x:0pt),fill:my-background,stroke:0pt,text(fill:white,lorem(60)))\n\n\n#my-title-block\n#my-profile-content\n\n#simple-function1(my-title-block)\n#simple-function2(my-profile-content)\n```\n\nthis results in: \n![example1|353x499](upload://sN5UMw7WvzgRCoVsmdv74eBxKF0.png)\n\nHow can i use layout and still be able to remove the space between my-title-block and my-profile-content?\n\nAny help is appreciated.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 69.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 720
    },
    {
      "id": 5822,
      "post_number": 2,
      "username": "sijo",
      "name": "",
      "created_at": "2024-11-19T10:07:19.568Z",
      "updated_at": "2024-11-19T10:07:19.568Z",
      "cooked": "<p>Hi, I think <code>layout</code> adds its own block so you need to change the default block spacing before the layout call:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let simple-function(body) = {\n  set block(spacing: 0pt)\n  layout(size =&gt; {body})\n}\n</code></pre>\n<p>Alternatively, you can add weak vertical spacing (of size zero) to remove the unwanted spacing:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let simple-function(body) = layout(size =&gt; body) + v(0pt, weak: true)\n</code></pre>",
      "raw": "Hi, I think `layout` adds its own block so you need to change the default block spacing before the layout call:\n\n```typ\n#let simple-function(body) = {\n  set block(spacing: 0pt)\n  layout(size => {body})\n}\n```\n\nAlternatively, you can add weak vertical spacing (of size zero) to remove the unwanted spacing:\n\n```typ\n#let simple-function(body) = layout(size => body) + v(0pt, weak: true)\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 20,
      "score": 89.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 5823,
      "post_number": 3,
      "username": "Marco",
      "name": "Marco",
      "created_at": "2024-11-19T10:26:53.065Z",
      "updated_at": "2024-11-19T10:26:53.065Z",
      "cooked": "<p>thanks <a class=\"mention\" href=\"/u/sijo\">@sijo</a>,<br>\nThe set block did the trick.</p>\n<aside class=\"quote no-group\" data-username=\"sijo\" data-post=\"2\" data-topic=\"1790\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/s/0A3649/48.png\" class=\"avatar\"> sijo:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">#let simple-function(body) = {\n  set block(spacing: 0pt)\n  layout(size =&gt; {body})\n}\n</code></pre>\n</blockquote>\n</aside>",
      "raw": "thanks @sijo,\nThe set block did the trick.\n\n[quote=\"sijo, post:2, topic:1790\"]\n```\n#let simple-function(body) = {\n  set block(spacing: 0pt)\n  layout(size => {body})\n}\n```\n[/quote]",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 1,
      "reads": 21,
      "score": 19.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 720
    }
  ],
  "scraped_at": "2025-06-10T09:54:44.791196"
}