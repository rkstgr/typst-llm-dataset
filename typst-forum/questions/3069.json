{
  "topic_metadata": {
    "id": 3069,
    "title": "Why did alignment of my outline entries break in Typst 0.13.0?",
    "slug": "why-did-alignment-of-my-outline-entries-break-in-typst-0-13-0",
    "posts_count": 6,
    "created_at": "2025-03-01T20:15:02.077Z",
    "last_posted_at": "2025-03-03T15:32:14.783Z",
    "views": 139,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "Eric",
    "tags": [
      "layout",
      "outline"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 355
  },
  "posts": [
    {
      "id": 9279,
      "post_number": 1,
      "username": "Flavio",
      "name": "Flavio",
      "created_at": "2025-03-01T20:15:02.285Z",
      "updated_at": "2025-03-09T13:12:43.670Z",
      "cooked": "<p>Hi, I’m facing an issue that I can’t solve myself.<br>\nIn my templates, small part outlines was styled as follow:</p>\n<pre><code>set text(size: textSize, fill: textColor, weight: textWeight)\nbox(width: 1.1cm, inset: (y: insetSize), align(left, number))\nh(0.1cm)\nbox(inset: (y: insetSize), width: 100% - 1.2cm, )[\n  #link(location, title)\n  #box(width: 1fr, repeat(text(weight: \"regular\")[. #h(4pt)])) \n  #link(location, heading_page)\n]\n</code></pre>\n<p>This code was working until Typst 0.12.0, but with Typst 0.13.0 I’m facing an unwanted align when the text is too long to fit in one line.</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/5/578fd1dc1fd7ad7cb99aadc9225a82f4fe70a388.png\" alt=\"image\" data-base62-sha1=\"cuBFGwWpPhMLCVidrxSg139pTJu\" width=\"524\" height=\"391\"></p>\n<p>This was the same result with Typst 0.12.0</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/5ba6a2fb97ea1e2937f8fa79882762615c92049b.png\" data-download-href=\"https://forum.typst.app/uploads/default/5ba6a2fb97ea1e2937f8fa79882762615c92049b\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/5ba6a2fb97ea1e2937f8fa79882762615c92049b_2_633x500.png\" alt=\"image\" data-base62-sha1=\"d4MsXSv461Epoj0lBEHk093TU1B\" width=\"633\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/5ba6a2fb97ea1e2937f8fa79882762615c92049b_2_633x500.png, https://forum.typst.app/uploads/default/original/2X/5/5ba6a2fb97ea1e2937f8fa79882762615c92049b.png 1.5x, https://forum.typst.app/uploads/default/original/2X/5/5ba6a2fb97ea1e2937f8fa79882762615c92049b.png 2x\" data-dominant-color=\"F5CAB3\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">649×512 73.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>This is the minimum reproducible example.</p>\n<p><a href=\"https://typst.app/project/rji1x14t2hEFf5ZS7ZwhFp\" class=\"onebox\" target=\"_blank\" rel=\"noopener\">https://typst.app/project/rji1x14t2hEFf5ZS7ZwhFp</a></p>\n<p>Do you have any idea? Thanks a lot.</p>",
      "raw": "Hi, I'm facing an issue that I can't solve myself.\nIn my templates, small part outlines was styled as follow:\n\n    set text(size: textSize, fill: textColor, weight: textWeight)\n    box(width: 1.1cm, inset: (y: insetSize), align(left, number))\n    h(0.1cm)\n    box(inset: (y: insetSize), width: 100% - 1.2cm, )[\n      #link(location, title)\n      #box(width: 1fr, repeat(text(weight: \"regular\")[. #h(4pt)])) \n      #link(location, heading_page)\n    ]\n\nThis code was working until Typst 0.12.0, but with Typst 0.13.0 I'm facing an unwanted align when the text is too long to fit in one line.\n\n![image|524x391](upload://cuBFGwWpPhMLCVidrxSg139pTJu.png)\n\nThis was the same result with Typst 0.12.0\n\n![image|633x500](upload://d4MsXSv461Epoj0lBEHk093TU1B.png)\n\nThis is the minimum reproducible example.\n\nhttps://typst.app/project/rji1x14t2hEFf5ZS7ZwhFp\n\nDo you have any idea? Thanks a lot.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 50,
      "score": 130.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 622
    },
    {
      "id": 9280,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-03-01T21:05:26.350Z",
      "updated_at": "2025-03-01T21:05:26.350Z",
      "cooked": "<p>Hi, could you provide a minimal reproducible example?</p>",
      "raw": "Hi, could you provide a minimal reproducible example?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 18.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 9289,
      "post_number": 3,
      "username": "Flavio",
      "name": "Flavio",
      "created_at": "2025-03-02T12:25:22.635Z",
      "updated_at": "2025-03-02T12:25:22.635Z",
      "cooked": "<p>Hi, this is the example, thanks: <a href=\"https://typst.app/project/rji1x14t2hEFf5ZS7ZwhFp\" class=\"inline-onebox\">Typst</a></p>",
      "raw": "Hi, this is the example, thanks: https://typst.app/project/rji1x14t2hEFf5ZS7ZwhFp",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 7.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 622
    },
    {
      "id": 9291,
      "post_number": 4,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-03-02T14:29:58.719Z",
      "updated_at": "2025-03-02T14:29:58.719Z",
      "cooked": "<p>You have your whole outline wrapped in an <code>align(bottom + right, ..)</code> block. The alignment of the outline then propagates to the outline entries, thus the individual lines of the title are also right-aligned. You can fix this by overriding the alignment inside the box containing the title, similar to how you did it for the number:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let my-outline-row(..) = {\n  set text(size: textSize, fill: textColor, weight: textWeight)\n  box(width: 1.1cm, inset: (y: insetSize), align(left, number))\n  h(0.1cm)\n  box(inset: (y: insetSize), width: 100% - 1.2cm, )[\n    #set align(left) // &lt;-- Add this line\n    #link(location, title)\n    #box(width: 1fr, repeat(text(weight: \"regular\")[. #h(4pt)])) \n    #link(location, heading_page)\n  ]\n}\n</code></pre>",
      "raw": "You have your whole outline wrapped in an `align(bottom + right, ..)` block. The alignment of the outline then propagates to the outline entries, thus the individual lines of the title are also right-aligned. You can fix this by overriding the alignment inside the box containing the title, similar to how you did it for the number:\n\n```typ\n#let my-outline-row(..) = {\n  set text(size: textSize, fill: textColor, weight: textWeight)\n  box(width: 1.1cm, inset: (y: insetSize), align(left, number))\n  h(0.1cm)\n  box(inset: (y: insetSize), width: 100% - 1.2cm, )[\n    #set align(left) // <-- Add this line\n    #link(location, title)\n    #box(width: 1fr, repeat(text(weight: \"regular\")[. #h(4pt)])) \n    #link(location, heading_page)\n  ]\n}\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 7.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 9311,
      "post_number": 5,
      "username": "Flavio",
      "name": "Flavio",
      "created_at": "2025-03-03T08:13:28.327Z",
      "updated_at": "2025-03-03T08:13:28.327Z",
      "cooked": "<p>Thanks a lot. I don’t understand why the behavior changed with 0.13.0. Maybe it was a bug of the previous versions…</p>",
      "raw": "Thanks a lot. I don't understand why the behavior changed with 0.13.0. Maybe it was a bug of the previous versions...",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 30,
      "score": 6.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 622
    },
    {
      "id": 9318,
      "post_number": 6,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-03T15:32:14.783Z",
      "updated_at": "2025-03-03T15:32:23.544Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/flavio\">@Flavio</a>, glad you’ve solved your problem. I’ve marked <a class=\"mention\" href=\"/u/eric\">@Eric</a>’s response as a solution. Please let us know if this was a mistake.</p>\n<p>In addition, I’ve renamed your post so it is a question per our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a></p>\n<p>Hope you have a great time at the forum!</p>",
      "raw": "Hey @Flavio, glad you've solved your problem. I've marked @Eric's response as a solution. Please let us know if this was a mistake.\n\nIn addition, I've renamed your post so it is a question per our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\n\nHope you have a great time at the forum!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 4.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:50:51.758274"
}