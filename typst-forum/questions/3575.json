{
  "topic_metadata": {
    "id": 3575,
    "title": "How to draw in absolute page coordinates in CeTZ?",
    "slug": "how-to-draw-in-absolute-page-coordinates-in-cetz",
    "posts_count": 5,
    "created_at": "2025-04-09T03:44:35.126Z",
    "last_posted_at": "2025-04-18T15:44:30.109Z",
    "views": 127,
    "like_count": 5,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Mathemensch",
    "tags": [
      "cetz"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 599
  },
  "posts": [
    {
      "id": 10825,
      "post_number": 1,
      "username": "thornoar",
      "name": "Roman Maksimovich",
      "created_at": "2025-04-09T03:44:35.258Z",
      "updated_at": "2025-04-09T03:46:47.732Z",
      "cooked": "<p>Hi everyone! I’m writing an article about astronomy, and I’d like a page-wide schematic picture of the solar system on my title page. This is my code so far:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.4\" as cz\n#set page(margin: 0pt)\n#cz.canvas(\n  length: 2cm,\n  {\n    import cz.draw: *\n    let sunpos = (3,-7)\n    let sunrad = .8\n    let fontsize = 30pt\n\n    // Drawing the Sun\n    circle(name: \"sun\", sunpos, radius: sunrad, fill: black)\n    content(\"sun\", text(\"S\", size: fontsize, fill: white, stroke: white))\n\n    // Drawing the orbits\n    circle(sunpos, radius: 2, name: \"orbit-mercury\")\n    circle(sunpos, radius: 3, name: \"orbit-venus\")\n    circle(sunpos, radius: 4, name: \"orbit-earth\")\n    circle(sunpos, radius: 5, name: \"orbit-mars\")\n  }\n)\n#pagebreak()\n</code></pre>\n<p>This yields the following PDF page:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/2/296cdb04dd32901b6f6baae4682ba3bb3b50b7f4.png\" data-download-href=\"https://forum.typst.app/uploads/default/296cdb04dd32901b6f6baae4682ba3bb3b50b7f4\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/2/296cdb04dd32901b6f6baae4682ba3bb3b50b7f4_2_436x500.png\" alt=\"image\" data-base62-sha1=\"5UsNukEA4H952NL7WivOXvjRwxe\" width=\"436\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/2/296cdb04dd32901b6f6baae4682ba3bb3b50b7f4_2_436x500.png, https://forum.typst.app/uploads/default/optimized/2X/2/296cdb04dd32901b6f6baae4682ba3bb3b50b7f4_2_654x750.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/2/296cdb04dd32901b6f6baae4682ba3bb3b50b7f4_2_872x1000.png 2x\" data-dominant-color=\"F6F6F6\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1412×1618 155 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>The problem is that the canvas automatically fits the image to the top and left edges of the page, and so the Sun ends up equidistant from these edges, despite supposedly having coordinates <code>(3,-7)</code>. Is it possible to draw shapes where I actually want them to appear on the page, and just crop them if they go out of bounds? Ideally, I would like something like this (this was drawn in Asymptote):<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/8/87a4af736cf9b26384fd3814d3d5a168bf3cce76.png\" data-download-href=\"https://forum.typst.app/uploads/default/87a4af736cf9b26384fd3814d3d5a168bf3cce76\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/8/87a4af736cf9b26384fd3814d3d5a168bf3cce76_2_353x500.png\" alt=\"image\" data-base62-sha1=\"jlXiiXSCmErXp6ZBTZ4KtDCOBrE\" width=\"353\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/8/87a4af736cf9b26384fd3814d3d5a168bf3cce76_2_353x500.png, https://forum.typst.app/uploads/default/optimized/2X/8/87a4af736cf9b26384fd3814d3d5a168bf3cce76_2_529x750.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/8/87a4af736cf9b26384fd3814d3d5a168bf3cce76_2_706x1000.png 2x\" data-dominant-color=\"F8F8F8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1146×1620 73.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hi everyone! I'm writing an article about astronomy, and I'd like a page-wide schematic picture of the solar system on my title page. This is my code so far:\n```typ\n#import \"@preview/cetz:0.3.4\" as cz\n#set page(margin: 0pt)\n#cz.canvas(\n  length: 2cm,\n  {\n    import cz.draw: *\n    let sunpos = (3,-7)\n    let sunrad = .8\n    let fontsize = 30pt\n\n    // Drawing the Sun\n    circle(name: \"sun\", sunpos, radius: sunrad, fill: black)\n    content(\"sun\", text(\"S\", size: fontsize, fill: white, stroke: white))\n\n    // Drawing the orbits\n    circle(sunpos, radius: 2, name: \"orbit-mercury\")\n    circle(sunpos, radius: 3, name: \"orbit-venus\")\n    circle(sunpos, radius: 4, name: \"orbit-earth\")\n    circle(sunpos, radius: 5, name: \"orbit-mars\")\n  }\n)\n#pagebreak()\n```\n\nThis yields the following PDF page:\n![image|436x500](upload://5UsNukEA4H952NL7WivOXvjRwxe.png)\n\nThe problem is that the canvas automatically fits the image to the top and left edges of the page, and so the Sun ends up equidistant from these edges, despite supposedly having coordinates `(3,-7)`. Is it possible to draw shapes where I actually want them to appear on the page, and just crop them if they go out of bounds? Ideally, I would like something like this (this was drawn in Asymptote):\n![image|353x500](upload://jlXiiXSCmErXp6ZBTZ4KtDCOBrE.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 187.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1159
    },
    {
      "id": 10833,
      "post_number": 2,
      "username": "Mathemensch",
      "name": "Alexander Schulz",
      "created_at": "2025-04-09T07:59:57.992Z",
      "updated_at": "2025-04-09T07:59:57.992Z",
      "cooked": "<p>Hi thornoa,</p>\n<p>As mentioned in the CeTZ manual, clipping is currently not supported. This means you can’t define a drawing box that restricts where lines are drawn—everything will be rendered regardless of the canvas boundaries.</p><aside class=\"onebox allowlistedgeneric\" data-onebox-src=\"https://cetz-package.github.io/docs/tutorials/karl/#not-really-path-clipping\">\n  <header class=\"source\">\n\n      <a href=\"https://cetz-package.github.io/docs/tutorials/karl/#not-really-path-clipping\" target=\"_blank\" rel=\"noopener\">cetz-package.github.io</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    \n\n<h3><a href=\"https://cetz-package.github.io/docs/tutorials/karl/#not-really-path-clipping\" target=\"_blank\" rel=\"noopener\">A Picture for Karl's New Students | CeTZ Documentation</a></h3>\n\n  <p>This tutorial is intended for new users of CeTZ. It does not give an exhaustive account of all the features of CeTZ, just of those you are likely to use right away. This tutorial also acts as a parallel to TikZ's tutorial A Picture for Karl's...</p>\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>A workaround is to place your canvas in the center of the page and shift it slightly, so the page edges effectively act as a “clip” for your solar system. You can even set the canvas as the page background:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.3.4\" as cz\n#set page(margin: 0pt, background: \n  move(\n    dx: 5cm,\n    dy: 5cm,\n    cz.canvas(\n      length: 4cm,\n      {\n        import cz.draw: *\n        let sunpos = (3, -7)\n        let sunrad = 0.8\n        let fontsize = 30pt\n\n        // Drawing the Sun\n        circle(name: \"sun\", sunpos, radius: sunrad, fill: black)\n        content(\"sun\", text(\"S\", size: fontsize, fill: white, stroke: white))\n\n        // Drawing the orbits\n        circle(sunpos, radius: 2, name: \"orbit-mercury\")\n        circle(sunpos, radius: 3, name: \"orbit-venus\")\n        circle(sunpos, radius: 4, name: \"orbit-earth\")\n        circle(sunpos, radius: 5, name: \"orbit-mars\")\n      }\n    )\n  )\n)\n#pagebreak()\n#set page(background: none)\n</code></pre>\n<p>Which results in this:<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/2/2cf75bc6663d49ac7a622cf256a391059a1d41ec.png\" data-download-href=\"https://forum.typst.app/uploads/default/2cf75bc6663d49ac7a622cf256a391059a1d41ec\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/2/2cf75bc6663d49ac7a622cf256a391059a1d41ec_2_361x500.png\" alt=\"image\" data-base62-sha1=\"6pMYfJ7FiGE6FOHYZJY8GIi1SNu\" width=\"361\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/2/2cf75bc6663d49ac7a622cf256a391059a1d41ec_2_361x500.png, https://forum.typst.app/uploads/default/optimized/2X/2/2cf75bc6663d49ac7a622cf256a391059a1d41ec_2_541x750.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/2/2cf75bc6663d49ac7a622cf256a391059a1d41ec_2_722x1000.png 2x\" data-dominant-color=\"EEEEEE\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1041×1440 106 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Hi thornoa,\n\nAs mentioned in the CeTZ manual, clipping is currently not supported. This means you can't define a drawing box that restricts where lines are drawn—everything will be rendered regardless of the canvas boundaries.  \nhttps://cetz-package.github.io/docs/tutorials/karl/#not-really-path-clipping\n\nA workaround is to place your canvas in the center of the page and shift it slightly, so the page edges effectively act as a \"clip\" for your solar system. You can even set the canvas as the page background:\n\n```typ\n#import \"@preview/cetz:0.3.4\" as cz\n#set page(margin: 0pt, background: \n  move(\n    dx: 5cm,\n    dy: 5cm,\n    cz.canvas(\n      length: 4cm,\n      {\n        import cz.draw: *\n        let sunpos = (3, -7)\n        let sunrad = 0.8\n        let fontsize = 30pt\n\n        // Drawing the Sun\n        circle(name: \"sun\", sunpos, radius: sunrad, fill: black)\n        content(\"sun\", text(\"S\", size: fontsize, fill: white, stroke: white))\n\n        // Drawing the orbits\n        circle(sunpos, radius: 2, name: \"orbit-mercury\")\n        circle(sunpos, radius: 3, name: \"orbit-venus\")\n        circle(sunpos, radius: 4, name: \"orbit-earth\")\n        circle(sunpos, radius: 5, name: \"orbit-mars\")\n      }\n    )\n  )\n)\n#pagebreak()\n#set page(background: none)\n```\n\nWhich results in this:\n![image|361x500](upload://6pMYfJ7FiGE6FOHYZJY8GIi1SNu.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 4,
      "reads": 33,
      "score": 76.6,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 307
    },
    {
      "id": 10835,
      "post_number": 3,
      "username": "thornoar",
      "name": "Roman Maksimovich",
      "created_at": "2025-04-09T09:04:20.085Z",
      "updated_at": "2025-04-09T09:04:20.085Z",
      "cooked": "<p>Thank you! That’s a great solution.</p>",
      "raw": "Thank you! That's a great solution.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 36.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1159
    },
    {
      "id": 10949,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-04-11T21:19:08.974Z",
      "updated_at": "2025-04-11T21:19:08.974Z",
      "cooked": "<p>Yeah, since CeTZ is a package for drawing, it will show a full drawing, so to use negative value to move the drawing into the opposite direction you would have to use <code>move()</code>, although depending on what you need, a <code>place(dx: ..., dy: ..., cetz.canvas())</code> can be a better solution since it will by default start in the top left corner bypassing page margins if used as <code>background</code> or <code>foreground</code>.</p>",
      "raw": "Yeah, since CeTZ is a package for drawing, it will show a full drawing, so to use negative value to move the drawing into the opposite direction you would have to use `move()`, although depending on what you need, a `place(dx: ..., dy: ..., cetz.canvas())` can be a better solution since it will by default start in the top left corner bypassing page margins if used as `background` or `foreground`.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 9.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 11287,
      "post_number": 5,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-04-18T15:44:30.109Z",
      "updated_at": "2025-04-18T15:44:30.109Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/thornoar\">@thornoar</a>, thanks for your question! If you feel the response you got has sufficiently answered your question, be sure to give it a checkmark <img src=\"https://forum.typst.app/images/emoji/apple/ballot_box_with_check.png?v=12\" title=\":ballot_box_with_check:\" class=\"emoji\" alt=\":ballot_box_with_check:\" loading=\"lazy\" width=\"20\" height=\"20\">. This will help others find the solution in the future. Thanks!</p>\n<p>As an aside - even though CeTZ doesn’t support clipping, <a href=\"https://typst.app/docs/reference/layout/block/#parameters-clip\"><code>block</code> does</a>, so you can use the shifting trick even when you don’t want to fill the full page. In addition to <code>move</code> (which will affect <em>where</em> the canvas is but not its size), you could also use <a href=\"https://typst.app/docs/reference/layout/pad/\"><code>pad</code></a> with negative values, so that Typst’s layouting (i.e. the surrounding clipping block) treats the canvas as smaller than it actually is.</p>",
      "raw": "Hi @thornoar, thanks for your question! If you feel the response you got has sufficiently answered your question, be sure to give it a checkmark :ballot_box_with_check:. This will help others find the solution in the future. Thanks!\n\nAs an aside - even though CeTZ doesn't support clipping, [`block` does](https://typst.app/docs/reference/layout/block/#parameters-clip), so you can use the shifting trick even when you don't want to fill the full page. In addition to `move` (which will affect _where_ the canvas is but not its size), you could also use [`pad`](https://typst.app/docs/reference/layout/pad/) with negative values, so that Typst's layouting (i.e. the surrounding clipping block) treats the canvas as smaller than it actually is.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 20,
      "score": 4.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    }
  ],
  "scraped_at": "2025-06-10T09:49:30.597461"
}