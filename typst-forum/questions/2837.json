{
  "topic_metadata": {
    "id": 2837,
    "title": "Why is Typst Preview working, while typst compile fails?",
    "slug": "why-is-typst-preview-working-while-typst-compile-fails",
    "posts_count": 9,
    "created_at": "2025-02-15T10:04:56.713Z",
    "last_posted_at": "2025-02-23T15:22:29.946Z",
    "views": 490,
    "like_count": 0,
    "reply_count": 8,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 8,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "tooling",
      "tinymist",
      "typst-preview"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 735
  },
  "posts": [
    {
      "id": 8702,
      "post_number": 1,
      "username": "Llama",
      "name": "Llama",
      "created_at": "2025-02-15T10:04:56.898Z",
      "updated_at": "2025-02-21T22:44:19.184Z",
      "cooked": "<p>Hi,</p>\n<p>I’m using neovim (AstroNvim) for Typst, <a href=\"https://github.com/AstroNvim/astrocommunity/tree/main/lua/astrocommunity/pack/typst\" rel=\"noopener nofollow ugc\">Typst Language Pack</a>. It works, my preview looks like I expect. When I try to generate a PDF from the same typ file, I get an error:</p>\n<pre><code class=\"lang-auto\">master ~/spaces/text/wei&gt; typst compile the-hundred-squares-ru.typ hunnerd.pdf\nerror: entry does not have field \"page\"\n   ┌─ robinson-toc.typ:67:48\n   │\n67 │         #subcnt #box(width: 1fr, repeat[.]) #it.page\n   │                                                 ^^^^\n\nexit 1\nmaster ~/spaces/text/wei&gt;\n</code></pre>\n<p>I understand that my info is insufficient; what data should I supply? Nevertheless, it looks like the CLI <code>typst</code> lacks some environment that the Preview has. What could that be?</p>",
      "raw": "Hi,\n\nI'm using neovim (AstroNvim) for Typst, [Typst Language Pack](https://github.com/AstroNvim/astrocommunity/tree/main/lua/astrocommunity/pack/typst). It works, my preview looks like I expect. When I try to generate a PDF from the same typ file, I get an error:\n```\nmaster ~/spaces/text/wei> typst compile the-hundred-squares-ru.typ hunnerd.pdf\nerror: entry does not have field \"page\"\n   ┌─ robinson-toc.typ:67:48\n   │\n67 │         #subcnt #box(width: 1fr, repeat[.]) #it.page\n   │                                                 ^^^^\n\nexit 1\nmaster ~/spaces/text/wei>\n```\nI understand that my info is insufficient; what data should I supply? Nevertheless, it looks like the CLI `typst` lacks some environment that the Preview has. What could that be?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 55,
      "score": 2081.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1201
    },
    {
      "id": 8707,
      "post_number": 2,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-02-15T13:02:04.992Z",
      "updated_at": "2025-02-15T13:02:04.992Z",
      "cooked": "<p>I assume the offending code is part of a show rule for an outline entry.</p>\n<p>As the field <code>it.page</code> has been replaced with a function <code>it.page()</code> starting with Typst v0.13, it seems to me that you have the 0.13 release candidate installed. This version of Typst is then used when you run <code>typst compile</code>, whereas typst-preview likely ships its own compiler, which still uses version 0.12.</p>",
      "raw": "I assume the offending code is part of a show rule for an outline entry.\n\nAs the field `it.page` has been replaced with a function `it.page()` starting with Typst v0.13, it seems to me that you have the 0.13 release candidate installed. This version of Typst is then used when you run `typst compile`, whereas typst-preview likely ships its own compiler, which still uses version 0.12.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 54,
      "score": 15.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 8709,
      "post_number": 3,
      "username": "Llama",
      "name": "Llama",
      "created_at": "2025-02-15T13:57:48.285Z",
      "updated_at": "2025-02-15T13:59:02.689Z",
      "cooked": "<p>Exactly! I downgraded <code>typst</code> with</p>\n<pre><code class=\"lang-auto\">cargo binstall typst-cli --force\n</code></pre>\n<p>and the error’s gone. Now it’s</p>\n<pre><code class=\"lang-auto\">~&gt; typst --version\ntypst 0.12.0 (737895d7)\n~&gt;\n</code></pre>\n<p>Release on GitHub <a href=\"https://github.com/typst/typst/releases/tag/v0.12.0\" rel=\"noopener nofollow ugc\"> <code>737895d</code></a>. So I shouldn’t use any release candidate in a normal workflow.</p>\n<p>Besides, can I be sure that the <code>tinymist</code> language server uses the same version of the language?</p>",
      "raw": "Exactly! I downgraded `typst` with\n```\ncargo binstall typst-cli --force\n```\nand the error's gone. Now it's\n```\n~> typst --version\ntypst 0.12.0 (737895d7)\n~>\n```\nRelease on GitHub [ `737895d`](https://github.com/typst/typst/releases/tag/v0.12.0). So I shouldn't use any release candidate in a normal workflow.\n\nBesides, can I be sure that the `tinymist` language server uses the same version of the language?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 50,
      "score": 25.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1201
    },
    {
      "id": 8850,
      "post_number": 4,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-21T22:46:49.237Z",
      "updated_at": "2025-02-21T22:46:49.237Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Llama\" data-post=\"3\" data-topic=\"2837\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/llama/48/1951_2.png\" class=\"avatar\"> Llama:</div>\n<blockquote>\n<p>can I be sure that the <code>tinymist</code> language server uses the same version of the language?</p>\n</blockquote>\n</aside>\n<p>Tinymist uses even patch releases (e.g. 0.12.18) for regular releases – this would be equivalent to Typst 0.12 – and odd releases (e.g. 0.12.21) for pre-releases – this specific one uses 0.13 (or a Typst commit very close to it) but isn’t considered stable enough for Tinymist 0.13.0 yet.</p>\n<p>So while Tinymist (necessarily) uses a fork of the Typst compiler to support its features, using a stable (even) release ensures you’re using the released version of Typst.</p>\n<hr>\n<p>btw, I updated the title to bring it in line with the <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\">question guidelines</a>:</p>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n<p>I also added tags, as it makes your question easier to find.</p>\n<p>Finally, if Eric’s response answered your initial question, marking it with a checkmark <img src=\"https://forum.typst.app/images/emoji/apple/ballot_box_with_check.png?v=12\" title=\":ballot_box_with_check:\" class=\"emoji\" alt=\":ballot_box_with_check:\" loading=\"lazy\" width=\"20\" height=\"20\"> would help others find the answer more easily. Cheers! <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "[quote=\"Llama, post:3, topic:2837\"]\ncan I be sure that the `tinymist` language server uses the same version of the language?\n[/quote]\n\nTinymist uses even patch releases (e.g. 0.12.18) for regular releases -- this would be equivalent to Typst 0.12 -- and odd releases (e.g. 0.12.21) for pre-releases -- this specific one uses 0.13 (or a Typst commit very close to it) but isn't considered stable enough for Tinymist 0.13.0 yet.\n\nSo while Tinymist (necessarily) uses a fork of the Typst compiler to support its features, using a stable (even) release ensures you're using the released version of Typst.\n\n---\n\nbtw, I updated the title to bring it in line with the [question guidelines](https://forum.typst.app/t/how-to-post-in-the-questions-category/11):\n\n> **Good titles are questions you would ask your friend about Typst.**\n\nI also added tags, as it makes your question easier to find.\n\nFinally, if Eric's response answered your initial question, marking it with a checkmark :ballot_box_with_check: would help others find the answer more easily. Cheers! :slight_smile:",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 43,
      "score": 13.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 8851,
      "post_number": 5,
      "username": "Llama",
      "name": "Llama",
      "created_at": "2025-02-21T22:56:15.989Z",
      "updated_at": "2025-02-21T22:58:01.894Z",
      "cooked": "<p>Right now Typst 0.13.0 is released, Tinymist and Typs Preview updated (?), to what versions I’m not sure, and not working any more. That is, I have gray space instead of preview while <code>typst compile</code> works (with breaking changes corrected).</p>\n<p>The other way around <img src=\"https://forum.typst.app/images/emoji/apple/blush.png?v=12\" title=\":blush:\" class=\"emoji\" alt=\":blush:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Right now Typst 0.13.0 is released, Tinymist and Typs Preview updated (?), to what versions I'm not sure, and not working any more. That is, I have gray space instead of preview while `typst compile` works (with breaking changes corrected).\n\nThe other way around :blush:",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 40,
      "score": 13.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1201
    },
    {
      "id": 8853,
      "post_number": 6,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-21T23:01:58.606Z",
      "updated_at": "2025-02-21T23:01:58.606Z",
      "cooked": "<p>I’m on Tinymist 0.12.21 (latest VS Code extension) and compiling and preview works fine, so we’d need more details to figure this out.</p>",
      "raw": "I'm on Tinymist 0.12.21 (latest VS Code extension) and compiling and preview works fine, so we'd need more details to figure this out.",
      "reply_to_post_number": 5,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 12.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 8854,
      "post_number": 7,
      "username": "Llama",
      "name": "Llama",
      "created_at": "2025-02-21T23:13:41.293Z",
      "updated_at": "2025-02-21T23:42:48.653Z",
      "cooked": "<p>My <code>typst-cli</code>:</p>\n<pre><code class=\"lang-auto\">~&gt; typst --version\ntypst 0.13.0 (8dce676d)\n</code></pre>\n<p>Tinymist 0.12.20, which may be critical, if I understand you correctly. So far it refuses to update, and for good reason, apparently. The latest release is still 0.12.20: <a href=\"https://github.com/Myriad-Dreamin/tinymist\" rel=\"noopener nofollow ugc\">Tinymist</a></p>\n<p>I use AstroNvim <a href=\"https://github.com/AstroNvim/astrocommunity/tree/main/lua/astrocommunity/pack/typst\" rel=\"noopener nofollow ugc\">pack</a></p>\n<p>UPD</p>\n<p>Just tried VScodium, Tinymist plugin. Exactly the same situation: gray preview, <em>and</em> Tinymist version 0.12.20.</p>\n<p>UPD2</p>\n<p>Oh, <em>pre-release</em> 0.12.21, sixteen hours ago <img src=\"https://forum.typst.app/images/emoji/apple/blush.png?v=12\" title=\":blush:\" class=\"emoji\" alt=\":blush:\" loading=\"lazy\" width=\"20\" height=\"20\"> . Probably, I just have to wait a bit… Or do I have to wait for 0.12.22?</p>",
      "raw": "My `typst-cli`:\n```\n~> typst --version\ntypst 0.13.0 (8dce676d)\n```\nTinymist 0.12.20, which may be critical, if I understand you correctly. So far it refuses to update, and for good reason, apparently. The latest release is still 0.12.20: [Tinymist](https://github.com/Myriad-Dreamin/tinymist)\n\nI use AstroNvim [pack](https://github.com/AstroNvim/astrocommunity/tree/main/lua/astrocommunity/pack/typst)\n\nUPD\n\nJust tried VScodium, Tinymist plugin. Exactly the same situation: gray preview, _and_ Tinymist version 0.12.20.\n\nUPD2\n\nOh, _pre-release_ 0.12.21, sixteen hours ago :blush: . Probably, I just have to wait a bit... Or do I have to wait for 0.12.22?",
      "reply_to_post_number": 6,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 27.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1201
    },
    {
      "id": 8857,
      "post_number": 8,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-02-22T07:27:58.334Z",
      "updated_at": "2025-02-22T07:27:58.334Z",
      "cooked": "<p>On even patches, tinymist 0.x is equivalent to Typst 0.x. So if your goal is working with 0.13 and tinymist is still on 0.12,you <em>definitely</em> want an odd patch version.</p>\n<p>There was also 0.12.19, you can try to “downgrade” to that if 0.12.21 is not ready yet for your editor.</p>",
      "raw": "On even patches, tinymist 0.x is equivalent to Typst 0.x. So if your goal is working with 0.13 and tinymist is still on 0.12,you _definitely_ want an odd patch version.\n\nThere was also 0.12.19, you can try to \"downgrade\" to that if 0.12.21 is not ready yet for your editor.",
      "reply_to_post_number": 7,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 36,
      "score": 52.2,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 8920,
      "post_number": 9,
      "username": "Llama",
      "name": "Llama",
      "created_at": "2025-02-23T15:22:29.946Z",
      "updated_at": "2025-02-23T15:35:37.851Z",
      "cooked": "<p>My latest news <img src=\"https://forum.typst.app/images/emoji/apple/grin.png?v=12\" title=\":grin:\" class=\"emoji\" alt=\":grin:\" loading=\"lazy\" width=\"20\" height=\"20\"> :</p>\n<ol>\n<li>The long term Tinymist release is <a href=\"https://github.com/Myriad-Dreamin/tinymist/releases\" rel=\"noopener nofollow ugc\">there</a> and installable.</li>\n<li>With it I can see the preview, but no forward/inverse search for me. Is there anything to check?</li>\n</ol>\n<p>UPD</p>\n<p>With VSCodium forward/inverse search is working. Neovim problem :(</p>",
      "raw": "My latest news :grin: :\n\n1. The long term Tinymist release is [there](https://github.com/Myriad-Dreamin/tinymist/releases) and installable.\n2. With it I can see the preview, but no forward/inverse search for me. Is there anything to check?\n\nUPD\n\nWith VSCodium forward/inverse search is working. Neovim problem :(",
      "reply_to_post_number": 8,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 10.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1201
    }
  ],
  "scraped_at": "2025-06-10T09:51:34.938734"
}