{
  "topic_metadata": {
    "id": 536,
    "title": "Is there an equivalent to Latex's \\cancelto in Typst?",
    "slug": "is-there-an-equivalent-to-latexs-cancelto-in-typst",
    "posts_count": 10,
    "created_at": "2024-09-21T00:09:17.872Z",
    "last_posted_at": "2025-05-12T14:37:45.317Z",
    "views": 637,
    "like_count": 15,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Andrew",
    "tags": [
      "scripting",
      "math",
      "latex-migration"
    ],
    "category_id": 5,
    "participant_count": 5,
    "word_count": 641
  },
  "posts": [
    {
      "id": 2113,
      "post_number": 1,
      "username": "Oddball777",
      "name": "Gustave Coulombe",
      "created_at": "2024-09-21T00:09:17.984Z",
      "updated_at": "2024-09-22T12:40:41.036Z",
      "cooked": "<p>Latex has “cancelto” in math mode. It’s similar to “cancel”, but it’s an arrow instead of a line, and it points to an additional parameter which is supposed to indicate what expression evaluates to. Most often, it’s 0 or 1 (see image). Ideally it would be implemented by the developers, but in the meantime, is there a way to reproduce this with a show rule or something? Thanks!<br>\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/1X/fdc4965f233b34d080c6a0ea51a5a3992f6b74ec.png\" data-download-href=\"https://forum.typst.app/uploads/default/fdc4965f233b34d080c6a0ea51a5a3992f6b74ec\" title=\"Iz5tK\"><img src=\"https://forum.typst.app/uploads/default/optimized/1X/fdc4965f233b34d080c6a0ea51a5a3992f6b74ec_2_690x184.png\" alt=\"Iz5tK\" data-base62-sha1=\"AcVZalsd2gNsvpK7jnxFWXihUbG\" width=\"690\" height=\"184\" srcset=\"https://forum.typst.app/uploads/default/optimized/1X/fdc4965f233b34d080c6a0ea51a5a3992f6b74ec_2_690x184.png, https://forum.typst.app/uploads/default/original/1X/fdc4965f233b34d080c6a0ea51a5a3992f6b74ec.png 1.5x, https://forum.typst.app/uploads/default/original/1X/fdc4965f233b34d080c6a0ea51a5a3992f6b74ec.png 2x\" data-dominant-color=\"F6F6F6\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Iz5tK</span><span class=\"informations\">901×241 38.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "Latex has \"cancelto\" in math mode. It's similar to \"cancel\", but it's an arrow instead of a line, and it points to an additional parameter which is supposed to indicate what expression evaluates to. Most often, it's 0 or 1 (see image). Ideally it would be implemented by the developers, but in the meantime, is there a way to reproduce this with a show rule or something? Thanks!\n![Iz5tK|690x184](upload://AcVZalsd2gNsvpK7jnxFWXihUbG.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 100,
      "score": 2465.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 409
    },
    {
      "id": 2185,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-21T17:47:54.966Z",
      "updated_at": "2024-09-21T17:47:54.966Z",
      "cooked": "<p>I’m not aware of an easy solution for this, you might as well <a href=\"https://github.com/typst/typst/issues/new?assignees=&amp;labels=feature+request&amp;projects=&amp;template=feature.yml&amp;title=Write+a+short+and+descriptive+title%21\" rel=\"noopener nofollow ugc\">create a new issue</a> for this.</p>\n<p>Here is my very rough solution:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let cancelto(body, to) = {\n  let arrow = rotate(-55deg, scale(x: 170%, $--&gt;$))\n  context {\n    let m = measure(body)\n    let (w, h) = (m.width, m.height * 2)\n    set place(center + horizon)\n    // block(height: h * 2.5, align(horizon, body)) // Add vertical margins.\n    body\n    place(dx: -w * 0.5, dy: -h * 0.1, arrow)\n    place(dx: w * 0.3, dy: -h * 1.1, $0$)\n  }\n}\n\n$(diff T)/(diff t) = k (diff^2 T)/(diff z^2) + v_z (diff T)/(diff z)$\n\n$cancelto((diff T)/(diff t), 0) = k (diff^2 T)/(diff z^2) + v_z (diff T)/(diff z)$\n\n$(diff T)/(diff t) = k (diff^2 T)/(diff z^2) + v_z (diff T)/(diff z)$\n</code></pre>\n<div align=\"center\">\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/bb9ce9029001900b7e898f28ded0281787e15238.png\" alt=\"image\" data-base62-sha1=\"qLHsRrKH0clfo07oiRyyCVsWsHe\" width=\"483\" height=\"334\"></p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/c6e64136a379c372cdc089a16d0c595327655532.png\" alt=\"image\" data-base62-sha1=\"snxRaOZF6gXD9DFmCZdU1OYVsbw\" width=\"468\" height=\"450\"></p></div>",
      "raw": "I'm not aware of an easy solution for this, you might as well [create a new issue](https://github.com/typst/typst/issues/new?assignees=&labels=feature+request&projects=&template=feature.yml&title=Write+a+short+and+descriptive+title%21) for this.\n\nHere is my very rough solution:\n\n```typ\n#let cancelto(body, to) = {\n  let arrow = rotate(-55deg, scale(x: 170%, $-->$))\n  context {\n    let m = measure(body)\n    let (w, h) = (m.width, m.height * 2)\n    set place(center + horizon)\n    // block(height: h * 2.5, align(horizon, body)) // Add vertical margins.\n    body\n    place(dx: -w * 0.5, dy: -h * 0.1, arrow)\n    place(dx: w * 0.3, dy: -h * 1.1, $0$)\n  }\n}\n\n$(diff T)/(diff t) = k (diff^2 T)/(diff z^2) + v_z (diff T)/(diff z)$\n\n$cancelto((diff T)/(diff t), 0) = k (diff^2 T)/(diff z^2) + v_z (diff T)/(diff z)$\n\n$(diff T)/(diff t) = k (diff^2 T)/(diff z^2) + v_z (diff T)/(diff z)$\n```\n\n<div align=center>\n\n![image|483x334](upload://qLHsRrKH0clfo07oiRyyCVsWsHe.png)\n\n![image|468x450](upload://snxRaOZF6gXD9DFmCZdU1OYVsbw.png)",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 4,
      "reads": 89,
      "score": 182.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2199,
      "post_number": 3,
      "username": "Oddball777",
      "name": "Gustave Coulombe",
      "created_at": "2024-09-21T21:02:30.232Z",
      "updated_at": "2024-09-21T21:02:30.232Z",
      "cooked": "<p>Awesome, thanks. I’ll try to find a way to determine the angle and scale automatically. And I’ll create the issue as well.</p>",
      "raw": "Awesome, thanks. I'll try to find a way to determine the angle and scale automatically. And I'll create the issue as well.",
      "reply_to_post_number": null,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 1,
      "reads": 79,
      "score": 65.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 409
    },
    {
      "id": 2240,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-22T13:40:58.182Z",
      "updated_at": "2024-09-22T13:40:58.182Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Oddball777\" data-post=\"3\" data-topic=\"536\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/o/F7602B/48.png\" class=\"avatar\"> Oddball777:</div>\n<blockquote>\n<p>And I’ll create the issue as well.</p>\n</blockquote>\n</aside>\n<p>Be sure to link it here (both ways is even better). :)</p>",
      "raw": "[quote=\"Oddball777, post:3, topic:536\"]\nAnd I’ll create the issue as well.\n[/quote]\n\nBe sure to link it here (both ways is even better). :)",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 2,
      "reads": 76,
      "score": 80.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2324,
      "post_number": 5,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2024-09-23T06:07:15.259Z",
      "updated_at": "2024-09-23T06:07:15.259Z",
      "cooked": "<p>A relevant issue would be this one probably <a href=\"https://github.com/typst/typst/issues/1532\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Add arrow caps for stroke · Issue #1532 · typst/typst · GitHub</a>.</p>\n<p>Ideally, you would write</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">$\n  cancel(a x + b, stroke: #(cap: \"arrow\"))\n$\n</code></pre>\n<p>or another syntax that is less verbose and more discoverable.</p>",
      "raw": "A relevant issue would be this one probably https://github.com/typst/typst/issues/1532.\n\nIdeally, you would write\n```typ\n$\n  cancel(a x + b, stroke: #(cap: \"arrow\"))\n$\n```\nor another syntax that is less verbose and more discoverable.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 2,
      "reads": 70,
      "score": 59.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    },
    {
      "id": 2409,
      "post_number": 6,
      "username": "Oddball777",
      "name": "Gustave Coulombe",
      "created_at": "2024-09-23T21:33:50.167Z",
      "updated_at": "2024-09-23T21:41:19.982Z",
      "cooked": "<p>There’s <a href=\"https://github.com/typst/typst/issues/3292\" rel=\"noopener nofollow ugc\">another issue</a> that was already created for this and was closed as not planned. The developers think it would be better as a package.</p>",
      "raw": "There's [another issue](https://github.com/typst/typst/issues/3292) that was already created for this and was closed as not planned. The developers think it would be better as a package.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 63,
      "score": 177.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 409
    },
    {
      "id": 2410,
      "post_number": 7,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-09-23T22:06:04.181Z",
      "updated_at": "2024-09-23T22:06:04.181Z",
      "cooked": "<p>I had a feeling that this is more of a package-level functionality. And since it’s a part of a package in LaTeX, this further proves the point. You can make a package yourself at any point if you want, otherwise we’ll have to wait for someone else to do it.</p>",
      "raw": "I had a feeling that this is more of a package-level functionality. And since it's a part of a package in LaTeX, this further proves the point. You can make a package yourself at any point if you want, otherwise we'll have to wait for someone else to do it.",
      "reply_to_post_number": 6,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 61,
      "score": 12.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 2411,
      "post_number": 8,
      "username": "afiaith",
      "name": "Maja Abramski-Kronenberg",
      "created_at": "2024-09-23T22:11:58.033Z",
      "updated_at": "2024-09-23T22:11:58.033Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Oddball777\" data-post=\"3\" data-topic=\"536\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/o/F7602B/48.png\" class=\"avatar\"> Oddball777:</div>\n<blockquote>\n<p>I’ll try to find a way to determine the angle and scale automatically.</p>\n</blockquote>\n</aside>\n<p>Here is the Rust code for the <code>cancel()</code> function, in case there’s something helpful there:</p><aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/typst/typst/blob/8c813cb7a266225d0a4a3a2e62f10f6f5f774b7a/crates/typst/src/math/cancel.rs\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/blob/8c813cb7a266225d0a4a3a2e62f10f6f5f774b7a/crates/typst/src/math/cancel.rs\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/typst/typst/blob/8c813cb7a266225d0a4a3a2e62f10f6f5f774b7a/crates/typst/src/math/cancel.rs\" target=\"_blank\" rel=\"noopener nofollow ugc\">typst/typst/blob/8c813cb7a266225d0a4a3a2e62f10f6f5f774b7a/crates/typst/src/math/cancel.rs</a></h4>\n\n\n      <pre><code class=\"lang-rs\">use comemo::Track;\n\nuse crate::diag::{At, SourceResult};\nuse crate::foundations::{\n    cast, elem, Content, Context, Func, Packed, Resolve, Smart, StyleChain,\n};\nuse crate::layout::{\n    Abs, Angle, Frame, FrameItem, Length, Point, Ratio, Rel, Size, Transform,\n};\nuse crate::math::{FrameFragment, LayoutMath, MathContext};\nuse crate::syntax::Span;\nuse crate::text::TextElem;\nuse crate::visualize::{FixedStroke, Geometry, Stroke};\n\n/// Displays a diagonal line over a part of an equation.\n///\n/// This is commonly used to show the elimination of a term.\n///\n/// # Example\n/// ```example\n</code></pre>\n\n\n\n  This file has been truncated. <a href=\"https://github.com/typst/typst/blob/8c813cb7a266225d0a4a3a2e62f10f6f5f774b7a/crates/typst/src/math/cancel.rs\" target=\"_blank\" rel=\"noopener nofollow ugc\">show original</a>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "[quote=\"Oddball777, post:3, topic:536, full:true\"]\nI’ll try to find a way to determine the angle and scale automatically.\n[/quote]\n\nHere is the Rust code for the `cancel()` function, in case there’s something helpful there:\nhttps://github.com/typst/typst/blob/8c813cb7a266225d0a4a3a2e62f10f6f5f774b7a/crates/typst/src/math/cancel.rs",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 55,
      "score": 51.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 91
    },
    {
      "id": 3416,
      "post_number": 9,
      "username": "Andrew",
      "name": "",
      "created_at": "2024-10-04T18:11:19.726Z",
      "updated_at": "2024-10-04T18:11:19.726Z",
      "cooked": "<p>Now that Typst v0.12.0-rc1 is out, you can also use <a href=\"https://typst.app/docs/reference/math/stretch/\"><code>stretch</code></a> for long arrow:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">  // let arrow = math.stretch(sym.arrow.tr, size: 230%)\n  let arrow = rotate(-55deg, math.stretch(sym.arrow.r, size: 230%))\n</code></pre>\n<p>I also realized that if you are OK with 45 degree arrows, you can remove the <code>rotate()</code> call and use a specific arrow glyph instead: <a href=\"https://typst.app/docs/reference/symbols/sym/?query=arrow\">https://typst.app/docs/reference/symbols/sym/?query=arrow</a>.</p>",
      "raw": "Now that Typst v0.12.0-rc1 is out, you can also use [`stretch`](https://typst.app/docs/reference/math/stretch/) for long arrow:\n\n```typ\n  // let arrow = math.stretch(sym.arrow.tr, size: 230%)\n  let arrow = rotate(-55deg, math.stretch(sym.arrow.r, size: 230%))\n```\n\nI also realized that if you are OK with 45 degree arrows, you can remove the `rotate()` call and use a specific arrow glyph instead: <https://typst.app/docs/reference/symbols/sym/?query=arrow>.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 48,
      "score": 84.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 12345,
      "post_number": 10,
      "username": "mndtr",
      "name": "mndtr",
      "created_at": "2025-05-12T14:37:45.317Z",
      "updated_at": "2025-05-12T14:39:20.893Z",
      "cooked": "<p>Looks amazing! But manually adjusting parameters is a little bit clunky. Maybe some day someone will do a package for it… But this problem seems to be not so easy since every formula with <code>cancelto</code> needs to look nice and with no overlapping of other parts of an equation by an arrow and <code>to</code> part in addition to having enough space for that <code>to</code> part (and how we know people use this arrow in many ways and equations look different with various shapes.</p>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/5/54da6eb151621937e1c8b77e9dc64cc93912c4a7.png\" alt=\"изображение\" data-base62-sha1=\"c6E5ZX1BXMtAficnOk1z9hSsHR5\" width=\"451\" height=\"121\"></p>",
      "raw": "Looks amazing! But manually adjusting parameters is a little bit clunky. Maybe some day someone will do a package for it... But this problem seems to be not so easy since every formula with `cancelto` needs to look nice and with no overlapping of other parts of an equation by an arrow and `to` part in addition to having enough space for that `to` part (and how we know people use this arrow in many ways and equations look different with various shapes.\n\n![изображение|451x121](upload://c6E5ZX1BXMtAficnOk1z9hSsHR5.png)",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 28,
      "score": 20.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1586
    }
  ],
  "scraped_at": "2025-06-10T09:58:30.555196"
}