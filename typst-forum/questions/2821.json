{
  "topic_metadata": {
    "id": 2821,
    "title": "How to get the current heading numbering format?",
    "slug": "how-to-get-the-current-heading-numbering-format",
    "posts_count": 10,
    "created_at": "2025-02-14T11:21:10.690Z",
    "last_posted_at": "2025-02-14T13:27:51.625Z",
    "views": 256,
    "like_count": 3,
    "reply_count": 6,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "aarnent",
    "tags": [
      "numbering"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 474
  },
  "posts": [
    {
      "id": 8652,
      "post_number": 1,
      "username": "talb",
      "name": "talb",
      "created_at": "2025-02-14T11:21:11.037Z",
      "updated_at": "2025-02-14T11:21:11.037Z",
      "cooked": "<p>I know that you can get the current page numbering format using <code>#context here().page-numbering()</code>.</p>\n<p>However, I would like the same thing, but for headings, i.e., the last format that was passed to <code>#set heading(numbering: ...)</code>.</p>\n<p>Is there a simple solution that does not involve storing this format in a <code>state()</code>?</p>",
      "raw": "I know that you can get the current page numbering format using `#context here().page-numbering()`.\n\nHowever, I would like the same thing, but for headings, i.e., the last format that was passed to `#set heading(numbering: ...)`.\n\nIs there a simple solution that does not involve storing this format in a `state()`?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 41,
      "score": 1193.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 8654,
      "post_number": 2,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-14T11:43:26.544Z",
      "updated_at": "2025-02-14T11:43:26.544Z",
      "cooked": "<p>Does <code>#context heading.numbering</code> work?</p>",
      "raw": "Does `#context heading.numbering` work?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 41,
      "score": 33.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 8655,
      "post_number": 3,
      "username": "talb",
      "name": "talb",
      "created_at": "2025-02-14T11:54:02.399Z",
      "updated_at": "2025-02-14T11:54:02.399Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"aarnent\" data-post=\"2\" data-topic=\"2821\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/a/0A3649/48.png\" class=\"avatar\"> aarnent:</div>\n<blockquote>\n<p><a class=\"hashtag-cooked\" href=\"/tag/context\" data-type=\"tag\" data-slug=\"context\" data-id=\"61\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>context</span></a> heading.numbering</p>\n</blockquote>\n</aside>\n<p>Yes it works, and apparently <code>#context page.numbering</code> also works! Thank you!</p>\n<p>But then what is the point of the <code>#context here().page-numbering()</code> function?</p>",
      "raw": "[quote=\"aarnent, post:2, topic:2821\"]\n#context heading.numbering\n[/quote]\n\nYes it works, and apparently `#context page.numbering` also works! Thank you!\n\nBut then what is the point of the `#context here().page-numbering()` function?",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 41,
      "score": 18.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 8656,
      "post_number": 4,
      "username": "aarnent",
      "name": "",
      "created_at": "2025-02-14T12:01:02.642Z",
      "updated_at": "2025-02-14T12:01:02.642Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"talb\" data-post=\"3\" data-topic=\"2821\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/talb/48/463_2.png\" class=\"avatar\"> talb:</div>\n<blockquote>\n<p>But then what is the point of the <code>#context here().page-numbering()</code> function?</p>\n</blockquote>\n</aside>\n<p>I’ll be honest, I have no idea. Maybe it’s something that has been kept as a feature for sake of backwards compatibility, but that’s just a guess. Maybe someone else more knowledgable can chime in.</p>",
      "raw": "[quote=\"talb, post:3, topic:2821\"]\nBut then what is the point of the `#context here().page-numbering()` function?\n[/quote]\n\nI'll be honest, I have no idea. Maybe it's something that has been kept as a feature for sake of backwards compatibility, but that's just a guess. Maybe someone else more knowledgable can chime in.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 0,
      "reads": 40,
      "score": 12.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 501
    },
    {
      "id": 8660,
      "post_number": 5,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-14T12:44:20.027Z",
      "updated_at": "2025-02-14T12:44:20.027Z",
      "cooked": "<p><code>page-numbering()</code> is a method on the location type, maybe it’s redundant for the <code>here()</code> location but as the doc says:</p>\n<blockquote>\n<p>This is useful if you are building custom indices or outlines.</p>\n</blockquote>\n<p>If you’re making an index or outline, you need to use the page numbering of the location of the target, while <code>context page.numbering</code> would give the numbering of the pages where the index is shown.</p>",
      "raw": "`page-numbering()` is a method on the location type, maybe it's redundant for the `here()` location but as the doc says:\n\n> This is useful if you are building custom indices or outlines.\n\nIf you're making an index or outline, you need to use the page numbering of the location of the target, while `context page.numbering` would give the numbering of the pages where the index is shown.",
      "reply_to_post_number": 4,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 38,
      "score": 27.4,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8661,
      "post_number": 6,
      "username": "talb",
      "name": "talb",
      "created_at": "2025-02-14T12:46:12.725Z",
      "updated_at": "2025-02-14T12:46:12.725Z",
      "cooked": "<p>It makes sense, thank you!</p>",
      "raw": "It makes sense, thank you!",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 21.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 8663,
      "post_number": 7,
      "username": "talb",
      "name": "talb",
      "created_at": "2025-02-14T12:50:03.850Z",
      "updated_at": "2025-02-14T12:50:03.850Z",
      "cooked": "<p>But wouldn’t it also be interesting to access the heading numbering from a location? If you want to recreate an outline() for instance, you want to access the numbering of the heading in the outline, not the current numbering.</p>\n<p>What I want to ask is, are there some use cases where we need a <code>location.heading-numbering()</code> function?</p>",
      "raw": "But wouldn't it also be interesting to access the heading numbering from a location? If you want to recreate an outline() for instance, you want to access the numbering of the heading in the outline, not the current numbering.\n\nWhat I want to ask is, are there some use cases where we need a `location.heading-numbering()` function?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 16.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 8664,
      "post_number": 8,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-14T12:54:24.461Z",
      "updated_at": "2025-02-14T12:58:29.159Z",
      "cooked": "<p>When you get the headings to build e.g. a special outline, for example with <code>context query(heading)</code>, you get a list of <code>heading</code> elements and you can simply find their numbering with <code>elem.numbering</code>:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">= A\n\n#set heading(numbering: \"1.\")\n\n= B\n\n#context query(heading).map(elem =&gt; elem.numbering)\n</code></pre>\n<p>Here the last line will return <code>(none, \"1.\")</code>.</p>\n<p>Now you may ask: what if the index must show the heading number of the section where each word is found? You can get the heading counter with <code>counter(heading).at(location)</code> but indeed I’m not sure how you would get the correct numbering. Maybe with <code>query(heading).before(location).last()</code>…</p>",
      "raw": "When you get the headings to build e.g. a special outline, for example with `context query(heading)`, you get a list of `heading` elements and you can simply find their numbering with `elem.numbering`:\n\n```typ\n= A\n\n#set heading(numbering: \"1.\")\n\n= B\n\n#context query(heading).map(elem => elem.numbering)\n```\n\nHere the last line will return `(none, \"1.\")`.\n\nNow you may ask: what if the index must show the heading number of the section where each word is found? You can get the heading counter with `counter(heading).at(location)` but indeed I'm not sure how you would get the correct numbering. Maybe with `query(heading).before(location).last()`...",
      "reply_to_post_number": 7,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 11.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 8665,
      "post_number": 9,
      "username": "talb",
      "name": "talb",
      "created_at": "2025-02-14T13:21:31.188Z",
      "updated_at": "2025-02-14T13:21:31.188Z",
      "cooked": "<p>And you can’t do the same thing with pages because <code>page</code> is not locatable, right?</p>",
      "raw": "And you can't do the same thing with pages because `page` is not locatable, right?",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 10.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 341
    },
    {
      "id": 8666,
      "post_number": 10,
      "username": "sijo",
      "name": "",
      "created_at": "2025-02-14T13:27:51.625Z",
      "updated_at": "2025-02-14T13:27:51.625Z",
      "cooked": "<p>Yes, and also because you’re not working with pages anyway, but with things that have a location on a page.</p>\n<p>I guess Typst could have done this a bit differently, allowing you to get a page element for each word and then get the numbering from that page, but that’s not how it works (pages are not elements that you can inspect).</p>",
      "raw": "Yes, and also because you're not working with pages anyway, but with things that have a location on a page.\n\nI guess Typst could have done this a bit differently, allowing you to get a page element for each word and then get the numbering from that page, but that's not how it works (pages are not elements that you can inspect).",
      "reply_to_post_number": 9,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 5.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    }
  ],
  "scraped_at": "2025-06-10T09:51:38.469229"
}