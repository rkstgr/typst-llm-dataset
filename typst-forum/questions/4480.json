{
  "topic_metadata": {
    "id": 4480,
    "title": "How to Add line numbers before every line in a block?",
    "slug": "how-to-add-line-numbers-before-every-line-in-a-block",
    "posts_count": 4,
    "created_at": "2025-06-05T13:32:27.590Z",
    "last_posted_at": "2025-06-06T06:21:38.662Z",
    "views": 50,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Andrew",
    "tags": [],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 307
  },
  "posts": [
    {
      "id": 13757,
      "post_number": 1,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-06-05T13:32:27.656Z",
      "updated_at": "2025-06-05T13:33:17.314Z",
      "cooked": "<p>I have the following Typst code:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">  #block(\n  fill: aqua,\n  inset: 8pt,\n  radius: 4pt,\n  width: 100%,\n  [\n    #lorem(150)\n  ],\n)\n</code></pre>\n<p>I would like to automatically add a line number before every line which is generated by <span class=\"hashtag-raw\">#lorem</span>(150) . I also need enough space (around one tab) between the line number and the line.<br>\nThank you.</p>",
      "raw": "I have the following Typst code:\n```typ\n  #block(\n  fill: aqua,\n  inset: 8pt,\n  radius: 4pt,\n  width: 100%,\n  [\n    #lorem(150)\n  ],\n)\n```\nI would like to automatically add a line number before every line which is generated by #lorem(150) . I also need enough space (around one tab) between the line number and the line.\nThank you.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 4.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    },
    {
      "id": 13794,
      "post_number": 2,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-06-05T19:51:32.781Z",
      "updated_at": "2025-06-05T19:52:53.826Z",
      "cooked": "<p>The only one I know of is <a href=\"https://typst.app/docs/reference/model/par/#definitions-line\"><code>par.line</code></a>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#block(fill: aqua, inset: 8pt, radius: 4pt, width: 100%)[\n  #set par.line(numbering: \"1.\")\n  #lorem(150)\n]\n\na\\u{9}a\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/3/347e2bfa505b688685b547ab98c9f4ee08455f8a.png\" data-download-href=\"https://forum.typst.app/uploads/default/347e2bfa505b688685b547ab98c9f4ee08455f8a\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/original/2X/3/347e2bfa505b688685b547ab98c9f4ee08455f8a.png\" alt=\"image\" data-base62-sha1=\"7un9jEfpQlFJFFvyyyrf32OBvS2\" width=\"624\" height=\"272\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">624×272 64.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Tab character doesn’t have a defined width. If anything, it’s a control character that is unprintable, same goes to all <a href=\"https://www.ascii-code.com/\">first 32 characters</a>.</p>",
      "raw": "The only one I know of is [`par.line`](https://typst.app/docs/reference/model/par/#definitions-line).\n\n```typ\n#block(fill: aqua, inset: 8pt, radius: 4pt, width: 100%)[\n  #set par.line(numbering: \"1.\")\n  #lorem(150)\n]\n\na\\u{9}a\n```\n\n![image|624x272](upload://7un9jEfpQlFJFFvyyyrf32OBvS2.png)\n\nTab character doesn't have a defined width. If anything, it's a control character that is unprintable, same goes to all [first 32 characters](https://www.ascii-code.com/).",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 26,
      "score": 4.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 13795,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-06-05T22:15:10.553Z",
      "updated_at": "2025-06-05T22:15:10.553Z",
      "cooked": "<p>Using my hack I implemented last month for filling N lines of space regardless of text, here it is:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let color-box(\n  body,\n  fill: aqua,\n  inset: 8pt,\n  radius: 4pt,\n  width: 100%,\n  body-indent: 1.5em,\n  dx: 0pt,\n  numbering: \"1\",\n) = {\n  set par.line(numbering: numbering)\n  show: block.with(fill: fill, inset: inset, radius: radius, width: width)\n  body = pad(left: body-indent, body)\n  let num(n) = if numbering != none { std.numbering(numbering, n) }\n  layout(size =&gt; {\n    let leading = par.leading.to-absolute()\n    let one = measure([a], ..size).height + leading\n    let height = measure(body, ..size).height + leading\n    let line-count = int(height / one + 0.1)\n    let line-numbers = range(1, line-count + 1).map(num)\n    place(dx: dx, grid(align: right, gutter: leading, ..line-numbers))\n    body + parbreak()\n  })\n}\n\n#set par(justify: true)\n\n#color-box(numbering: \"1.\", body-indent: 1.5em, dx: -0.3em)[\n  #lorem(150)\n]\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/d/dd30cf9cc026c3a98d93feec17f50af995ed9b68.png\" data-download-href=\"https://forum.typst.app/uploads/default/dd30cf9cc026c3a98d93feec17f50af995ed9b68\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/original/2X/d/dd30cf9cc026c3a98d93feec17f50af995ed9b68.png\" alt=\"image\" data-base62-sha1=\"vyK64NKBr5xnhlXm4iFGvYtW3xu\" width=\"616\" height=\"240\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">616×240 61.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>So the only tricky part is counting the number of lines, which is always very close to an integer, sometimes is exactly an integer, depending on float division.</p>",
      "raw": "Using my hack I implemented last month for filling N lines of space regardless of text, here it is:\n\n```typ\n#let color-box(\n  body,\n  fill: aqua,\n  inset: 8pt,\n  radius: 4pt,\n  width: 100%,\n  body-indent: 1.5em,\n  dx: 0pt,\n  numbering: \"1\",\n) = {\n  set par.line(numbering: numbering)\n  show: block.with(fill: fill, inset: inset, radius: radius, width: width)\n  body = pad(left: body-indent, body)\n  let num(n) = if numbering != none { std.numbering(numbering, n) }\n  layout(size => {\n    let leading = par.leading.to-absolute()\n    let one = measure([a], ..size).height + leading\n    let height = measure(body, ..size).height + leading\n    let line-count = int(height / one + 0.1)\n    let line-numbers = range(1, line-count + 1).map(num)\n    place(dx: dx, grid(align: right, gutter: leading, ..line-numbers))\n    body + parbreak()\n  })\n}\n\n#set par(justify: true)\n\n#color-box(numbering: \"1.\", body-indent: 1.5em, dx: -0.3em)[\n  #lorem(150)\n]\n```\n\n![image|616x240](upload://vyK64NKBr5xnhlXm4iFGvYtW3xu.png)\n\nSo the only tricky part is counting the number of lines, which is always very close to an integer, sometimes is exactly an integer, depending on float division.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 22,
      "score": 34.0,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 13808,
      "post_number": 4,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-06-06T06:21:38.662Z",
      "updated_at": "2025-06-06T06:21:38.662Z",
      "cooked": "<p>Thank you Andrew for your support.</p>",
      "raw": "Thank you Andrew for your support.",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 20,
      "score": 18.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    }
  ],
  "scraped_at": "2025-06-10T09:46:44.274542"
}