{
  "topic_metadata": {
    "id": 3210,
    "title": "How to access the revisions variable in pandoc template?",
    "slug": "how-to-access-the-revisions-variable-in-pandoc-template",
    "posts_count": 4,
    "created_at": "2025-03-12T04:52:39.611Z",
    "last_posted_at": "2025-03-13T08:09:50.821Z",
    "views": 78,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "irontiga",
    "tags": [
      "pandoc"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 518
  },
  "posts": [
    {
      "id": 9679,
      "post_number": 1,
      "username": "irontiga",
      "name": "irontiga",
      "created_at": "2025-03-12T04:52:39.706Z",
      "updated_at": "2025-03-13T08:09:01.986Z",
      "cooked": "<p>Hi! Working with Pandoc to convert markdown to pdf via typst. I’m trying to access the first item in an array that’s pulled in from a markdown file.</p>\n<p>In my MD file i have</p>\n<pre data-code-wrap=\"markdown\"><code class=\"lang-markdown\">---\ntitle: My Title\nrevisions:\n    - action: Prepared\n      author: Joe\n      date: 10.03.2025\n    - action: Dave\n      author: name 1\n      date: 12.03.2025\n---\n</code></pre>\n<p>Then in my typst template i can do the following to create a table. This works perfectly.</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#table(\n  columns: (1fr, auto, auto),\n  inset: 10pt,\n  align: horizon,\n  table.header(\n    [*Date*], [*Action*], [*Name*],\n  ),\n  $for(revisions)$\n[$revisions.date$],\n[$revisions.action$],\n[$revisions.author$],\n$endfor$\n)\n</code></pre>\n<p>My trouble is that i’m trying to access only the first dict in the array, using something like <code>revisions.at(0)</code> - however I have had no luck whatsoever with this.</p>\n<pre><code class=\"lang-auto\">revisions.at(0).date\n</code></pre>\n<p>results in</p>\n<pre><code class=\"lang-auto\">error: unknown variable: revisions\n    ┌─ toPdfViaTempFile18345-0.typ:141:1\n    │\n141 │ #revisions.at(0).date\n</code></pre>\n<p>Whilst If I try to use the <code>$revision.at(0).date$</code> I get weird syntax errors. I’m rather lost! How would I access the first item in this array? Thank you guys very much for any help on this!</p>",
      "raw": "Hi! Working with Pandoc to convert markdown to pdf via typst. I'm trying to access the first item in an array that's pulled in from a markdown file.\n\nIn my MD file i have\n```markdown\n---\ntitle: My Title\nrevisions:\n    - action: Prepared\n      author: Joe\n      date: 10.03.2025\n    - action: Dave\n      author: name 1\n      date: 12.03.2025\n---\n```\n\nThen in my typst template i can do the following to create a table. This works perfectly.\n```typst\n#table(\n  columns: (1fr, auto, auto),\n  inset: 10pt,\n  align: horizon,\n  table.header(\n    [*Date*], [*Action*], [*Name*],\n  ),\n  $for(revisions)$\n[$revisions.date$],\n[$revisions.action$],\n[$revisions.author$],\n$endfor$\n)\n```\n\nMy trouble is that i'm trying to access only the first dict in the array, using something like `revisions.at(0)` - however I have had no luck whatsoever with this.\n```\nrevisions.at(0).date\n```\nresults in\n```\nerror: unknown variable: revisions\n    ┌─ toPdfViaTempFile18345-0.typ:141:1\n    │\n141 │ #revisions.at(0).date\n```\nWhilst If I try to use the `$revision.at(0).date$` I get weird syntax errors. I'm rather lost! How would I access the first item in this array? Thank you guys very much for any help on this!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 29,
      "score": 150.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1337
    },
    {
      "id": 9719,
      "post_number": 2,
      "username": "sitandr",
      "name": "sitandr",
      "created_at": "2025-03-12T23:26:49.196Z",
      "updated_at": "2025-03-12T23:26:49.196Z",
      "cooked": "<p>Ok, as I understand, it’s about how pandoc works, not Typst.</p>\n<p>The <code>revisions</code> you use here isn’t a variable in your generated Typst document. It’s an internal thing of pandoc that is used for templating. To see how to access “first” element here, see Pandoc’s guide on templating, I guess.</p>\n<p>Of course, you can create such a variable inside Typst document, with things like (not sure at all about syntax, consult pandoc docs, just to show the general idea):</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let revs = (\n    $for(revisions)$\n    (\n    $for(revisions.item)\n    $revisions.item.key$: $revisions.item.value$\n    $endfor$\n    )\n    $endfor$\n)\n</code></pre>\n<p>And use Typst code to work with <code>revs</code> as intended.</p>\n<p>Btw, I would strongly recommend to avoid using Markdown if possible and just write everything with Typst Markdown, if possible. That would be much simpler and comfortable to work with. There is even a package to render Markdown, the one you are used to, just with Typst scripting (<code>cmarker</code>).</p>\n<p>Feel free to ask more questions. Good luck!</p>",
      "raw": "Ok, as I understand, it's about how pandoc works, not Typst.\n\nThe `revisions` you use here isn't a variable in your generated Typst document. It's an internal thing of pandoc that is used for templating. To see how to access \"first\" element here, see Pandoc's guide on templating, I guess.\n\nOf course, you can create such a variable inside Typst document, with things like (not sure at all about syntax, consult pandoc docs, just to show the general idea):\n\n```typ\n#let revs = (\n    $for(revisions)$\n    (\n    $for(revisions.item)\n    $revisions.item.key$: $revisions.item.value$\n    $endfor$\n    )\n    $endfor$\n)\n```\n\nAnd use Typst code to work with `revs` as intended.\n\nBtw, I would strongly recommend to avoid using Markdown if possible and just write everything with Typst Markdown, if possible. That would be much simpler and comfortable to work with. There is even a package to render Markdown, the one you are used to, just with Typst scripting (`cmarker`).\n\nFeel free to ask more questions. Good luck!",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 15,
      "score": 8.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 19
    },
    {
      "id": 9722,
      "post_number": 3,
      "username": "irontiga",
      "name": "irontiga",
      "created_at": "2025-03-13T01:20:35.444Z",
      "updated_at": "2025-03-13T01:20:35.444Z",
      "cooked": "<p>Hi sitandr!</p>\n<p>Thankyou so much! That makes perfect sense - the $$ made me think it was typst but yes, it is indeed pandoc templating prior to being run through typst. The following ended up working for me:</p>\n<pre><code class=\"lang-auto\">$for(revisions/first)$\n    $it.author$ - $it.date$\n$endfor$\n</code></pre>\n<p>as per <a href=\"https://pandoc.org/chunkedhtml-demo/6.1-template-syntax.html\" rel=\"noopener nofollow ugc\">https://pandoc.org/chunkedhtml-demo/6.1-template-syntax.html</a></p>\n<p>Cheers for pointing me in the right direction! I will have a look at what you mentioned with regards to cmarker- although the main goal here is to have the very least friction possible to creating documents, hence going for markdown.</p>\n<p>Regards</p>",
      "raw": "Hi sitandr!\n\nThankyou so much! That makes perfect sense - the $$ made me think it was typst but yes, it is indeed pandoc templating prior to being run through typst. The following ended up working for me:\n```\n$for(revisions/first)$\n    $it.author$ - $it.date$\n$endfor$\n```\nas per [https://pandoc.org/chunkedhtml-demo/6.1-template-syntax.html](https://pandoc.org/chunkedhtml-demo/6.1-template-syntax.html)\n\nCheers for pointing me in the right direction! I will have a look at what you mentioned with regards to cmarker- although the main goal here is to have the very least friction possible to creating documents, hence going for markdown.\n\nRegards",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 13,
      "score": 2.6,
      "accepted_answer": true,
      "trust_level": 0,
      "user_id": 1337
    },
    {
      "id": 9742,
      "post_number": 4,
      "username": "quachpas",
      "name": "Pascal Quach",
      "created_at": "2025-03-13T08:09:50.821Z",
      "updated_at": "2025-03-13T08:09:50.821Z",
      "cooked": "<p>Hello <a class=\"mention\" href=\"/u/irontiga\">@irontiga</a>, I’ve renamed your topic to “How to access the revisions variable in pandoc template?”, don’t hesitate to read through <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a>.</p>\n<aside class=\"quote no-group\" data-username=\"reknih\" data-post=\"1\" data-topic=\"11\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/reknih/48/3_2.png\" class=\"avatar\"><a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11/1\">How to post in the Questions category</a></div>\n<blockquote>\n<p><strong>Good titles are questions you would ask your friend about Typst.</strong></p>\n</blockquote>\n</aside>",
      "raw": "Hello @irontiga, I've renamed your topic to \"How to access the revisions variable in pandoc template?\", don't hesitate to read through https://forum.typst.app/t/how-to-post-in-the-questions-category/11.\n\n[quote=\"reknih, post:1, topic:11\"]\n**Good titles are questions you would ask your friend about Typst.**\n[/quote]",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 13,
      "score": 2.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 258
    }
  ],
  "scraped_at": "2025-06-10T09:50:26.099864"
}