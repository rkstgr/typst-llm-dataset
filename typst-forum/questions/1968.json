{
  "topic_metadata": {
    "id": 1968,
    "title": "How to check if content contains multiple paragraphs?",
    "slug": "how-to-check-if-content-contains-multiple-paragraphs",
    "posts_count": 4,
    "created_at": "2024-12-03T14:24:34.325Z",
    "last_posted_at": "2024-12-04T15:01:13.738Z",
    "views": 123,
    "like_count": 4,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "miles-1",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 254
  },
  "posts": [
    {
      "id": 6285,
      "post_number": 1,
      "username": "Florent_Becker",
      "name": "Florent Becker",
      "created_at": "2024-12-03T14:24:34.456Z",
      "updated_at": "2024-12-07T18:13:07.187Z",
      "cooked": "<p>Hi, I have a function <code>answer(it)</code> which takes some content as its parameter. It should typeset its content with the leading text “Answer”. I’d like to be able to check whether <code>it</code> contains one or several paragraphs, so as to put the header on its own line if there are several paragraphs, and within the paragraph if there is only one. Essentially, I’d like to do this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">if is-single-paragraph(it) {[ *Answer:* it]\n} else {\n[*Answer*\n\n it]\n}\n</code></pre>\n<p>How can I write <code>is-single-paragraph</code>? Alternatively, is it possible to check whether the first variants fits on one physical line and replace it with the second otherwise?</p>",
      "raw": "Hi, I have a function `answer(it)` which takes some content as its parameter. It should typeset its content with the leading text \"Answer\". I’d like to be able to check whether `it` contains one or several paragraphs, so as to put the header on its own line if there are several paragraphs, and within the paragraph if there is only one. Essentially, I’d like to do this:\n```typst\nif is-single-paragraph(it) {[ *Answer:* it]\n} else {\n[*Answer*\n\n it]\n}\n```\n\nHow can I write `is-single-paragraph`? Alternatively, is it possible to check whether the first variants fits on one physical line and replace it with the second otherwise?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 377.4,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 885
    },
    {
      "id": 6291,
      "post_number": 2,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-12-03T22:04:20.422Z",
      "updated_at": "2024-12-04T15:01:28.116Z",
      "cooked": "<p>Here’s a function that can check this:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let is-multiple-paragraph(txt) = {\n  return \"children\" in txt.fields() and parbreak() in txt.children\n}\n</code></pre>\n<p>If you’re interested in how I figured this out, I first used <code>repr[*Answer* it]</code> and another one with a paragraph break to see what was there. Then I used <code>[*Answer* it].fields()</code> to see what attributes could be accessed. I saw that the <code>children</code> attribute included <code>parbreak()</code> if there was a paragraph break.</p>\n<p>Also, quick tip, you don’t need curly braces <code>{}</code> around markdown brackets <code>[]</code> in an <code>if</code> statement if that’s what you’re returning <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Here's a function that can check this:\n\n```typst\n#let is-multiple-paragraph(txt) = {\n  return \"children\" in txt.fields() and parbreak() in txt.children\n}\n```\n\nIf you're interested in how I figured this out, I first used `repr[*Answer* it]` and another one with a paragraph break to see what was there. Then I used `[*Answer* it].fields()` to see what attributes could be accessed. I saw that the `children` attribute included `parbreak()` if there was a paragraph break.\n\nAlso, quick tip, you don't need curly braces `{}` around markdown brackets `[]` in an `if` statement if that's what you're returning :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 3,
      "reads": 35,
      "score": 57.0,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 177
    },
    {
      "id": 6317,
      "post_number": 3,
      "username": "gezepi",
      "name": "",
      "created_at": "2024-12-04T07:52:07.266Z",
      "updated_at": "2024-12-04T07:52:07.266Z",
      "cooked": "<p>The function works great in my quick testing, but the name doesn’t match the logic of it.  It should either be renamed to something like <code>is-multiple-paragraphs()</code>, or the output should be negated.</p>",
      "raw": "The function works great in my quick testing, but the name doesn't match the logic of it.  It should either be renamed to something like `is-multiple-paragraphs()`, or the output should be negated.",
      "reply_to_post_number": 2,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 30,
      "score": 26.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 326
    },
    {
      "id": 6328,
      "post_number": 4,
      "username": "miles-1",
      "name": "miles",
      "created_at": "2024-12-04T15:01:13.738Z",
      "updated_at": "2024-12-04T15:01:13.738Z",
      "cooked": "<p>duh, sorry. Will edit my answer!</p>",
      "raw": "duh, sorry. Will edit my answer!",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 5.0,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 177
    }
  ],
  "scraped_at": "2025-06-10T09:54:07.230123"
}