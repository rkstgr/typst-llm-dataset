{
  "topic_metadata": {
    "id": 3667,
    "title": "How to hide an outline if there are no entries?",
    "slug": "how-to-hide-an-outline-if-there-are-no-entries",
    "posts_count": 4,
    "created_at": "2025-04-15T17:40:05.880Z",
    "last_posted_at": "2025-04-15T19:01:15.616Z",
    "views": 55,
    "like_count": 4,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "janekfleper",
    "tags": [
      "layout"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 401
  },
  "posts": [
    {
      "id": 11123,
      "post_number": 1,
      "username": "Aaron",
      "name": "Aaron",
      "created_at": "2025-04-15T17:40:06.024Z",
      "updated_at": "2025-04-15T18:02:49.483Z",
      "cooked": "<p>How can I hide and outline if it has no entries to display? I believe I should be able to use <code>#if</code> and <code>#counter</code> to make this work (and maybe <code>#context</code>), but I have not wrapped my head around how counters work.</p>\n<p>I have a template I am using to make documents. The template includes the creation of outlines.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">  #outline(\n    title: [Table of Contents],\n  )\n\n  #outline(\n    title: [List of Figures],\n    target: figure.where(kind: image),\n  )\n\n  #outline(\n    title: [List of Tables],\n    target: figure.where(kind: table),\n  )\n</code></pre>\n<p>However, if the document does not use any figures or tables, the outline just prints a title with no entries. In this case, I would like the title to not show at all.</p>\n<pre><code class=\"lang-auto\">    TABLE OF CONTENTS\n1. XXXX\n2. XXXX\n\n    LIST OF FIGURES\n\n    LIST OF TABLES\n</code></pre>\n<p>I believe I should be able to do something like</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#if (context{counter(figure.where(kind: table)).final()} &gt; 0) [\n  #outline(\n    title: [List of Tables],\n    target: figure.where(kind: table),\n  )\n]\n</code></pre>\n<p>But I get this error:</p>\n<pre data-code-wrap=\"sh\"><code class=\"lang-sh\">$ typst compile main.typ \nerror: expected boolean, found content\n   ┌─ main.typ:12:4\n   │\n12 │ #if (context{counter(figure.where(kind: table)).final()} &gt; 0) [\n   │     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n<p>Thanks!</p>",
      "raw": "How can I hide and outline if it has no entries to display? I believe I should be able to use `#if` and `#counter` to make this work (and maybe `#context`), but I have not wrapped my head around how counters work.\n\nI have a template I am using to make documents. The template includes the creation of outlines.\n\n```typ\n  #outline(\n    title: [Table of Contents],\n  )\n\n  #outline(\n    title: [List of Figures],\n    target: figure.where(kind: image),\n  )\n\n  #outline(\n    title: [List of Tables],\n    target: figure.where(kind: table),\n  )\n```\n\nHowever, if the document does not use any figures or tables, the outline just prints a title with no entries. In this case, I would like the title to not show at all.\n\n```\n    TABLE OF CONTENTS\n1. XXXX\n2. XXXX\n\n    LIST OF FIGURES\n\n    LIST OF TABLES\n```\n\nI believe I should be able to do something like \n\n```typ\n#if (context{counter(figure.where(kind: table)).final()} > 0) [\n  #outline(\n    title: [List of Tables],\n    target: figure.where(kind: table),\n  )\n]\n```\n\nBut I get this error:\n```sh\n$ typst compile main.typ \nerror: expected boolean, found content\n   ┌─ main.typ:12:4\n   │\n12 │ #if (context{counter(figure.where(kind: table)).final()} > 0) [\n   │     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n```\n\nThanks!",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 139.6,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1398
    },
    {
      "id": 11124,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-04-15T17:56:38.489Z",
      "updated_at": "2025-04-15T18:01:49.849Z",
      "cooked": "<p>Your approach will work if you wrap everything in <code>context()</code>. Right now the context will return content (which it always does, see this <a href=\"https://forum.typst.app/t/why-is-the-value-i-receive-from-context-always-content/164\">post</a> if you want to learn more about the details), causing the error on compilation.</p>\n<p>Note that <a href=\"https://typst.app/docs/reference/introspection/counter/#definitions-final\"><code>counter.final()</code></a> always returns an array of integers. I therefore had to append <code>.at(0)</code> to get the first element from the array.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#context {\n  if counter(figure.where(kind: table)).final().at(0) &gt; 0 {\n    outline(\n      title: [List of Tables],\n      target: figure.where(kind: table),\n    )\n  }\n}\n</code></pre>\n<p>I would also ask you to move your post to the <a class=\"hashtag-cooked\" href=\"/c/questions/5\" data-type=\"category\" data-slug=\"questions\" data-id=\"5\"><span class=\"hashtag-icon-placeholder\"><svg class=\"fa d-icon d-icon-square-full svg-icon svg-node\"><use href=\"#square-full\"></use></svg></span><span>Questions</span></a> category. The title is already great. <img src=\"https://forum.typst.app/images/emoji/apple/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Your approach will work if you wrap everything in `context()`. Right now the context will return content (which it always does, see this [post](https://forum.typst.app/t/why-is-the-value-i-receive-from-context-always-content/164) if you want to learn more about the details), causing the error on compilation.\n\nNote that [`counter.final()`](https://typst.app/docs/reference/introspection/counter/#definitions-final) always returns an array of integers. I therefore had to append `.at(0)` to get the first element from the array.\n\n```typ\n#context {\n  if counter(figure.where(kind: table)).final().at(0) > 0 {\n    outline(\n      title: [List of Tables],\n      target: figure.where(kind: table),\n    )\n  }\n}\n```\n\nI would also ask you to move your post to the #questions category. The title is already great. :slight_smile:",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 22,
      "score": 14.4,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 11126,
      "post_number": 3,
      "username": "Aaron",
      "name": "Aaron",
      "created_at": "2025-04-15T18:08:31.918Z",
      "updated_at": "2025-04-15T18:08:31.918Z",
      "cooked": "<p>That worked great, thank you!</p>\n<p>I guess <code>#context</code> is what I really need to wrap my head around.</p>",
      "raw": "That worked great, thank you!\n\nI guess `#context` is what I really need to wrap my head around.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 3.8,
      "accepted_answer": false,
      "trust_level": 0,
      "user_id": 1398
    },
    {
      "id": 11128,
      "post_number": 4,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-04-15T19:01:15.616Z",
      "updated_at": "2025-04-15T19:01:15.616Z",
      "cooked": "<p>Another simple and more general solution would be to apply a show rule, which only allows the outline to show up when there are elements it could list:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline: it =&gt; if query(it.target) != () { it }\n</code></pre>\n<p>You then only have to write this once, and it works for all subsequent outlines, no matter if it targets headings, figures, tables, or something else.</p>",
      "raw": "Another simple and more general solution would be to apply a show rule, which only allows the outline to show up when there are elements it could list:\n\n```typ\n#show outline: it => if query(it.target) != () { it }\n```\n\nYou then only have to write this once, and it works for all subsequent outlines, no matter if it targets headings, figures, tables, or something else.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 4,
      "reads": 18,
      "score": 93.6,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    }
  ],
  "scraped_at": "2025-06-10T09:49:08.555888"
}