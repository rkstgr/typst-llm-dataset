{
  "topic_metadata": {
    "id": 3093,
    "title": "How to use different text in outline and actual heading?",
    "slug": "how-to-use-different-text-in-outline-and-actual-heading",
    "posts_count": 5,
    "created_at": "2025-03-03T21:26:23.310Z",
    "last_posted_at": "2025-03-04T01:46:00.315Z",
    "views": 158,
    "like_count": 4,
    "reply_count": 2,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 4,
    "accepted_answer_username": "PgBiel",
    "tags": [
      "scripting",
      "layout",
      "outline"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 472
  },
  "posts": [
    {
      "id": 9344,
      "post_number": 1,
      "username": "alex01",
      "name": "alex",
      "created_at": "2025-03-03T21:26:23.447Z",
      "updated_at": "2025-03-03T22:41:14.260Z",
      "cooked": "<p>I have a text which want to have the heading in capital letters but the outline entry should be ins mixted (Normal) letters.</p>\n<p>Thanks to <a class=\"mention\" href=\"/u/aarnent\">@aarnent</a> I have solved the first issue with the image <a href=\"https://forum.typst.app/t/add-image-to-heading-1-on-left-side/3085/3\" class=\"inline-onebox\">How to add image on the margin to the left of a level 1 heading? - #3 by alex01</a></p>\n<p>Now I have tried to understand and adopt the snipplet below but i’m to stupid to get it work.</p>\n<aside class=\"quote quote-modified\" data-post=\"3\" data-topic=\"2349\">\n  <div class=\"title\">\n    <div class=\"quote-controls\"></div>\n    <img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/flokl/48/28_2.png\" class=\"avatar\">\n    <a href=\"https://forum.typst.app/t/how-to-have-different-text-shown-in-figure-caption-and-in-outline/2349/3\">How to have different text shown in figure caption and in outline?</a> <a class=\"badge-category__wrapper \" href=\"/c/questions/5\"><span data-category-id=\"5\" style=\"--category-badge-color: #F7C000; --category-badge-text-color: #fdfdfd;\" data-drop-close=\"true\" class=\"badge-category \" title=\"Your questions about using Typst and the web app go in this category.\"><span class=\"badge-category__name\">Questions</span></span></a>\n  </div>\n  <blockquote>\n    As an alternative, you can fully customize the text that will be shown in the outline with the following code which is taken from the <a href=\"https://sitandr.github.io/typst-examples-book/book/snippets/chapters/outlines.html#long-and-short-captions-for-the-outline\" rel=\"noopener nofollow ugc\">Typst Examples Book</a>. \n#let in-outline = state(\"in-outline\", false)\n#show outline: it =&gt; {\n  in-outline.update(true)\n  it\n  in-outline.update(false)\n}\n\n#let flex-caption(long, short) = context if in-outline.get() { short } else { long }\n\n// And this is in the document.\n#outline(title: [Figures], target: figure)\n\n#figure(\n  rect(),\n  caption: flex-caption(\n    [This…\n  </blockquote>\n</aside>\n\n<p>The heading text is with <code>\\ | linebreack()</code> .</p>\n<p>My Ideas is to have something like the above, or maybe something simpler, which I don’t know.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">= [My Heading in\\ the Text,My headig in the outline]\n</code></pre>\n<p>I have tried to call <code>trim()</code> for <code>it</code> but that looks like impossible.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: it =&gt; link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n   // wrong!\n    str(it.body()).trim() + sym.space + box(width: 1fr, it.fill) + sym.space + sym.wj + it.page()\n  ),\n)\n</code></pre>",
      "raw": "I have a text which want to have the heading in capital letters but the outline entry should be ins mixted (Normal) letters.\n\nThanks to @aarnent I have solved the first issue with the image https://forum.typst.app/t/add-image-to-heading-1-on-left-side/3085/3?u=alex01\n\nNow I have tried to understand and adopt the snipplet below but i'm to stupid to get it work.\n\nhttps://forum.typst.app/t/how-to-have-different-text-shown-in-figure-caption-and-in-outline/2349/3?u=alex01\n\nThe heading text is with `\\ | linebreack()` .\n\nMy Ideas is to have something like the above, or maybe something simpler, which I don't know.\n\n```typ\n= [My Heading in\\ the Text,My headig in the outline]\n```\n\nI have tried to call `trim()` for `it` but that looks like impossible.\n\n```typ\n#show outline.entry: it => link(\n  it.element.location(),\n  it.indented(\n    it.prefix(),\n   // wrong!\n    str(it.body()).trim() + sym.space + box(width: 1fr, it.fill) + sym.space + sym.wj + it.page()\n  ),\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 627.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1296
    },
    {
      "id": 9347,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-03-03T22:58:43.637Z",
      "updated_at": "2025-03-03T22:58:43.637Z",
      "cooked": "<p>I’m not quite sure I fully understand your questions, but let’s give it a try.</p>\n<blockquote>\n<p>Now I have tried to understand and adopt the snipplet below but i’m to stupid to get it work.</p>\n</blockquote>\n<p>Here is the code snippet adapted for headings.</p>\n<details>\n<summary>\nFlex headings</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#let in-outline = state(\"in-outline\", false)\n#show outline: it =&gt; {\n  in-outline.update(true)\n  it\n  in-outline.update(false)\n}\n\n#let flex-heading(long, short) = context if in-outline.get() { short } else { long }\n\n#outline()\n\n= #flex-heading[My Heading in\\ the #linebreak() Text][My heading in the outline]\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/4/4c85e5abc8e12ca7eae5df2d42401c07ca4f3aeb.png\" data-download-href=\"https://forum.typst.app/uploads/default/4c85e5abc8e12ca7eae5df2d42401c07ca4f3aeb\" title=\"test\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/4/4c85e5abc8e12ca7eae5df2d42401c07ca4f3aeb_2_690x175.png\" alt=\"test\" data-base62-sha1=\"aUX9ZbW5psihM0CbkNE6dllxsLN\" width=\"690\" height=\"175\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/4/4c85e5abc8e12ca7eae5df2d42401c07ca4f3aeb_2_690x175.png, https://forum.typst.app/uploads/default/optimized/2X/4/4c85e5abc8e12ca7eae5df2d42401c07ca4f3aeb_2_1035x262.png 1.5x, https://forum.typst.app/uploads/default/original/2X/4/4c85e5abc8e12ca7eae5df2d42401c07ca4f3aeb.png 2x\" data-dominant-color=\"FCFCFC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">test</span><span class=\"informations\">1191×303 38.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>\n<blockquote>\n<p>I have a text which want to have the heading in capital letters but the outline entry should be ins mixted (Normal) letters.</p>\n</blockquote>\n<p>You can use <code>#show heading: upper</code> which shows all headings with uppercase letter.</p>\n<blockquote>\n<p>The heading text is with <code>\\ | linebreack()</code> .</p>\n</blockquote>\n<p>Do you want to display these headings in the outline without line breaks? You could filter out all <code>linebreak()</code> occurrences.</p>\n<details>\n<summary>\nFiltered Outline Headings</summary>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: it =&gt; {\n  let body = if it.body().has(\"children\") {\n    it.body().children.filter(it =&gt; {it != linebreak()}).join()\n  } else {\n    it.body()\n  } \n  link(\n    it.element.location(),\n    it.indented(\n      it.prefix(),\n      body + sym.space + box(width: 1fr, it.fill) + sym.space + sym.wj + it.page()\n    )\n  )\n}\n\n#outline()\n\n\n= My Heading in\\ the #linebreak() Text\n\n= Heading\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/f/f2efb61acc2192d149c5d3bf6d4163f6b92ff8be.png\" data-download-href=\"https://forum.typst.app/uploads/default/f2efb61acc2192d149c5d3bf6d4163f6b92ff8be\" title=\"test\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/f/f2efb61acc2192d149c5d3bf6d4163f6b92ff8be_2_690x227.png\" alt=\"test\" data-base62-sha1=\"yF77Sl7C2C8RA93He5iHsFBBbcy\" width=\"690\" height=\"227\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/f/f2efb61acc2192d149c5d3bf6d4163f6b92ff8be_2_690x227.png, https://forum.typst.app/uploads/default/optimized/2X/f/f2efb61acc2192d149c5d3bf6d4163f6b92ff8be_2_1035x340.png 1.5x, https://forum.typst.app/uploads/default/original/2X/f/f2efb61acc2192d149c5d3bf6d4163f6b92ff8be.png 2x\" data-dominant-color=\"FCFCFC\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">test</span><span class=\"informations\">1191×392 55 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n</details>",
      "raw": "I'm not quite sure I fully understand your questions, but let's give it a try.\n\n> Now I have tried to understand and adopt the snipplet below but i’m to stupid to get it work.\n\nHere is the code snippet adapted for headings.\n[details=\"Flex headings\"]\n```typ\n#let in-outline = state(\"in-outline\", false)\n#show outline: it => {\n  in-outline.update(true)\n  it\n  in-outline.update(false)\n}\n\n#let flex-heading(long, short) = context if in-outline.get() { short } else { long }\n\n#outline()\n\n= #flex-heading[My Heading in\\ the #linebreak() Text][My heading in the outline]\n```\n![test|690x175](upload://aUX9ZbW5psihM0CbkNE6dllxsLN.png)\n[/details]\n\n> I have a text which want to have the heading in capital letters but the outline entry should be ins mixted (Normal) letters.\n\nYou can use `#show heading: upper` which shows all headings with uppercase letter.\n\n> The heading text is with `\\ | linebreack()` .\n\nDo you want to display these headings in the outline without line breaks? You could filter out all `linebreak()` occurrences.\n\n\n[details=\"Filtered Outline Headings\"]\n```typ\n#show outline.entry: it => {\n  let body = if it.body().has(\"children\") {\n    it.body().children.filter(it => {it != linebreak()}).join()\n  } else {\n    it.body()\n  } \n  link(\n    it.element.location(),\n    it.indented(\n      it.prefix(),\n      body + sym.space + box(width: 1fr, it.fill) + sym.space + sym.wj + it.page()\n    )\n  )\n}\n\n#outline()\n\n\n= My Heading in\\ the #linebreak() Text\n\n= Heading\n```\n![test|690x227](upload://yF77Sl7C2C8RA93He5iHsFBBbcy.png)\n\n[/details]",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 1,
      "reads": 33,
      "score": 36.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9349,
      "post_number": 3,
      "username": "alex01",
      "name": "alex",
      "created_at": "2025-03-03T23:12:21.388Z",
      "updated_at": "2025-03-03T23:12:21.388Z",
      "cooked": "<p><a class=\"mention\" href=\"/u/flokl\">@flokl</a> You are a genius. <img src=\"https://forum.typst.app/images/emoji/apple/man_bowing.png?v=12\" title=\":man_bowing:\" class=\"emoji\" alt=\":man_bowing:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>The second part with the linebreak fix was the solution I searched for.</p>",
      "raw": "@flokl You are a genius. :man_bowing:\n\nThe second part with the linebreak fix was the solution I searched for.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 31,
      "score": 21.2,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1296
    },
    {
      "id": 9350,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-03-04T00:40:16.485Z",
      "updated_at": "2025-03-04T00:40:16.485Z",
      "cooked": "<p>I believe this might be a simpler (and more correct) solution:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show outline.entry: it =&gt; {\n  show linebreak: [ ]\n  it\n}\n\n#outline()\n\n= Abc\\ Def\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/2/264bb260a02a5ee0a7af8b4f915b39da5c99785d.png\" data-download-href=\"https://forum.typst.app/uploads/default/264bb260a02a5ee0a7af8b4f915b39da5c99785d\" title=\"output: linebreak replaced with space\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/2/264bb260a02a5ee0a7af8b4f915b39da5c99785d_2_690x218.png\" alt=\"output: linebreak replaced with space\" data-base62-sha1=\"5sMk3vUZGW91sIDdwMHb8RFa2lv\" width=\"690\" height=\"218\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/2/264bb260a02a5ee0a7af8b4f915b39da5c99785d_2_690x218.png, https://forum.typst.app/uploads/default/optimized/2X/2/264bb260a02a5ee0a7af8b4f915b39da5c99785d_2_1035x327.png 1.5x, https://forum.typst.app/uploads/default/optimized/2X/2/264bb260a02a5ee0a7af8b4f915b39da5c99785d_2_1380x436.png 2x\" data-dominant-color=\"FBFBFB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">output: linebreak replaced with space</span><span class=\"informations\">1500×475 35.7 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
      "raw": "I believe this might be a simpler (and more correct) solution:\n\n```typ\n#show outline.entry: it => {\n  show linebreak: [ ]\n  it\n}\n\n#outline()\n\n= Abc\\ Def\n```\n\n![output: linebreak replaced with space|690x218](upload://5sMk3vUZGW91sIDdwMHb8RFa2lv.png)",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 2,
      "reads": 29,
      "score": 50.8,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 3
    },
    {
      "id": 9351,
      "post_number": 5,
      "username": "alex01",
      "name": "alex",
      "created_at": "2025-03-04T01:46:00.315Z",
      "updated_at": "2025-03-04T01:46:00.315Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"PgBiel\" data-post=\"4\" data-topic=\"3093\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/letter_avatar_proxy/v4/letter/p/F64C96/48.png\" class=\"avatar\"> PgBiel:</div>\n<blockquote>\n<pre><code class=\"lang-auto\">#show outline.entry: it =&gt; {\n  show linebreak: [ ]\n  it\n}\n</code></pre>\n</blockquote>\n</aside>\n<p>Agree, this solution works also and it looks much simpler.</p>",
      "raw": "[quote=\"PgBiel, post:4, topic:3093\"]\n```\n#show outline.entry: it => {\n  show linebreak: [ ]\n  it\n}\n```\n[/quote]\n\nAgree, this solution works also and it looks much simpler.",
      "reply_to_post_number": 4,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 29,
      "score": 5.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1296
    }
  ],
  "scraped_at": "2025-06-10T09:50:47.408128"
}