{
  "topic_metadata": {
    "id": 3008,
    "title": "How can I work around move apparently making blocks unbreakable?",
    "slug": "how-can-i-work-around-move-apparently-making-blocks-unbreakable",
    "posts_count": 3,
    "created_at": "2025-02-26T15:13:02.131Z",
    "last_posted_at": "2025-02-26T16:05:48.236Z",
    "views": 60,
    "like_count": 0,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "flokl",
    "tags": [
      "layout",
      "placement"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 359
  },
  "posts": [
    {
      "id": 9089,
      "post_number": 1,
      "username": "LyesSaadi",
      "name": "Lyes Saadi",
      "created_at": "2025-02-26T15:13:02.271Z",
      "updated_at": "2025-03-07T21:30:41.151Z",
      "cooked": "<p>Hello everyone !</p>\n<p>I am creating my own template where I have environments which look like this:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/50e71c59c538eab755779cfad77d28ef0f9c8332.png\" data-download-href=\"https://forum.typst.app/uploads/default/50e71c59c538eab755779cfad77d28ef0f9c8332\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/50e71c59c538eab755779cfad77d28ef0f9c8332_2_690x94.png\" alt=\"image\" data-base62-sha1=\"bxHlHS7hleT5VTlyMYT4i6am5Ts\" width=\"690\" height=\"94\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/50e71c59c538eab755779cfad77d28ef0f9c8332_2_690x94.png, https://forum.typst.app/uploads/default/optimized/2X/5/50e71c59c538eab755779cfad77d28ef0f9c8332_2_1035x141.png 1.5x, https://forum.typst.app/uploads/default/original/2X/5/50e71c59c538eab755779cfad77d28ef0f9c8332.png 2x\" data-dominant-color=\"E2E2E2\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1247×170 46.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>where the background of the environment extends until the limit of the page</p>\n<p>This is done by having a block which takes the width + 2*margin inside a move which moves the block on the left by margin:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#let environment(body, name: \"Environment\", subtitle: none, counter: auto, follows: false, boxed: true, margin: 2.5cm, scheme: light) = [\n  #v(10pt)\n\n  #move(block(\n    width: 100% + 2*margin,\n    inset: (left: margin, right: margin, top: 1em, bottom: 1em),\n    fill: scheme.env.bg,\n    stroke: (top: scheme.env.stroke, bottom: scheme.env.stroke),\n    breakable: true,\n    text(fill: scheme.env.fg)[\n      #place(\n        block(\n          fill: scheme.env.bg,\n          inset: .4em,\n          radius: .2em,\n          stroke: scheme.env.title-stroke,\n        )[\n          #text(\n            name + if counter != none { \" \" + count(counter, follows) } + if subtitle != none { \":\" },\n            weight: if not follows { \"bold\" } else { \"regular\" },\n            style: if follows { \"italic\" } else { \"normal\" },\n            fill: scheme.env.fg\n          )\n          #if cite != none {\n            subtitle\n          }\n        ],\n        dx: -3em, dy: -1.8em\n      )\n    \n      #body\n    ]),\n  dx: -margin)\n]\n</code></pre>\n<p>But, this obviously makes the environment unbreakable, which create issues with long proofs:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/e/ed7d1d20650d9cd216458f276e7b84cc3213d15a.jpeg\" data-download-href=\"https://forum.typst.app/uploads/default/ed7d1d20650d9cd216458f276e7b84cc3213d15a\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/e/ed7d1d20650d9cd216458f276e7b84cc3213d15a_2_354x500.jpeg\" alt=\"image\" data-base62-sha1=\"xSVdmttohzHk8YKzX5BwwJyKYP0\" width=\"354\" height=\"500\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/e/ed7d1d20650d9cd216458f276e7b84cc3213d15a_2_354x500.jpeg, https://forum.typst.app/uploads/default/optimized/2X/e/ed7d1d20650d9cd216458f276e7b84cc3213d15a_2_531x750.jpeg 1.5x, https://forum.typst.app/uploads/default/optimized/2X/e/ed7d1d20650d9cd216458f276e7b84cc3213d15a_2_708x1000.jpeg 2x\" data-dominant-color=\"DBDBDB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1013×1427 224 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>My ideas on how to solve this would be:</p>\n<ul>\n<li>To have the background being managed by a <code>#place</code>, which would be extremely hacky.</li>\n<li>To have the page’s margin set to 0 and applying an inset to everything else.</li>\n<li>???</li>\n</ul>\n<p>I wanted to ask the community to see if anyone had any other better solution or tips on how to proceed !</p>",
      "raw": "Hello everyone !\n\nI am creating my own template where I have environments which look like this:\n\n![image|690x94](upload://bxHlHS7hleT5VTlyMYT4i6am5Ts.png)\n\nwhere the background of the environment extends until the limit of the page\n\nThis is done by having a block which takes the width + 2*margin inside a move which moves the block on the left by margin:\n\n```typst\n#let environment(body, name: \"Environment\", subtitle: none, counter: auto, follows: false, boxed: true, margin: 2.5cm, scheme: light) = [\n  #v(10pt)\n\n  #move(block(\n    width: 100% + 2*margin,\n    inset: (left: margin, right: margin, top: 1em, bottom: 1em),\n    fill: scheme.env.bg,\n    stroke: (top: scheme.env.stroke, bottom: scheme.env.stroke),\n    breakable: true,\n    text(fill: scheme.env.fg)[\n      #place(\n        block(\n          fill: scheme.env.bg,\n          inset: .4em,\n          radius: .2em,\n          stroke: scheme.env.title-stroke,\n        )[\n          #text(\n            name + if counter != none { \" \" + count(counter, follows) } + if subtitle != none { \":\" },\n            weight: if not follows { \"bold\" } else { \"regular\" },\n            style: if follows { \"italic\" } else { \"normal\" },\n            fill: scheme.env.fg\n          )\n          #if cite != none {\n            subtitle\n          }\n        ],\n        dx: -3em, dy: -1.8em\n      )\n    \n      #body\n    ]),\n  dx: -margin)\n]\n```\n\nBut, this obviously makes the environment unbreakable, which create issues with long proofs:\n\n![image|354x500](upload://xSVdmttohzHk8YKzX5BwwJyKYP0.jpeg)\n\nMy ideas on how to solve this would be:\n- To have the background being managed by a `#place`, which would be extremely hacky.\n- To have the page's margin set to 0 and applying an inset to everything else.\n- ???\n\nI wanted to ask the community to see if anyone had any other better solution or tips on how to proceed !",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 27,
      "score": 105.4,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1265
    },
    {
      "id": 9090,
      "post_number": 2,
      "username": "flokl",
      "name": "",
      "created_at": "2025-02-26T15:53:52.481Z",
      "updated_at": "2025-02-26T15:53:52.481Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/lyessaadi\">@LyesSaadi</a>,</p>\n<p>I didn’t try it with your example as it does not work standalone, but I think it should work if you replace <code>move</code>  with <code>pad</code>, with on the left <code>-margin</code> and on the right positive <code>margin</code>.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">pad(\n  left: -margin,\n  right: margin,\n  ...\n)\n</code></pre>",
      "raw": "Hi @LyesSaadi,\n\nI didn't try it with your example as it does not work standalone, but I think it should work if you replace `move`  with `pad`, with on the left `-margin` and on the right positive `margin`.\n\n```typ\npad(\n  left: -margin,\n  right: margin,\n  ...\n)\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 24.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 8
    },
    {
      "id": 9091,
      "post_number": 3,
      "username": "LyesSaadi",
      "name": "Lyes Saadi",
      "created_at": "2025-02-26T16:05:48.236Z",
      "updated_at": "2025-02-26T16:05:48.236Z",
      "cooked": "<p>Indeed ! Didn’t think of that ! Thanks ! It works like a charm !</p>\n<p>Now the only thing remaining I’d like to solve would be to try having it extends the background to the end of the page when it crosses pages:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://forum.typst.app/uploads/default/original/2X/5/529f2f450d67dac3d4af9f02f1b00adb10fad7df.png\" data-download-href=\"https://forum.typst.app/uploads/default/529f2f450d67dac3d4af9f02f1b00adb10fad7df\" title=\"image\"><img src=\"https://forum.typst.app/uploads/default/optimized/2X/5/529f2f450d67dac3d4af9f02f1b00adb10fad7df_2_690x287.png\" alt=\"image\" data-base62-sha1=\"bMUcEBmmiljAvQrbhZnaTh0QIlp\" width=\"690\" height=\"287\" srcset=\"https://forum.typst.app/uploads/default/optimized/2X/5/529f2f450d67dac3d4af9f02f1b00adb10fad7df_2_690x287.png, https://forum.typst.app/uploads/default/optimized/2X/5/529f2f450d67dac3d4af9f02f1b00adb10fad7df_2_1035x430.png 1.5x, https://forum.typst.app/uploads/default/original/2X/5/529f2f450d67dac3d4af9f02f1b00adb10fad7df.png 2x\" data-dominant-color=\"DEDEDE\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">1086×453 92.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Or maybe having it redisplay the title on the upper border ?</p>\n<p>But, at this point, I’m just bickering <img src=\"https://forum.typst.app/images/emoji/apple/stuck_out_tongue.png?v=12\" title=\":stuck_out_tongue:\" class=\"emoji\" alt=\":stuck_out_tongue:\" loading=\"lazy\" width=\"20\" height=\"20\">.</p>",
      "raw": "Indeed ! Didn't think of that ! Thanks ! It works like a charm !\n\nNow the only thing remaining I'd like to solve would be to try having it extends the background to the end of the page when it crosses pages:\n\n![image|690x287](upload://bMUcEBmmiljAvQrbhZnaTh0QIlp.png)\n\nOr maybe having it redisplay the title on the upper border ?\n\nBut, at this point, I'm just bickering :stuck_out_tongue:.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 25,
      "score": 5.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1265
    }
  ],
  "scraped_at": "2025-06-10T09:51:04.908026"
}