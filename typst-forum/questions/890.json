{
  "topic_metadata": {
    "id": 890,
    "title": "How to show all math as block equations by default?",
    "slug": "how-to-show-all-math-as-block-equations-by-default",
    "posts_count": 4,
    "created_at": "2024-10-03T08:49:01.569Z",
    "last_posted_at": "2024-10-03T12:14:11.360Z",
    "views": 230,
    "like_count": 2,
    "reply_count": 1,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "sijo",
    "tags": [
      "math"
    ],
    "category_id": 5,
    "participant_count": 2,
    "word_count": 290
  },
  "posts": [
    {
      "id": 3300,
      "post_number": 1,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-03T08:49:01.720Z",
      "updated_at": "2024-10-03T08:49:01.720Z",
      "cooked": "<p>Can I setup things to have all <code>$...$</code> math show as block equations?</p>\n<p>Use case: for CeTZ figures I need all math to have correct bounding boxes, otherwise things like <code>fill: white</code> don’t work as expected. But having to write always things like <code>$ P $</code> instead of <code>$P$</code> is annoying and easy to forget. So I’d like to change the default in particular files or scopes, to have <code>$...$</code> produce block equations.</p>\n<p>I tried <code>#set math.equation(block: true)</code> but the spacing in <code>$...$</code> takes precedence.</p>\n<p>Here’s an example of what I want to fix:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#import \"@preview/cetz:0.2.2\"\n\n#let opaque(it) = block(fill: white, inset: 1pt, it)\n\n#cetz.canvas({\n  import cetz.draw: *\n  line((-1, 1), (1, -1))\n  content((-0.4, 0.4), opaque($|x|$))\n  content((0.4, -0.4), opaque($ |x| $))\n})\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/1X/14429461379a3eb9c73c0b280560c6f29472b76e.png\" alt=\"image\" data-base62-sha1=\"2Tec7JVQgFfhyM7ijYsX0PNBKfc\" width=\"134\" height=\"123\"></p>\n<p>I’d like the <code>$|x|$</code> (top-left) to render the same as <code>$ |x| $</code>.</p>",
      "raw": "Can I setup things to have all `$...$` math show as block equations?\n\nUse case: for CeTZ figures I need all math to have correct bounding boxes, otherwise things like `fill: white` don't work as expected. But having to write always things like `$ P $` instead of `$P$` is annoying and easy to forget. So I'd like to change the default in particular files or scopes, to have `$...$` produce block equations.\n\nI tried `#set math.equation(block: true)` but the spacing in `$...$` takes precedence.\n\nHere's an example of what I want to fix:\n\n```typ\n#import \"@preview/cetz:0.2.2\"\n\n#let opaque(it) = block(fill: white, inset: 1pt, it)\n\n#cetz.canvas({\n  import cetz.draw: *\n  line((-1, 1), (1, -1))\n  content((-0.4, 0.4), opaque($|x|$))\n  content((0.4, -0.4), opaque($ |x| $))\n})\n```\n\n![image|134x123](upload://2Tec7JVQgFfhyM7ijYsX0PNBKfc.png)\n\nI'd like the `$|x|$` (top-left) to render the same as `$ |x| $`.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 44,
      "score": 803.6,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 3302,
      "post_number": 2,
      "username": "sitandr",
      "name": "sitandr",
      "created_at": "2024-10-03T10:00:36.267Z",
      "updated_at": "2024-10-03T10:00:36.267Z",
      "cooked": "<p>I know only one solution for that, but it is quite hacky. See this <a href=\"https://sitandr.github.io/typst-examples-book/book/typstonomicon/math_display.html\" rel=\"noopener nofollow ugc\">chapter of Typstonomicon</a>.</p>\n<p>Note that would just make all math <code>display size</code> math, not center aligned block, but that seems okay for your usecase. Though it’s not hard to add alignment or anything to this snippet.</p>",
      "raw": "I know only one solution for that, but it is quite hacky. See this [chapter of Typstonomicon](https://sitandr.github.io/typst-examples-book/book/typstonomicon/math_display.html).\n\nNote that would just make all math `display size` math, not center aligned block, but that seems okay for your usecase. Though it's not hard to add alignment or anything to this snippet.",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 37,
      "score": 22.2,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 19
    },
    {
      "id": 3304,
      "post_number": 3,
      "username": "sijo",
      "name": "",
      "created_at": "2024-10-03T11:47:32.392Z",
      "updated_at": "2024-10-03T11:48:21.530Z",
      "cooked": "<p>Thanks! Using display size is not enough: the equation is still inline so it still has the wrong bounding box. But your link gave me the idea for a solution that seems to work:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#show math.equation.where(block: false): math.equation.with(block: true)\n</code></pre>",
      "raw": "Thanks! Using display size is not enough: the equation is still inline so it still has the wrong bounding box. But your link gave me the idea for a solution that seems to work:\n\n```typ\n#show math.equation.where(block: false): math.equation.with(block: true)\n```",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 36.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 332
    },
    {
      "id": 3307,
      "post_number": 4,
      "username": "sitandr",
      "name": "sitandr",
      "created_at": "2024-10-03T12:14:11.360Z",
      "updated_at": "2024-10-03T12:14:11.360Z",
      "cooked": "<p>That’s cool, I was sure it wouldn’t work.</p>\n<p>It seems it wasn’t working earlier, but is working after the update that fixed show rules. Good to know.</p>",
      "raw": "That's cool, I was sure it wouldn't work.\n\nIt seems it wasn't working earlier, but is working after the update that fixed show rules. Good to know.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 35,
      "score": 21.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 19
    }
  ],
  "scraped_at": "2025-06-10T09:57:29.635132"
}