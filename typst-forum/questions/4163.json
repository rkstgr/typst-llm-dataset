{
  "topic_metadata": {
    "id": 4163,
    "title": "Why does Typst produce the wrong caption?",
    "slug": "why-does-typst-produce-the-wrong-caption",
    "posts_count": 5,
    "created_at": "2025-05-19T15:11:04.053Z",
    "last_posted_at": "2025-05-19T22:43:06.210Z",
    "views": 52,
    "like_count": 3,
    "reply_count": 3,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "SillyFreak",
    "tags": [
      "figures"
    ],
    "category_id": 5,
    "participant_count": 3,
    "word_count": 302
  },
  "posts": [
    {
      "id": 12769,
      "post_number": 1,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-19T15:11:04.331Z",
      "updated_at": "2025-05-19T15:13:14.945Z",
      "cooked": "<p>Hi all,</p>\n<p>Typst compiler produces the wrong caption “Listing 2: Elements classification” for the following figure. How to make it simply “Figure 2: Elements classification”.  Another question, how to change the dimension (width and height) of the figure below. It is possible to do it for image function. But I have no idea how to do it for figure.</p>\n<p>Thank you for your support</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">#figure(\n```pintora\nmindmap\n@param layoutDirection TB\n+ A\n++ B\n+++ C\n+++ D\n++ E\n+++ G\n+++ H\n++ I\n+++ J\n+++ K\n```,\ncaption: [Elements classification]\n)\n</code></pre>",
      "raw": "Hi all,\n\nTypst compiler produces the wrong caption \"Listing 2: Elements classification\" for the following figure. How to make it simply \"Figure 2: Elements classification\".  Another question, how to change the dimension (width and height) of the figure below. It is possible to do it for image function. But I have no idea how to do it for figure.\n\nThank you for your support\n\n````\n#figure(\n```pintora\nmindmap\n@param layoutDirection TB\n+ A\n++ B\n+++ C\n+++ D\n++ E\n+++ G\n+++ H\n++ I\n+++ J\n+++ K\n```,\ncaption: [Elements classification]\n)\n````",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 24,
      "score": 29.8,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    },
    {
      "id": 12770,
      "post_number": 2,
      "username": "SillyFreak",
      "name": "SillyFreak",
      "created_at": "2025-05-19T15:19:09.892Z",
      "updated_at": "2025-05-20T11:44:24.106Z",
      "cooked": "<p>I assume you are using the <a href=\"https://typst.app/universe/package/pintorita\">pintorita</a> package – please make sure you mention packages next time.</p>\n<p>The “listing” supplement comes from the type of content. It seems that Typst sees there is code in the figure, but not that the code is replaced by an image by a show rule. You can get around this by manually specifying <a href=\"https://typst.app/docs/reference/model/figure/#parameters-kind\"><code>kind: image</code></a>.</p>\n<p>I think this is ultimately a bug, and I think the source of it is basically known, but I’ll look for it so this is tracked. (EDIT: same issue with a different show rule is mentioned here: <a href=\"https://github.com/typst/typst/issues/6290#issuecomment-2888878241\" class=\"inline-onebox\">Figure kind auto-detection fails when content is contextual · Issue #6290 · typst/typst · GitHub</a>)</p>",
      "raw": "I assume you are using the [pintorita](https://typst.app/universe/package/pintorita) package -- please make sure you mention packages next time.\n\nThe \"listing\" supplement comes from the type of content. It seems that Typst sees there is code in the figure, but not that the code is replaced by an image by a show rule. You can get around this by manually specifying [`kind: image`](https://typst.app/docs/reference/model/figure/#parameters-kind).\n\nI think this is ultimately a bug, and I think the source of it is basically known, but I'll look for it so this is tracked. (EDIT: same issue with a different show rule is mentioned here: https://github.com/typst/typst/issues/6290#issuecomment-2888878241)",
      "reply_to_post_number": null,
      "reply_count": 3,
      "quote_count": 0,
      "like_count": 2,
      "reads": 24,
      "score": 49.8,
      "accepted_answer": true,
      "trust_level": 3,
      "user_id": 32
    },
    {
      "id": 12771,
      "post_number": 3,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-19T15:29:41.669Z",
      "updated_at": "2025-05-19T15:29:41.669Z",
      "cooked": "<p>Hi SillyFreak,</p>\n<p>Sorry I did not mention I am using Pintorita package. Could you please give me more hints how to include your work-around solution in order to solve my problem before the bug is fixed.</p>\n<p>Thank you.</p>",
      "raw": "Hi SillyFreak,\n\nSorry I did not mention I am using Pintorita package. Could you please give me more hints how to include your work-around solution in order to solve my problem before the bug is fixed.\n\nThank you.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 23,
      "score": 4.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    },
    {
      "id": 12772,
      "post_number": 4,
      "username": "Andrew_Duncan",
      "name": "Andrew Duncan",
      "created_at": "2025-05-19T15:31:18.282Z",
      "updated_at": "2025-05-19T15:31:18.282Z",
      "cooked": "<p>Thank you SillyFreak. Your worn-around has worked for me.</p>",
      "raw": "Thank you SillyFreak. Your worn-around has worked for me.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 23,
      "score": 49.6,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1560
    },
    {
      "id": 12785,
      "post_number": 5,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-19T22:43:06.210Z",
      "updated_at": "2025-05-19T22:43:06.210Z",
      "cooked": "<p>It’s not a bug, as the initial elements do not disappear, so the raw element is still somewhere in the limbo, just isn’t present in the output. And you do pass listing, so it makes sense. I don’t know if this behavior will be changed.</p>",
      "raw": "It's not a bug, as the initial elements do not disappear, so the raw element is still somewhere in the limbo, just isn't present in the output. And you do pass listing, so it makes sense. I don't know if this behavior will be changed.",
      "reply_to_post_number": 2,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 16,
      "score": 3.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    }
  ],
  "scraped_at": "2025-06-10T09:47:38.865230"
}