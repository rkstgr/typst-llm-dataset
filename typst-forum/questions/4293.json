{
  "topic_metadata": {
    "id": 4293,
    "title": "How to check if current file is main?",
    "slug": "how-to-check-if-current-file-is-main",
    "posts_count": 4,
    "created_at": "2025-05-26T08:31:58.452Z",
    "last_posted_at": "2025-05-26T14:47:53.874Z",
    "views": 67,
    "like_count": 2,
    "reply_count": 0,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 2,
    "accepted_answer_username": "Roberto",
    "tags": [
      "scripting"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 269
  },
  "posts": [
    {
      "id": 13143,
      "post_number": 1,
      "username": "legokol",
      "name": "legokol",
      "created_at": "2025-05-26T08:31:58.525Z",
      "updated_at": "2025-05-26T14:47:32.656Z",
      "cooked": "<p>Suppose I have a project, containing 2 files: <code>main.typ</code> and <code>chapter1.typ</code>. Main file <code>main.typ</code> includes chapter via <code>#include \"chapter1.typ\"</code>. However, I want to be able to compile <code>chapter1.typ</code> separately with different set-rules. So, I need something like</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\"># set ... if // is_main() ???\n</code></pre>\n<p>The question is how to implement such is_main function or something like that. I wasn’t able to find a simple way to achieve this, is there any?</p>",
      "raw": "Suppose I have a project, containing 2 files: `main.typ` and `chapter1.typ`. Main file `main.typ` includes chapter via `#include \"chapter1.typ\"`. However, I want to be able to compile `chapter1.typ` separately with different set-rules. So, I need something like\n```typ\n# set ... if // is_main() ???\n```\nThe question is how to implement such is_main function or something like that. I wasn't able to find a simple way to achieve this, is there any?",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 35,
      "score": 67.0,
      "accepted_answer": false,
      "trust_level": 1,
      "user_id": 1655
    },
    {
      "id": 13144,
      "post_number": 2,
      "username": "Roberto",
      "name": "Roberto Giacomelli",
      "created_at": "2025-05-26T09:33:22.748Z",
      "updated_at": "2025-05-26T10:51:21.619Z",
      "cooked": "<p>Hi <a class=\"mention\" href=\"/u/legokol\">@legokol</a> .<br>\nYou may use a solution based on values avalaible in memory as string and passed to the compiler as a key=value formatted data by the <code>--input</code> option.</p>\n<p>For example:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">// this is a no_main.typ file\n#{\n  let is_main = sys.inputs.at( \"main\", default: \"true\")\n  if is_main == \"false\" {\n    [no main file]\n  } else {\n    [yes this is a main file]\n  }\n}\n</code></pre>\n<p>To obtain a no main typesetting, compile it with the command:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">&gt; typst compile --input main=false no_main.typ\n</code></pre>\n<p>Otherwise compile with the command:</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">&gt; typst compile no_main.typ\n</code></pre>\n<p>At this point you need only to substitute the code in the <code>if</code> istruction to set up your document as desired.</p>\n<p>If you desire a preview based on the no main configuration switch the <code>if</code> true/false cases.<br>\nR.</p>",
      "raw": "Hi @legokol .\nYou may use a solution based on values avalaible in memory as string and passed to the compiler as a key=value formatted data by the `--input` option.\n\nFor example:\n\n```typ\n// this is a no_main.typ file\n#{\n  let is_main = sys.inputs.at( \"main\", default: \"true\")\n  if is_main == \"false\" {\n    [no main file]\n  } else {\n    [yes this is a main file]\n  }\n}\n```\n\nTo obtain a no main typesetting, compile it with the command:\n```\n> typst compile --input main=false no_main.typ\n```\nOtherwise compile with the command:\n```\n> typst compile no_main.typ\n```\n\nAt this point you need only to substitute the code in the `if` istruction to set up your document as desired.\n\nIf you desire a preview based on the no main configuration switch the `if` true/false cases.\nR.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 0,
      "reads": 34,
      "score": 11.8,
      "accepted_answer": true,
      "trust_level": 1,
      "user_id": 1471
    },
    {
      "id": 13157,
      "post_number": 3,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-05-26T12:34:56.626Z",
      "updated_at": "2025-05-26T12:34:56.626Z",
      "cooked": "<p>Hello. This is currently not directly possible without some hackery: <a href=\"https://github.com/typst/typst/issues/4502\" class=\"inline-onebox\">Entry point (main file) detection within Typst document for nested projects · Issue #4502 · typst/typst · GitHub</a>.</p>",
      "raw": "Hello. This is currently not directly possible without some hackery: https://github.com/typst/typst/issues/4502.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 26,
      "score": 20.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 13185,
      "post_number": 4,
      "username": "PgBiel",
      "name": "",
      "created_at": "2025-05-26T14:47:53.874Z",
      "updated_at": "2025-05-26T14:47:53.874Z",
      "cooked": "<p>Hey <a class=\"mention\" href=\"/u/legokol\">@legokol</a>, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: <a href=\"https://forum.typst.app/t/how-to-post-in-the-questions-category/11\" class=\"inline-onebox\">How to post in the Questions category</a><br>\nFor future posts, make sure your title is a question you’d ask to a friend about Typst. <img src=\"https://forum.typst.app/images/emoji/apple/wink.png?v=12\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>",
      "raw": "Hey @legokol, welcome to the forum! I’ve changed your question post’s title to better fit our guidelines: https://forum.typst.app/t/how-to-post-in-the-questions-category/11\nFor future posts, make sure your title is a question you’d ask to a friend about Typst. :wink:",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 22,
      "score": 19.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 3
    }
  ],
  "scraped_at": "2025-06-10T09:47:16.596378"
}