{
  "topic_metadata": {
    "id": 3562,
    "title": "How to control line breaks (wrap opportunities) in inline math?",
    "slug": "how-to-control-line-breaks-wrap-opportunities-in-inline-math",
    "posts_count": 8,
    "created_at": "2025-04-08T13:14:10.610Z",
    "last_posted_at": "2025-04-09T03:54:03.563Z",
    "views": 113,
    "like_count": 5,
    "reply_count": 5,
    "has_accepted_answer": true,
    "accepted_answer_post_number": 3,
    "accepted_answer_username": "Y.D.X",
    "tags": [
      "math",
      "text"
    ],
    "category_id": 5,
    "participant_count": 4,
    "word_count": 461
  },
  "posts": [
    {
      "id": 10779,
      "post_number": 1,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2025-04-08T13:14:10.804Z",
      "updated_at": "2025-04-08T13:23:00.444Z",
      "cooked": "<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">#set page(height: auto, width: 10em, margin: 1em)\nThen $exists x &gt; 0, f(x) = y$ and why?\n</code></pre>\n<p><img src=\"https://forum.typst.app/uploads/default/original/2X/c/cb1c197fd8bb631ea658a2e533a2c150db0e3f23.png\" alt=\"图片\" data-base62-sha1=\"sYN82iPI4GTmx56sAn0SecRXKAX\" width=\"322\" height=\"187\"></p>\n<p>How to allow the line to break after <code>,</code>? I think the following would be better.</p>\n<pre><code class=\"lang-auto\">Then ∃x&gt;0,\nf(x) = y and\nwhy?\n</code></pre>\n<h2><a name=\"p-10779-why-cant-i-split-it-1\" class=\"anchor\" href=\"#p-10779-why-cant-i-split-it-1\"></a>Why can’t I split it?</h2>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">$exists x &gt; 0$, $f(x) = y$\n</code></pre>\n<p>My document is not English, and I have to use a dedicated font for my main text. The font provides a good glyph for this comma, but it does not fit well among Latin-like characters in math equations.</p>\n<p>Moreover, I can’t <code>set text(font: (covers: regex_matching_comma_period_etc, …))</code>, because it will destroy kerning.</p>\n<h2><a name=\"p-10779-my-failed-attempts-2\" class=\"anchor\" href=\"#p-10779-my-failed-attempts-2\"></a>My (failed) attempts</h2>\n<ul>\n<li>Adding <code>med</code>/<code>thin</code>/etc. doesn’t break the line.</li>\n<li>Inserting <code>zwj</code>/<code>zwnj</code> changes nothing.</li>\n<li>Inserting a <code>#linebreak()</code> gives a weird result.<br>\n<img src=\"https://forum.typst.app/uploads/default/original/2X/0/0f04944fa468c3a5575af944e854271da4822080.png\" alt=\"图片\" data-base62-sha1=\"28QYlaeRsRFGbkxO2P6GexxNi1i\" width=\"255\" height=\"131\"></li>\n</ul>",
      "raw": "```typst\n#set page(height: auto, width: 10em, margin: 1em)\nThen $exists x > 0, f(x) = y$ and why?\n```\n\n![图片|322x187](upload://sYN82iPI4GTmx56sAn0SecRXKAX.png)\n\nHow to allow the line to break after `,`? I think the following would be better.\n\n```\nThen ∃x>0,\nf(x) = y and\nwhy?\n```\n\n## Why can't I split it?\n\n```typst\n$exists x > 0$, $f(x) = y$\n```\n\nMy document is not English, and I have to use a dedicated font for my main text. The font provides a good glyph for this comma, but it does not fit well among Latin-like characters in math equations.\n\nMoreover, I can't `set text(font: (covers: regex_matching_comma_period_etc, …))`, because it will destroy kerning.\n\n## My (failed) attempts\n\n- Adding `med`/`thin`/etc. doesn't break the line.\n- Inserting `zwj`/`zwnj` changes nothing.\n- Inserting a `#linebreak()` gives a weird result.\n  ![图片|255x131](upload://28QYlaeRsRFGbkxO2P6GexxNi1i.png)",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 22,
      "score": 399.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 292
    },
    {
      "id": 10781,
      "post_number": 2,
      "username": "janekfleper",
      "name": "Janek Fleper",
      "created_at": "2025-04-08T13:46:27.208Z",
      "updated_at": "2025-04-08T13:46:27.208Z",
      "cooked": "<p>You could just wrap the comma in a separate equation to get the correct font. The space of the comma relative to the zero looks to be equal to the case where everything is in the same equation. The space behind the comma will be wider by default because you have to use the “plain-text” space between the last two equations. This is however not an issue when you have a line break.</p>\n<pre data-code-wrap=\"typ\"><code class=\"lang-typ\">Then $exists x &gt; 0$$,$ $f(x) = y$ and why?\n</code></pre>",
      "raw": "You could just wrap the comma in a separate equation to get the correct font. The space of the comma relative to the zero looks to be equal to the case where everything is in the same equation. The space behind the comma will be wider by default because you have to use the \"plain-text\" space between the last two equations. This is however not an issue when you have a line break.\n\n```typ\nThen $exists x > 0$$,$ $f(x) = y$ and why?\n```",
      "reply_to_post_number": null,
      "reply_count": 1,
      "quote_count": 0,
      "like_count": 0,
      "reads": 21,
      "score": 9.2,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 69
    },
    {
      "id": 10784,
      "post_number": 3,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2025-04-08T14:11:34.834Z",
      "updated_at": "2025-04-08T14:11:34.834Z",
      "cooked": "<p>Thank you! Inspired by your reply, I realize that I can simply write:</p>\n<pre data-code-wrap=\"typst\"><code class=\"lang-typst\">$exists x &gt; 0,$ $f(x) = y$\n</code></pre>\n<p>But to be honest, I don’t think this is an elegant way…</p>",
      "raw": "Thank you! Inspired by your reply, I realize that I can simply write:\n\n```typst\n$exists x > 0,$ $f(x) = y$\n```\n\nBut to be honest, I don't think this is an elegant way…",
      "reply_to_post_number": 2,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 2,
      "reads": 21,
      "score": 44.2,
      "accepted_answer": true,
      "trust_level": 2,
      "user_id": 292
    },
    {
      "id": 10790,
      "post_number": 4,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-04-08T15:45:03.488Z",
      "updated_at": "2025-04-08T15:45:03.488Z",
      "cooked": "<p>Indeed, this is how you would split it.</p>\n<aside class=\"quote no-group\" data-username=\"Y.D.X\" data-post=\"3\" data-topic=\"3562\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/y.d.x/48/252_2.png\" class=\"avatar\"> Y.D.X:</div>\n<blockquote>\n<p>But to be honest, I don’t think this is an elegant way…</p>\n</blockquote>\n</aside>\n<p>Well, long inline math is hard to make look good. Typst is a WYSIWYM tool, so if you explicitly don’t say it to break, it won’t break. If you want, you can always open a new issue and see if others will agree. Perhaps this can be improved.</p>",
      "raw": "Indeed, this is how you would split it.\n\n[quote=\"Y.D.X, post:3, topic:3562\"]\nBut to be honest, I don’t think this is an elegant way…\n[/quote]\n\nWell, long inline math is hard to make look good. Typst is a WYSIWYM tool, so if you explicitly don't say it to break, it won't break. If you want, you can always open a new issue and see if others will agree. Perhaps this can be improved.",
      "reply_to_post_number": 3,
      "reply_count": 1,
      "quote_count": 1,
      "like_count": 1,
      "reads": 20,
      "score": 24.0,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10795,
      "post_number": 5,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2025-04-08T16:12:45.421Z",
      "updated_at": "2025-04-08T16:14:12.628Z",
      "cooked": "<blockquote>\n<p>WYSIWYM</p>\n</blockquote>\n<p>But it breaks between<code>&gt;</code> and <code>0</code>!</p>\n<p>I will create an issue when I have time, unless someone does it first.</p>",
      "raw": "> WYSIWYM\n\nBut it breaks between`>` and `0`!\n\nI will create an issue when I have time, unless someone does it first.",
      "reply_to_post_number": 4,
      "reply_count": 2,
      "quote_count": 0,
      "like_count": 0,
      "reads": 19,
      "score": 13.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 292
    },
    {
      "id": 10796,
      "post_number": 6,
      "username": "Andrew",
      "name": "",
      "created_at": "2025-04-08T16:16:30.217Z",
      "updated_at": "2025-04-08T16:16:30.217Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Y.D.X\" data-post=\"5\" data-topic=\"3562\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/y.d.x/48/252_2.png\" class=\"avatar\"> Y.D.X:</div>\n<blockquote>\n<p>But it breaks between<code>&gt;</code> and <code>0</code>!</p>\n</blockquote>\n</aside>\n<p>True. I guess changing the breaking locations and their priority would be nice to have.</p>",
      "raw": "[quote=\"Y.D.X, post:5, topic:3562\"]\nBut it breaks between`>` and `0`!\n[/quote]\n\nTrue. I guess changing the breaking locations and their priority would be nice to have.",
      "reply_to_post_number": 5,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 19,
      "score": 8.8,
      "accepted_answer": false,
      "trust_level": 3,
      "user_id": 51
    },
    {
      "id": 10798,
      "post_number": 7,
      "username": "Eric",
      "name": "Eric Biedert",
      "created_at": "2025-04-08T16:35:11.402Z",
      "updated_at": "2025-04-08T16:35:11.402Z",
      "cooked": "<p>A related issue regarding customizable line breaking behaviour in math already exists:</p><aside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/typst/typst/issues/4795\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/issues/4795\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/typst/typst/issues/4795\" target=\"_blank\" rel=\"noopener nofollow ugc\">Simple way to add non-breaking space in math mode</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2024-08-20\" data-time=\"14:50:18\" data-timezone=\"UTC\">02:50PM - 20 Aug 24 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/memeplex\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n          <img alt=\"memeplex\" src=\"https://forum.typst.app/uploads/default/original/2X/b/be9d22aa41a60f0625240b23bfdda2461e291a25.jpeg\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"A2957C\">\n          memeplex\n        </a>\n      </div>\n    </div>\n\n    <div class=\"labels\">\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          feature request\n        </span>\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          math\n        </span>\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          syntax\n        </span>\n    </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">### Description\n\nInline equations may be particularly sensible to arbitrary li<span class=\"show-more-container\"><a href=\"\" rel=\"noopener\" class=\"show-more\">…</a></span><span class=\"excerpt hidden\">ne breaks. A convenient way to add non-breaking space (such as `~` in text mode) would be helpful. One can also box the equation, although that currently introduces some baseline related issues e.g. (see also https://github.com/typst/typst/issues/4796):\n\n```typst\nHello #box($a + sum_(i=1)^n x_i / y_i$) world\n```\n\n&lt;img width=\"227\" alt=\"image\" src=\"https://github.com/user-attachments/assets/f78339e9-ea22-40fe-933e-26ff3fc8ae49\"&gt;\n\nMaybe fixing this would be enough, but I believe that `~` or similar could help.\n\n### Use Case\n\nDuring the final phase of document edition it would be useful to add a handful of `~` where the author detects problematic line breaks inside equations.</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
      "raw": "A related issue regarding customizable line breaking behaviour in math already exists:\nhttps://github.com/typst/typst/issues/4795",
      "reply_to_post_number": 3,
      "reply_count": 0,
      "quote_count": 0,
      "like_count": 1,
      "reads": 19,
      "score": 18.8,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 88
    },
    {
      "id": 10828,
      "post_number": 8,
      "username": "Y.D.X",
      "name": "Y.D.X.",
      "created_at": "2025-04-09T03:54:03.563Z",
      "updated_at": "2025-04-09T03:54:03.563Z",
      "cooked": "<aside class=\"quote no-group\" data-username=\"Y.D.X\" data-post=\"5\" data-topic=\"3562\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://forum.typst.app/user_avatar/forum.typst.app/y.d.x/48/252_2.png\" class=\"avatar\"> Y.D.X:</div>\n<blockquote>\n<p>I will create an issue when I have time, unless someone does it first.</p>\n</blockquote>\n</aside>\n<p>I’ve just found an exact issue:</p><aside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/typst/typst/issues/5315#issuecomment-2788211046\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/typst/typst/issues/5315#issuecomment-2788211046\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com/typst/typst</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <div class=\"github-row\">\n  <div class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\">\n\t  <svg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg>\n  </div>\n\n  <div class=\"github-info-container\">\n    <h4>\n      <a href=\"https://github.com/typst/typst/issues/5315#issuecomment-2788211046\" target=\"_blank\" rel=\"noopener nofollow ugc\">In inline math mode, allow breaking lines after a comma</a>\n    </h4>\n\n    <div class=\"github-info\">\n      <div class=\"date\">\n        opened <span class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2024-10-28\" data-time=\"17:33:33\" data-timezone=\"UTC\">05:33PM - 28 Oct 24 UTC</span>\n      </div>\n\n\n      <div class=\"user\">\n        <a href=\"https://github.com/jmigual\" target=\"_blank\" rel=\"noopener nofollow ugc\">\n          <img alt=\"jmigual\" src=\"https://forum.typst.app/uploads/default/original/2X/b/b355ea1b3279021f8ff0ae68b39c0e9c7e99d168.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"CAC1BE\">\n          jmigual\n        </a>\n      </div>\n    </div>\n\n    <div class=\"labels\">\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          feature request\n        </span>\n        <span style=\"display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;\">\n          math\n        </span>\n    </div>\n  </div>\n</div>\n\n  <div class=\"github-row\">\n    <p class=\"github-body-container\">### Description\n\nThere are already some cases where inline math breaks lines aut<span class=\"show-more-container\"><a href=\"\" rel=\"noopener\" class=\"show-more\">…</a></span><span class=\"excerpt hidden\">omatically. However, it seems that comma doesn't trigger this scenario. It'd be nice to either: (1) have an option to choose whether or not a line break can be added after a comma or (2) make commas \"breakable\" by default.\n\n### Use Case\n\nIn my use case, I was trying to write a very long tuple:\n\n```typst\nTest of a sentence with math that should break after a comma: \n$E = (M, O, sans(\"cap\"), sans(\"prc\"), sans(\"nextM\"), sans(\"csiM\"), sans(\"csd\"))$\n```\n\nAnd this is how it rendered:\n\n![image](https://github.com/user-attachments/assets/62faef9d-f6ef-461f-8394-e357eeef6a34)\n\nThe Typst version used for this is v0.12.0.</span></p>\n  </div>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Therefore, I will close this topic. Hope the linebreak algorithm will be improved someday.</p>",
      "raw": "[quote=\"Y.D.X, post:5, topic:3562\"]\nI will create an issue when I have time, unless someone does it first.\n[/quote]\n\nI've just found an exact issue:\nhttps://github.com/typst/typst/issues/5315#issuecomment-2788211046\n\nTherefore, I will close this topic. Hope the linebreak algorithm will be improved someday.",
      "reply_to_post_number": null,
      "reply_count": 0,
      "quote_count": 1,
      "like_count": 0,
      "reads": 17,
      "score": 3.4,
      "accepted_answer": false,
      "trust_level": 2,
      "user_id": 292
    }
  ],
  "scraped_at": "2025-06-10T09:49:33.517908"
}